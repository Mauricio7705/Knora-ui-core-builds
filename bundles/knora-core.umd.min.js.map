{"version":3,"sources":["null","ng://@knora/core/lib/declarations/api/knora-constants.ts","ng://@knora/core/lib/declarations/core.config.ts","ng://@knora/core/lib/declarations/api-service-result.ts","ng://@knora/core/lib/declarations/api-service-error.ts","ng://@knora/core/lib/declarations/utils.ts","ng://@knora/core/lib/declarations/api/shared/date.ts","ng://@knora/core/lib/declarations/api/shared/strings.ts","ng://@knora/core/lib/services/v2/ontology-cache.service.ts","ng://@knora/core/lib/declarations/api/admin/authentication/authentication-response.ts","ng://@knora/core/lib/declarations/api/admin/projects/project.ts","ng://@knora/core/lib/declarations/api/admin/groups/group.ts","ng://@knora/core/lib/declarations/api/admin/groups/group-response.ts","ng://@knora/core/lib/declarations/api/admin/groups/groups-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-info.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-node.ts","ng://@knora/core/lib/declarations/api/admin/lists/list.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-info-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-node-info.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-node-info-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/list-response.ts","ng://@knora/core/lib/declarations/api/admin/lists/lists-response.ts","ng://@knora/core/lib/declarations/api/admin/ontologies/ontology-info-short.ts","ng://@knora/core/lib/declarations/api/admin/permissions/permission-data.ts","ng://@knora/core/lib/declarations/api/admin/users/user.ts","ng://@knora/core/lib/declarations/api/admin/projects/project-members-response.ts","ng://@knora/core/lib/declarations/api/admin/projects/project-response.ts","ng://@knora/core/lib/declarations/api/admin/projects/projects-response.ts","ng://@knora/core/lib/declarations/api/admin/users/current-user.ts","ng://@knora/core/lib/declarations/api/admin/users/users-response.ts","ng://@knora/core/lib/declarations/api/admin/users/user-response.ts","ng://@knora/core/lib/declarations/api/v2/properties/read-property-item.ts","ng://@knora/core/lib/declarations/api/v2/resources/read-resource.ts","ng://@knora/core/lib/declarations/api/v2/resources/read-resources-sequence.ts","ng://@knora/core/lib/declarations/api/v2/still-image/still-image-representation.ts","ng://@knora/core/lib/declarations/api/v2/still-image/image-region.ts","ng://@knora/core/lib/core.module.ts","ng://@knora/core/lib/services/api.service.ts","ng://@knora/core/lib/services/admin/groups.service.ts","ng://@knora/core/lib/services/admin/lists.service.ts","ng://@knora/core/lib/services/admin/projects.service.ts","ng://@knora/core/lib/services/admin/users.service.ts","ng://@knora/core/lib/services/admin/language.service.ts","ng://@knora/core/lib/services/admin/status-msg.service.ts","ng://@knora/core/lib/services/v2/ontology.service.ts","ng://@knora/core/lib/services/v2/resource.service.ts","ng://@knora/core/lib/services/v2/search.service.ts","ng://@knora/core/lib/services/v2/convert-jsonld.ts","ng://@knora/core/lib/services/v2/incoming.service.ts","ng://@knora/core/lib/services/v2/search-params.service.ts","ng://@knora/core/lib/services/v2/grav-search.service.ts","ng://@knora/core/lib/services/v2/store.service.ts","ng://@knora/core/lib/services/v2/basic-ontology.service.ts","ng://@knora/core/lib/services/v2/resource-types.service.ts","ng://@knora/core/lib/declarations/api/operators.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","metadataKey","metadataValue","metadata","__values","o","m","Symbol","iterator","call","next","value","done","KnoraSchema","KuiCoreConfig","name","undefined","api","media","app","tslib_1.__decorate","JsonProperty","String","JsonObject","ApiServiceResult","status","statusText","url","getBody","classObject","jsonConvert","deserialize","body","JsonConvert","OperationMode","ENABLE","ValueCheckingMode","ALLOW_NULL","ApiServiceError","errorInfo","KnoraConstants","KnoraApi","PathSeparator","SystemProjectIRI","KnoraBase","KnoraOntologyPath","SystemAdminGroupIRI","ProjectAdminGroupIRI","ProjectMemberGroupIRI","KnoraApiV2WithValueObjectPath","KnoraApiV2SimplePath","SalsahGuiOrder","SalsahGuiOntology","StandoffOntology","Resource","TextValue","IntValue","BooleanValue","UriValue","DecimalValue","DateValue","ColorValue","GeomValue","ListValue","IntervalValue","LinkValue","GeonameValue","FileValue","AudioFileValue","DDDFileValue","DocumentFileValue","StillImageFileValue","MovingImageFileValue","TextFileValue","IsResourceClass","IsValueClass","ForbiddenResource","XMLToStandoffMapping","ListNode","ObjectType","ResourceIcon","isEditable","isLinkProperty","isLinkValueProperty","hasGeometry","schemaName","schemaNumberOfItems","schemaItemListElement","RdfProperty","RdfsLabel","RdfsComment","RdfsSubclassOf","subPropertyOf","OwlClass","owl","OwlObjectProperty","OwlDatatypeProperty","OwlAnnotationProperty","OwlOnProperty","OwlMaxCardinality","OwlMinCardinality","OwlCardinality","OwlRestriction","creationDate","lastModificationDate","hasPermissions","attachedToProject","attachedToUser","Region","ReadTextValueAsHtml","ReadTextValueAsString","ReadTextValueAsXml","ReadDateValue","ReadLinkValue","ReadIntegerValue","ReadDecimalValue","ReadStillImageFileValue","ReadTextFileValue","ReadGeomValue","ReadColorValue","ReadUriValue","ReadBooleanValue","ReadIntervalValue","ReadListValue","valueAsString","textValueAsHtml","textValueAsXml","textValueHasMapping","hasStandoffLinkToValue","dateValueHasStartYear","dateValueHasEndYear","dateValueHasStartEra","dateValueHasEndEra","dateValueHasStartMonth","dateValueHasEndMonth","dateValueHasStartDay","dateValueHasEndDay","dateValueHasCalendar","linkValueHasTarget","linkValueHasSource","linkValueHasSourceIri","linkValueHasTargetIri","integerValueAsInteger","decimalValueAsDecimal","fileValueAsUrl","fileValueIsPreview","fileValueHasFilename","hasStillImageFileValue","stillImageFileValueHasDimX","stillImageFileValueHasDimY","stillImageFileValueHasIIIFBaseUrl","colorValueAsColor","geometryValueAsGeometry","uriValueAsUri","booleanValueAsBoolean","intervalValueHasStart","intervalValueHasEnd","listValueAsListNode","listValueAsListNodeLabel","xsdString","Xsd","xsdBoolean","xsdInteger","xsdDecimal","xsdUri","resourceSimple","dateSimple","intervalSimple","geomSimple","colorSimple","geonameSimple","fileSimple","matchFunction","EqualsComparisonOperator","EqualsComparisonLabel","NotEqualsComparisonOperator","NotEqualsComparisonLabel","GreaterThanComparisonOperator","GreaterThanComparisonLabel","GreaterThanEqualsComparisonOperator","GreaterThanEqualsComparisonLabel","LessThanComparisonOperator","LessThanComparisonLabel","LessThanEqualsComparisonOperator","LessThanQualsComparisonLabel","ExistsComparisonOperator","ExistsComparisonLabel","LikeComparisonOperator","LikeComparisonLabel","MatchComparisonOperator","MatchComparisonLabel","SalsahLink","RefMarker","GNDPrefix","GNDResolver","VIAFPrefix","VIAFResolver","Precision","Utils","getOntologyIriFromEntityIri","entityIri","segments","split","console","error","convertComplexKnoraApiEntityIritoSimple","complexEntityIri","RegexEmail","RegexUrl","RegexPassword","RegexHex","RegexShortname","filterOutDuplicates","elem","index","self","indexOf","StringLiteral","language","CardinalityOccurrence","DateSalsah","calendar","era","year","month","day","precision","yearPrecision","monthPrecision","dayPrecision","getDateAsStringWithoutCalendar","dateString","toString","separator","getDateAsString","DateRangeSalsah","start","end","AuthenticationResponse","token","Project","id","shortname","shortcode","longname","description","keywords","logo","institution","ontologies","selfjoin","Boolean","Group","project","GroupResponse","group","GroupsResponse","groups","ListInfo","projectIri","labels","comments","label","children","level","position","ListNode_1","Number","List","listinfo","ListInfoResponse","ListNodeInfo","isRootNode","ListNodeInfoResponse","nodeinfo","ListResponse","list","ListsResponse","lists","OntologyInfoShort","ontologyIri","ontologyName","PermissionData","groupsPerProject","administrativePermissionsPerProject","User","email","password","givenName","familyName","lang","projects","sessionId","permissions","systemAdmin","ProjectMembersResponse","members","ProjectResponse","ProjectsResponse","CurrentUser","jwt","sysAdmin","UsersResponse","users","UserResponse","user","ReadTextValue","type","_super","propIri","str","_this","tslib_1.__extends","getClassName","getContent","ReferredResourcesByStandoffLink","html","referredResources","getReferredResourceInfo","resourceIri","ontologyInfo","resClassLabel","getLabelForResourceClass","xml","mappingIri","startYear","endYear","startEra","endEra","startMonth","endMonth","startDay","endDay","getDateSalsah","referredResourceIri","referredResource","integer","decimal","imageFilename","imageServerIIIFBaseURL","imagePath","dimX","dimY","isPreview","makeIIIFUrl","reduceFactor","percentage","Math","floor","textFilename","textFileURL","colorHex","Point2D","x","y","RegionGeometry","lineColor","lineWidth","points","radius","geometryString","geometryJSON","JSON","parse","_a","tslib_1.__values","_b","point","push","geometry","uri","bool","intervalStart","intervalEnd","listNodeIri","listNodeLabel","ReadResource","incomingRegions","incomingStillImageRepresentations","incomingLinks","stillImageRepresentationsToDisplay","properties","ReadResourcesSequence","resources","numberOfResources","StillImageRepresentation","stillImageFileValue","regions","ImageRegion","regionResource","getGeometries","KuiCoreModule","forRoot","config","ngModule","providers","provide","useValue","NgModule","args","imports","CommonModule","HttpClientModule","declarations","exports","Éµ0","ApiService","http","loading","httpGet","path","params","get","observe","pipe","map","response","result","catchError","handleRequestError","httpPost","post","httpPut","put","httpDelete","delete","serviceError","message","throwError","handleJsonError","Injectable","providedIn","HttpClient","Inject","GroupsService","apply","getAllGroups","getGroupByIri","iri","encodeURIComponent","ListsService","getLists","getList","listIri","getListInfo","getListNodeInfo","nodeIri","createList","payload","updateListInfo","ProjectsService","getAllProjects","getProjectByIri","getProject","getProjectByShortname","getProjectByShortcode","getProjectMembersByIri","getProjectMembers","getProjectMembersByShortname","getProjectMembersByShortcode","createProject","data","updateProject","activateProject","deleteProject","UsersService","usersUrl","getAllUsers","getUserByEmail","getUser","getUserByIri","createUser","addUserToProject","userIri","addUserToProjectAdmin","removeUserFromProjectAdmin","addUserToSystemAdmin","activateUser","updateUser","updateOwnPassword","oldPassword","newPassword","requesterPassword","updateUsersPassword","deleteUser","removeUserFromProject","LanguageService","subject","Subject","setLanguage","var","getLanguage","asObservable","StatusMsgService","_http","getStatusMsg","res","err","OntologyService","getOntologiesMetadata","getAllEntityDefinitionsForOntologies","getResourceClasses","resourceClassIris","Observable","observer","resClassUriEnc","forEach","resClassIri","getProperties","propertyIris","propertiesUriEnc","jsonld","require","OntologyCacheError","Error","OntologyMetadata","Cardinality","occurrence","property","ResourceClass","icon","comment","cardinalities","ResourceClasses","Property","objectType","Properties","ResourceClassIrisForOntology","OntologyCache","resourceClassIrisForOntology","resourceClasses","OntologyInformation","resourceClassesForOntology","updateOntologyInformation","newResourceClassesForOntology","getResourceClassForOntology","newResClassForOntology","newResourceClasses","newResClass","newProperties","newProp","getResourceClassesAsArray","resClasses","resClass","resClassDef","log","getPropertiesAsArray","prop","getLabelForProperty","propDef","OntologyCacheService","_ontologyService","excludedOntologies","excludedProperties","nonResourceClasses","cacheOntology","getOntologiesMetadataFromKnora","mergeMap","ontRes","ontPromise","promises","compact","from","getAllEntityDefinitionsForOntologyFromKnora","convertAndWriteOntologiesMetadataToCache","ontology","getAllOntologiesMetadataFromCache","getResourceClassIrisFromOntologyResponse","classDefinitions","classDefinitions_1","classDefinitions_1_1","classDef","classIri","convertAndWriteAllEntityDefinitionsForOntologyToCache","graph","classDefs","filter","entity","propertyDefs","entityType","convertAndWriteEntityDefinitionsToCache","getOntologyInformationFromCache","ontologyIris","allResourceClassIris","ontologyIris_1","ontologyIris_1_1","concat","getResourceClassDefinitions","resClassDefs","resourceClassDefinitions","propertyClassDefinitions","resourceClassDefinitions_1","resourceClassDefinitions_1_1","subclassOfCollection","isArray","subclassOfCollection_1","subclassOfCollection_1_1","curCard","newCard","minCard","card","TypeError","maxCard","resClassObj","convertAndWriteKnoraPropertyDefinitionsToOntologyCache","getResourceClassDefinitionsFromCache","resClassIris","getPropertyDefinitions","propDefs","propertyDefinitionsFromKnora","propertyDefinitionsFromKnora_1","propertyDefinitionsFromKnora_1_1","superProp","getPropertyDefinitionsFromCache","onto","of","getAndCacheOntologies","observables","forkJoin","getEntityDefinitionsForOntologies","ontologyIrisToQuery","results","resClassIrisToQueryFor","propertiesToQuery","ResourceService","getResource","SearchService","doFulltextSearch","searchTerm","offset","doFulltextSearchCountQuery","doExtendedSearch","sparqlString","doExtendedSearchCountQuery","searchByLabel","resourceClassIRI","ConvertJSONLD","getPropertyNames","propName","constructReadResource","resourceJSONLD","constructReadProperties","standoffLinkValuesJSONLD","standoffLinkValues","standoffLinkValuesJSONLD_1","standoffLinkValuesJSONLD_1_1","standoffLinkJSONLD","standoffVal","createValueSpecificProp","propNames","keys","propNames_1","propNames_1_1","propValues","_c","propValue","valueSpecificProp","textValue","standoffLinkValues_1","standoffLinkValues_1_1","referredRes","stringify","linkValue","incomingResource","incomingResourceIri","decVal","parseFloat","intStart","intEnd","getReferredResourceClasses","referredResourceClasses","propNames_2","propNames_2_1","createReadResourcesSequenceFromJsonLD","resourcesResponseJSONLD","resourcesGraph","resourcesGraph_1","resourcesGraph_1_1","resource","getResourceClassesFromJsonLD","resourcesGraph_2","resourcesGraph_2_1","IncomingService","getIncomingRegions","resourceIRI","sparqlQueryStr","getStillImageRepresentationsForCompoundResource","getIncomingLinksForResource","ExtendedSearchParams","generateGravsearch","SearchParamsService","searchParamsMessage","BehaviorSubject","currentSearchParams","changeSearchParamsMsg","searchParams","GravsearchGenerationError","msg","GravsearchGenerationService","_searchParamsService","convertComplexTypeToSimpleType","complexType","simpleType","typeConversionComplexToSimple","createGravsearchQuery","mainResourceClassOption","mainResourceClass","orderByCriteria","returnStatements","props","propWithVal","propIriSimple","statement","valueLiteral","comparisonOperator","toSparql","simple","propTypeAnnotation","propValueAnnotation","isSortCriterion","orderByStatement","join","gravsearchTemplate","offsetTemplate","localOffset","http://api.knora.org/ontology/knora-api/v2#IntValue","http://api.knora.org/ontology/knora-api/v2#DecimalValue","http://api.knora.org/ontology/knora-api/v2#BooleanValue","http://api.knora.org/ontology/knora-api/v2#TextValue","http://api.knora.org/ontology/knora-api/v2#DateValue","http://api.knora.org/ontology/knora-api/v2#IntervalValue","http://api.knora.org/ontology/knora-api/v2#GeomValue","http://api.knora.org/ontology/knora-api/v2#ColorValue","http://api.knora.org/ontology/knora-api/v2#GeonameValue","http://api.knora.org/ontology/knora-api/v2#UriValue","http://api.knora.org/ontology/knora-api/v2#StillImageFileValue","http://api.knora.org/ontology/knora-api/v2#FileValue","http://api.knora.org/ontology/knora-api/v2#MovingImageFileValue","http://api.knora.org/ontology/knora-api/v2#DDDFileValue","http://api.knora.org/ontology/knora-api/v2#AudioFileValue","http://api.knora.org/ontology/knora-api/v2#DocumentFileValue","http://api.knora.org/ontology/knora-api/v2#TextFileValue","http://api.knora.org/ontology/knora-api/v2#ListValue","StoreService","resetTriplestoreContent","rdfDataObjects","BasicOntologyService","getBasicOntology","ResourceTypesService","getResourceTypesByVoc","getResourceType","Equals","NotEquals","GreaterThanEquals","GreaterThan","LessThan","LessThanEquals","Exists","Like","Match","ComparisonOperatorAndValue","ValueLiteral","schema","literalType","IRI","PropertyWithValue"],"mappings":"6qBAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAG5B,SAAAO,EAA0BR,EAAGC,GAEzB,SAAAQ,IAAgBC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAGnF,SAAAK,EAqB2BC,EAAYC,EAAQC,EAAKC,GAChD,IAA2HlB,EAAvHmB,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOhB,OAAOqB,yBAAyBP,EAAQC,GAAOC,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASV,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIQ,EAAIX,EAAWM,OAAS,EAAQ,GAALK,EAAQA,KAAS1B,EAAIe,EAAWW,MAAIJ,GAAKH,EAAI,EAAInB,EAAEsB,GAAS,EAAJH,EAAQnB,EAAEgB,EAAQC,EAAKK,GAAKtB,EAAEgB,EAAQC,KAASK,GAChJ,OAAW,EAAJH,GAASG,GAAKpB,OAAOyB,eAAeX,EAAQC,EAAKK,GAAIA,EAGhE,SAAAM,EAI2BC,EAAaC,GACpC,GAAuB,iBAAZN,SAAoD,mBAArBA,QAAQO,SAAyB,OAAOP,QAAQO,SAASF,EAAaC,GAGpH,SAAAE,EAyCyBC,GACrB,IAAIC,EAAsB,mBAAXC,QAAyBF,EAAEE,OAAOC,UAAWV,EAAI,EAChE,OAAIQ,EAAUA,EAAEG,KAAKJ,GACd,CACHK,KAAM,WAEF,OADIL,GAAKP,GAAKO,EAAEZ,SAAQY,OAAI,GACrB,CAAEM,MAAON,GAAKA,EAAEP,KAAMc,MAAOP,SC+FpCQ,eCvMZ,SAAAC,IAQWhC,KAAAiC,KAAeC,UAOflC,KAAAmC,IAAcD,UAOdlC,KAAAoC,MAAgBF,UAOhBlC,KAAAqC,IAAcH,UACzB,OAtBII,EAAAA,CADCC,EAAAA,aAAa,OAAQC,4DAQtBF,EAAAA,CADCC,EAAAA,aAAa,MAAOC,2DAQrBF,EAAAA,CADCC,EAAAA,aAAa,QAASC,6DAQvBF,EAAAA,CADCC,EAAAA,aAAa,MAAOC,2DA3BZR,EAAa5B,EAAA,CADzBqC,EAAAA,WAAW,kBACCT,MCHbU,EAAA,WAAA,SAAAA,IAOI1C,KAAA2C,OAAS,EAKT3C,KAAA4C,WAAa,GAKb5C,KAAA6C,IAAM,GAoBV,OANIH,EAAAxC,UAAA4C,QAAA,SAAQC,GAEJ,OAAOL,EAAiBM,YAAYC,YAAYjD,KAAKkD,KAAMH,IA/BhDL,EAAAM,YAA2B,IAAIG,EAAAA,YAAYC,EAAAA,cAAcC,OAAQC,EAAAA,kBAAkBC,YAmCtGb,EArCA,GCFAc,EAAA,SAAAA,KAKIxD,KAAA2C,OAAS,EAKT3C,KAAA4C,WAAa,GAKb5C,KAAA6C,IAAM,GAKN7C,KAAAyD,UAAY,iBHxBhB,SAAAC,KA4MA,OA1MkBA,EAAAC,SAAmB,0CACnBD,EAAAE,cAAgB,IAKhBF,EAAAG,kBAFAH,EAAAI,WADAJ,EAAAK,kBAA4B,iCAC2B,eAED,iBACtDL,EAAAM,oBAA8BN,EAAeI,UAAY,eACzDJ,EAAAO,qBAA+BP,EAAeI,UAAY,gBAC1DJ,EAAAQ,sBAAgCR,EAAeI,UAAY,iBAE3DJ,EAAAS,8BAAwCT,EAAeC,SAAW,MAAQD,EAAeE,cACzFF,EAAAU,qBAA+BV,EAAeC,SAAW,aAAeD,EAAeE,cAIvFF,EAAAW,gBAFAX,EAAAY,kBAAoB,+CAEgC,YAEpDZ,EAAAa,iBAAmB,4CAEnBb,EAAAc,SAAmBd,EAAeS,8BAAgC,WAClET,EAAAe,UAAoBf,EAAeS,8BAAgC,YACnET,EAAAgB,SAAmBhB,EAAeS,8BAAgC,WAClET,EAAAiB,aAAuBjB,EAAeS,8BAAgC,eACtET,EAAAkB,SAAmBlB,EAAeS,8BAAgC,WAClET,EAAAmB,aAAuBnB,EAAeS,8BAAgC,eACtET,EAAAoB,UAAoBpB,EAAeS,8BAAgC,YACnET,EAAAqB,WAAqBrB,EAAeS,8BAAgC,aACpET,EAAAsB,UAAoBtB,EAAeS,8BAAgC,YACnET,EAAAuB,UAAoBvB,EAAeS,8BAAgC,YACnET,EAAAwB,cAAwBxB,EAAeS,8BAAgC,gBACvET,EAAAyB,UAAoBzB,EAAeS,8BAAgC,YACnET,EAAA0B,aAAuB1B,EAAeS,8BAAgC,eACtET,EAAA2B,UAAoB3B,EAAeS,8BAAgC,YACnET,EAAA4B,eAAyB5B,EAAeS,8BAAgC,iBACxET,EAAA6B,aAAuB7B,EAAeS,8BAAgC,eACtET,EAAA8B,kBAA4B9B,EAAeS,8BAAgC,oBAC3ET,EAAA+B,oBAA8B/B,EAAeS,8BAAgC,sBAC7ET,EAAAgC,qBAA+BhC,EAAeS,8BAAgC,uBAC9ET,EAAAiC,cAAwBjC,EAAeS,8BAAgC,gBACvET,EAAAkC,gBAA0BlC,EAAeS,8BAAgC,kBACzET,EAAAmC,aAAuBnC,EAAeS,8BAAgC,eACtET,EAAAoC,kBAA4BpC,EAAeS,8BAAgC,oBAC3ET,EAAAqC,qBAA+BrC,EAAeS,8BAAgC,uBAC9ET,EAAAsC,SAAmBtC,EAAeS,8BAAgC,WAElET,EAAAuC,WAAavC,EAAeS,8BAAgC,aAC5DT,EAAAwC,aAAuBxC,EAAeS,8BAAgC,eACtET,EAAAyC,WAAqBzC,EAAeS,8BAAgC,aACpET,EAAA0C,eAAyB1C,EAAeS,8BAAgC,iBACxET,EAAA2C,oBAA8B3C,EAAeS,8BAAgC,sBAC7ET,EAAA4C,YAAc5C,EAAeS,8BAAgC,cAE7DT,EAAA6C,WAAa,yBACb7C,EAAA8C,oBAAsB,kCACtB9C,EAAA+C,sBAAwB,oCAGxB/C,EAAAgD,YAAsB,sDACtBhD,EAAAiD,UAAY,6CACZjD,EAAAkD,YAAc,+CACdlD,EAAAmD,eAAiB,kDACjBnD,EAAAoD,cAAwB,qDAIxBpD,EAAAqD,UAFArD,EAAAsD,IAAc,iCAE0B,SACxCtD,EAAAuD,kBAA4BvD,EAAesD,IAAM,kBACjDtD,EAAAwD,oBAA8BxD,EAAesD,IAAM,oBACnDtD,EAAAyD,sBAAgCzD,EAAesD,IAAM,sBACrDtD,EAAA0D,cAAwB1D,EAAesD,IAAM,cAC7CtD,EAAA2D,kBAA4B3D,EAAesD,IAAM,kBACjDtD,EAAA4D,kBAA4B5D,EAAesD,IAAM,kBACjDtD,EAAA6D,eAAyB7D,EAAesD,IAAM,eAC9CtD,EAAA8D,eAAiB9D,EAAesD,IAAM,eAEtCtD,EAAA+D,aAAe/D,EAAeS,8BAAgC,eAC9DT,EAAAgE,qBAAuBhE,EAAeS,8BAAgC,uBACtET,EAAAiE,eAAiBjE,EAAeS,8BAAgC,iBAChET,EAAAkE,kBAAoBlE,EAAeS,8BAAgC,oBACnET,EAAAmE,eAAiBnE,EAAeS,8BAAgC,iBAEhET,EAAAoE,OAASpE,EAAeS,8BAAgC,SAExDT,EAAAqE,oBAA8B,sBAC9BrE,EAAAsE,sBAAgC,wBAChCtE,EAAAuE,mBAA6B,qBAC7BvE,EAAAwE,cAAwB,gBACxBxE,EAAAyE,cAAwB,gBACxBzE,EAAA0E,iBAA2B,mBAC3B1E,EAAA2E,iBAA2B,mBAC3B3E,EAAA4E,wBAAkC,0BAClC5E,EAAA6E,kBAA4B,oBAC5B7E,EAAA8E,cAAwB,gBACxB9E,EAAA+E,eAAyB,iBACzB/E,EAAAgF,aAAuB,eACvBhF,EAAAiF,iBAA2B,mBAC3BjF,EAAAkF,kBAA4B,oBAC5BlF,EAAAmF,cAAwB,gBAExBnF,EAAAoF,cAAwBpF,EAAeS,8BAAgC,gBAEvET,EAAAqF,gBAA0BrF,EAAeS,8BAAgC,kBACzET,EAAAsF,eAAyBtF,EAAeS,8BAAgC,iBACxET,EAAAuF,oBAA8BvF,EAAeS,8BAAgC,sBAE7ET,EAAAwF,uBAAiCxF,EAAeS,8BAAgC,yBAEhFT,EAAAyF,sBAAgCzF,EAAeS,8BAAgC,wBAC/ET,EAAA0F,oBAA8B1F,EAAeS,8BAAgC,sBAC7ET,EAAA2F,qBAA+B3F,EAAeS,8BAAgC,uBAC9ET,EAAA4F,mBAA6B5F,EAAeS,8BAAgC,qBAC5ET,EAAA6F,uBAAyB7F,EAAeS,8BAAgC,yBACxET,EAAA8F,qBAAuB9F,EAAeS,8BAAgC,uBACtET,EAAA+F,qBAAuB/F,EAAeS,8BAAgC,uBACtET,EAAAgG,mBAAqBhG,EAAeS,8BAAgC,qBACpET,EAAAiG,qBAAuBjG,EAAeS,8BAAgC,uBAEtET,EAAAkG,mBAAqBlG,EAAeS,8BAAgC,qBACpET,EAAAmG,mBAAqBnG,EAAeS,8BAAgC,qBACpET,EAAAoG,sBAAwBpG,EAAeS,8BAAgC,wBACvET,EAAAqG,sBAAwBrG,EAAeS,8BAAgC,wBAEvET,EAAAsG,sBAAwBtG,EAAeS,8BAAgC,gBAEvET,EAAAuG,sBAAwBvG,EAAeS,8BAAgC,wBAEvET,EAAAwG,eAAiBxG,EAAeS,8BAAgC,iBAChET,EAAAyG,mBAAqBzG,EAAeS,8BAAgC,qBACpET,EAAA0G,qBAAuB1G,EAAeS,8BAAgC,uBAEtET,EAAA2G,uBAAyB3G,EAAeS,8BAAgC,yBAExET,EAAA4G,2BAA6B5G,EAAeS,8BAAgC,6BAC5ET,EAAA6G,2BAA6B7G,EAAeS,8BAAgC,6BAC5ET,EAAA8G,kCAAoC9G,EAAeS,8BAAgC,oCAEnFT,EAAA+G,kBAAoB/G,EAAeS,8BAAgC,oBACnET,EAAAgH,wBAA0BhH,EAAeS,8BAAgC,0BACzET,EAAAiH,cAAgBjH,EAAeS,8BAAgC,gBAC/DT,EAAAkH,sBAAwBlH,EAAeS,8BAAgC,wBAEvET,EAAAmH,sBAAwBnH,EAAeS,8BAAgC,wBACvET,EAAAoH,oBAAsBpH,EAAeS,8BAAgC,sBAErET,EAAAqH,oBAAsBrH,EAAeS,8BAAgC,sBACrET,EAAAsH,yBAA2BtH,EAAeS,8BAAgC,2BAI1ET,EAAAuH,WAFAvH,EAAAwH,IAAM,qCAE2B,SACjCxH,EAAAyH,WAAazH,EAAewH,IAAM,UAClCxH,EAAA0H,WAAa1H,EAAewH,IAAM,UAClCxH,EAAA2H,WAAa3H,EAAewH,IAAM,UAClCxH,EAAA4H,OAAS5H,EAAewH,IAAM,SAE9BxH,EAAA6H,eAAiB7H,EAAeU,qBAAuB,WACvDV,EAAA8H,WAAa9H,EAAeU,qBAAuB,OACnDV,EAAA+H,eAAiB/H,EAAeU,qBAAuB,WACvDV,EAAAgI,WAAahI,EAAeU,qBAAuB,OACnDV,EAAAiI,YAAcjI,EAAeU,qBAAuB,QACpDV,EAAAkI,cAAgBlI,EAAeU,qBAAuB,UACtDV,EAAAmI,WAAanI,EAAeU,qBAAuB,OAEnDV,EAAAoI,cAAgBpI,EAAeU,qBAAuB,QAEtDV,EAAAqI,yBAA2B,IAC3BrI,EAAAsI,sBAAwB,cAExBtI,EAAAuI,4BAA8B,KAC9BvI,EAAAwI,yBAA2B,kBAE3BxI,EAAAyI,8BAAgC,IAChCzI,EAAA0I,2BAA6B,kBAE7B1I,EAAA2I,oCAAsC,KACtC3I,EAAA4I,iCAAmC,4BAEnC5I,EAAA6I,2BAA6B,IAC7B7I,EAAA8I,wBAA0B,eAE1B9I,EAAA+I,iCAAmC,KACnC/I,EAAAgJ,6BAA+B,yBAE/BhJ,EAAAiJ,yBAA2B,IAC3BjJ,EAAAkJ,sBAAwB,SAExBlJ,EAAAmJ,uBAAyB,QACzBnJ,EAAAoJ,oBAAsB,UAEtBpJ,EAAAqJ,wBAA0B,WAC1BrJ,EAAAsJ,qBAAuB,UAEvBtJ,EAAAuJ,WAAa,cACbvJ,EAAAwJ,UAAY,aAEZxJ,EAAAyJ,UAAY,WACZzJ,EAAA0J,YAAc,wBAEd1J,EAAA2J,WAAa,SACb3J,EAAA4J,aAAe,yBAEjC5J,MAGY3B,EAAAA,EAAAA,cAAAA,EAAAA,YAAW,KACnBA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,OAAA,GAAA,SI3MJ,ICHYwL,EDGZC,EAAA,WAAA,SAAAA,KA4FA,OA9BkBA,EAAAC,4BAAd,SAA0CC,GAGtC,IAAMC,EAAqBD,EAAUE,MAAMlK,EAAeE,eAI1D,OAFwB,IAApB+J,EAAShN,QAAckN,QAAQC,MAAM,UAAUJ,EAAS,+BAErDC,EAAS,IAUNH,EAAAO,wCAAd,SAAsDC,GAGlD,IAAML,EAAqBK,EAAiBJ,MAAM,KAAOlK,EAAeE,eAKxE,OAHwB,IAApB+J,EAAShN,QAAckN,QAAQC,MAAM,UAAUE,EAAgB,+BAG5DL,EAAS,GAAK,YAAcjK,EAAeE,cAAgB+J,EAAS,IAjFxDH,EAAAS,WAAa,yHAObT,EAAAU,SAAW,2HAOXV,EAAAW,cAAgB,iCAOhBX,EAAAY,SAAW,iBAOXZ,EAAAa,eAAiB,iBAW1Bb,EAAAc,oBAAsB,SAACC,EAAMC,EAAeC,GAQtD,OAAOD,IAAUC,EAAKC,QAAQH,IAuCtCf,EA5FA,gBEJA,SAAAmB,IAIW3O,KAAA6B,MAAgBK,UAGhBlC,KAAA4O,SAAmB,GAC9B,OAJItM,EAAAA,CADCC,EAAAA,aAAa,QAASC,QAAQ,wDAI/BF,EAAAA,CADCC,EAAAA,aAAa,WAAYC,QAAQ,2DALzBmM,EAAavO,EAAA,CADzBqC,EAAAA,WAAW,kBACCkM,ODADpB,EAAAA,EAAAA,YAAAA,EAAAA,UAAS,KACjBA,EAAA,cAAA,GAAA,gBACAA,EAAAA,EAAA,eAAA,GAAA,iBACAA,EAAAA,EAAA,aAAA,GAAA,eAMJ,IE6BYsB,EF7BZC,EAAA,WAMI,SAAAA,EACaC,EACAC,EACAC,EACAC,EACAC,GAJAnP,KAAA+O,SAAAA,EACA/O,KAAAgP,IAAAA,EACAhP,KAAAiP,KAAAA,EACAjP,KAAAkP,MAAAA,EACAlP,KAAAmP,IAAAA,EAELnP,KAAKkP,QAAUhN,UAEflC,KAAKoP,UAAY7B,EAAAA,UAAU8B,cACpBrP,KAAKmP,MAAQjN,UAEpBlC,KAAKoP,UAAY7B,EAAAA,UAAU+B,eAG3BtP,KAAKoP,UAAY7B,EAAAA,UAAUgC,aAkDvC,OAxCIT,EAAA5O,UAAAsP,+BAAA,WAEI,IAAIC,EAAa,IAAMzP,KAAKgP,IAAM,KAElC,OAAQhP,KAAKoP,WAET,KAAK7B,EAAAA,UAAU8B,cACXI,GAAczP,KAAKiP,KAAKS,WACxB,MAGJ,KAAKnC,EAAAA,UAAU+B,eACXG,GAAczP,KAAKiP,KAAOH,EAAWa,UAAY3P,KAAKkP,MACtD,MAGJ,KAAK3B,EAAAA,UAAUgC,aACXE,GAAczP,KAAKiP,KAAOH,EAAWa,UAAY3P,KAAKkP,MAAQJ,EAAWa,UAAY3P,KAAKmP,IAUlG,OAAOM,GAQXX,EAAA5O,UAAA0P,gBAAA,WAEI,OAAO5P,KAAK+O,SAAW,IAAM/O,KAAKwP,kCAlEvBV,EAAAa,UAAY,IAqE/Bb,EAvEA,GA4EAe,EAAA,WAEI,SAAAA,EACaC,EACAC,GADA/P,KAAA8P,MAAAA,EACA9P,KAAA+P,IAAAA,EAYjB,OAHIF,EAAA3P,UAAA0P,gBAAA,WACI,OAAO5P,KAAK8P,MAAMF,kBAAoB,IAAM5P,KAAK+P,IAAIP,kCAE7DK,EAhBA,gBGtFA,SAAAG,IAIWhQ,KAAAiQ,MAAgB/N,UAC3B,OADII,EAAAA,CADCC,EAAAA,aAAa,QAASC,6DAFdwN,EAAsB5P,EAAA,CADlCqC,EAAAA,WAAW,2BACCuN,mBCCb,SAAAE,IAIWlQ,KAAAmQ,GAAajO,UAGblC,KAAAoQ,UAAoBlO,UAGpBlC,KAAAqQ,UAAoBnO,UAGpBlC,KAAAsQ,SAAmBpO,UAGnBlC,KAAAuQ,YAA+B,CAAC,IAAI5B,GAGpC3O,KAAAwQ,SAAqBtO,UAGrBlC,KAAAyQ,KAAevO,UAGflC,KAAA0Q,YAAsBxO,UAGtBlC,KAAA2Q,WAAuBzO,UAGvBlC,KAAA2C,OAAkBT,UAGlBlC,KAAA4Q,SAAoB1O,UAE/B,OAhCII,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,YAAaC,iEAI3BF,EAAAA,CADCC,EAAAA,aAAa,YAAaC,QAAQ,4DAInCF,EAAAA,CADCC,EAAAA,aAAa,WAAYC,QAAQ,2DAIlCF,EAAAA,CADCC,EAAAA,aAAa,cAAe,CAACoM,IAAgB,6DAI9CrM,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACC,SAAS,0DAIpCF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,QAAQ,uDAI9BF,EAAAA,CADCC,EAAAA,aAAa,cAAeC,QAAQ,8DAIrCF,EAAAA,CADCC,EAAAA,aAAa,aAAc,CAACC,kEAI7BF,EAAAA,CADCC,EAAAA,aAAa,SAAUsO,gEAIxBvO,EAAAA,CADCC,EAAAA,aAAa,WAAYsO,kEAhCjBX,EAAO9P,EAAA,CADnBqC,EAAAA,WAAW,YACCyN,mBCFb,SAAAY,IAIW9Q,KAAAmQ,GAAajO,UAGblC,KAAAiC,KAAeC,UAGflC,KAAAuQ,YAAsBrO,UAGtBlC,KAAA+Q,QAAmB7O,UAGnBlC,KAAA2C,OAAkBT,UAGlBlC,KAAA4Q,SAAoB1O,UAE/B,OAjBII,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,4DAItBF,EAAAA,CADCC,EAAAA,aAAa,cAAeC,mEAI7BF,EAAAA,CADCC,EAAAA,aAAa,UAAW2N,GAAS,mBAClBA,kCAGhB5N,EAAAA,CADCC,EAAAA,aAAa,SAAUsO,gEAIxBvO,EAAAA,CADCC,EAAAA,aAAa,WAAYsO,kEAjBjBC,EAAK1Q,EAAA,CADjBqC,EAAAA,WAAW,UACCqO,mBCDb,SAAAE,IAIWhR,KAAAiR,MAAe/O,UAE1B,OAFII,EAAAA,CADCC,EAAAA,aAAa,QAASuO,mBACTA,gCAHLE,EAAa5Q,EAAA,CADzBqC,EAAAA,WAAW,kBACCuO,mBCDb,SAAAE,IAIWlR,KAAAmR,OAAkBjP,UAE7B,OAFII,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAACuO,yDAFhBI,EAAc9Q,EAAA,CAD1BqC,EAAAA,WAAW,mBACCyO,mBCDb,SAAAE,IAIWpR,KAAAmQ,GAAajO,UAGblC,KAAAqR,WAAqBnP,UAGrBlC,KAAAsR,OAA0BpP,UAG1BlC,KAAAuR,SAA4BrP,UACvC,OAVII,EAAAA,CADCC,EAAAA,aAAa,KAAMC,QAAQ,qDAI5BF,EAAAA,CADCC,EAAAA,aAAa,aAAcC,QAAQ,6DAIpCF,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAACoM,IAAgB,wDAIzCrM,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACoM,IAAgB,0DAXlCyC,EAAQhR,EAAA,CADpBqC,EAAAA,WAAW,aACC2O,mBCFb,SAAApL,IAGWhG,KAAAmQ,GAAajO,UAGblC,KAAAiC,KAAeC,UAGflC,KAAAwR,MAAgBtP,UAGhBlC,KAAAyR,SAAuBvP,UAGvBlC,KAAA0R,MAAgBxP,UAGhBlC,KAAA2R,SAAmBzP,UAC9B,SAlBa8D,EAET1D,EAAAA,CADCC,EAAAA,aAAa,KAAMC,QAAQ,qDAI5BF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,QAAQ,uDAI9BF,EAAAA,CADCC,EAAAA,aAAa,QAASC,QAAQ,wDAI/BF,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACqP,IAAW,0DAItCtP,EAAAA,CADCC,EAAAA,aAAa,QAASsP,QAAQ,wDAI/BvP,EAAAA,CADCC,EAAAA,aAAa,WAAYsP,QAAQ,2DAhBzB7L,EAAQ4L,EAAAxR,EAAA,CADpBqC,EAAAA,WAAW,aACCuD,yBCCb,SAAA8L,IAIW9R,KAAA+R,SAAqB7P,UAGrBlC,KAAAyR,SAAuBvP,UAClC,OAJII,EAAAA,CADCC,EAAAA,aAAa,WAAY6O,GAAU,mBACnBA,mCAGjB9O,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACyD,IAAW,0DAL7B8L,EAAI1R,EAAA,CADhBqC,EAAAA,WAAW,SACCqP,mBCFb,SAAAE,IAIWhS,KAAA+R,SAAqB7P,UAChC,OADII,EAAAA,CADCC,EAAAA,aAAa,WAAY6O,GAAU,mBACnBA,mCAHRY,EAAgB5R,EAAA,CAD5BqC,EAAAA,WAAW,qBACCuP,mBCDb,SAAAC,IAIWjS,KAAAmQ,GAAajO,UAGblC,KAAAiC,KAAeC,UAGflC,KAAAqR,WAAqBnP,UAGrBlC,KAAAkS,WAAsBhQ,UAGtBlC,KAAAsR,OAA0BpP,UAG1BlC,KAAAuR,SAA4BrP,UACvC,OAhBII,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,QAAQ,uDAI9BF,EAAAA,CADCC,EAAAA,aAAa,aAAcC,QAAQ,6DAIpCF,EAAAA,CADCC,EAAAA,aAAa,aAAcsO,SAAS,8DAIrCvO,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAACoM,yDAIzBrM,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAACoM,2DAjBlBsD,EAAY7R,EAAA,CADxBqC,EAAAA,WAAW,iBACCwP,mBCDb,SAAAE,IAIWnS,KAAAoS,SAAyBlQ,UACpC,OADII,EAAAA,CADCC,EAAAA,aAAa,WAAY0P,GAAc,mBACvBA,mCAHRE,EAAoB/R,EAAA,CADhCqC,EAAAA,WAAW,yBACC0P,mBCDb,SAAAE,IAIWrS,KAAAsS,KAAapQ,UACxB,OADII,EAAAA,CADCC,EAAAA,aAAa,OAAQuP,GAAM,mBACfA,+BAHJO,EAAYjS,EAAA,CADxBqC,EAAAA,WAAW,iBACC4P,mBCDb,SAAAE,IAIWvS,KAAAwS,MAAwBtQ,UACnC,OADII,EAAAA,CADCC,EAAAA,aAAa,QAAS,CAAC0P,IAAe,uDAF9BM,EAAanS,EAAA,CADzBqC,EAAAA,WAAW,kBACC8P,mBCFb,SAAAE,IAIWzS,KAAA0S,YAAsBxQ,UAGtBlC,KAAA2S,aAAuBzQ,UAElC,OALII,EAAAA,CADCC,EAAAA,aAAa,cAAeC,mEAI7BF,EAAAA,CADCC,EAAAA,aAAa,eAAgBC,oEALrBiQ,EAAiBrS,EAAA,CAD7BqC,EAAAA,WAAW,sBACCgQ,mBCDb,SAAAG,IAIW5S,KAAA6S,iBAAwB3Q,UAGxBlC,KAAA8S,oCAA2C5Q,UACtD,OAJII,EAAAA,CADCC,EAAAA,aAAa,mBAAoB/C,wEAIlC8C,EAAAA,CADCC,EAAAA,aAAa,sCAAuC/C,2FAL5CoT,EAAcxS,EAAA,CAD1BqC,EAAAA,WAAW,mBACCmQ,mBCEb,SAAAG,IAIW/S,KAAAmQ,GAAajO,UAGblC,KAAAgT,MAAgB9Q,UAGhBlC,KAAAiT,SAAmB/Q,UAGnBlC,KAAAiQ,MAAgB/N,UAGhBlC,KAAAkT,UAAoBhR,UAGpBlC,KAAAmT,WAAqBjR,UAGrBlC,KAAA2C,OAAkBT,UAGlBlC,KAAAoT,KAAelR,UAGflC,KAAAmR,OAAkBjP,UAGlBlC,KAAAqT,SAAsBnR,UAGtBlC,KAAAsT,UAAoBpR,UAGpBlC,KAAAuT,YAA8BrR,UAG9BlC,KAAAwT,aAAwB,EAGnC,OAvCIlR,EAAAA,CADCC,EAAAA,aAAa,KAAMC,0DAIpBF,EAAAA,CADCC,EAAAA,aAAa,QAASC,6DAIvBF,EAAAA,CADCC,EAAAA,aAAa,WAAYC,QAAQ,2DAIlCF,EAAAA,CADCC,EAAAA,aAAa,QAASC,QAAQ,wDAI/BF,EAAAA,CADCC,EAAAA,aAAa,YAAaC,iEAI3BF,EAAAA,CADCC,EAAAA,aAAa,aAAcC,kEAI5BF,EAAAA,CADCC,EAAAA,aAAa,SAAUsO,gEAIxBvO,EAAAA,CADCC,EAAAA,aAAa,OAAQC,4DAItBF,EAAAA,CADCC,EAAAA,aAAa,SAAU,CAACuO,yDAIzBxO,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAAC2N,2DAI3B5N,EAAAA,CADCC,EAAAA,aAAa,YAAaC,QAAQ,4DAInCF,EAAAA,CADCC,EAAAA,aAAa,cAAeqQ,mBACTA,sCAGpBtQ,EAAAA,CADCC,EAAAA,aAAa,cAAesO,SAAS,+DAtC7BkC,EAAI3S,EAAA,CADhBqC,EAAAA,WAAW,SACCsQ,mBCHb,SAAAU,IAGWzT,KAAA0T,QAAkBxR,UAC7B,OADII,EAAAA,CADCC,EAAAA,aAAa,UAAW,CAACwQ,0DADjBU,EAAsBrT,EAAA,CADlCqC,EAAAA,WAAW,2BACCgR,mBCAb,SAAAE,IAIW3T,KAAA+Q,QAAmB7O,UAE9B,OAFII,EAAAA,CADCC,EAAAA,aAAa,UAAW2N,mBACTA,kCAHPyD,EAAevT,EAAA,CAD3BqC,EAAAA,WAAW,oBACCkR,mBCFb,SAAAC,IAIW5T,KAAAqT,SAAsBnR,UAEjC,OAFII,EAAAA,CADCC,EAAAA,aAAa,WAAY,CAAC2N,2DAFlB0D,EAAgBxT,EAAA,CAD5BqC,EAAAA,WAAW,qBACCmR,mBCFb,SAAAC,IAIW7T,KAAAiC,KAAeC,UAGflC,KAAA8T,IAAc5R,UAGdlC,KAAAoT,KAAelR,UAGflC,KAAA+T,SAAoB7R,UAE/B,OAXII,EAAAA,CADCC,EAAAA,aAAa,OAAQC,4DAItBF,EAAAA,CADCC,EAAAA,aAAa,MAAOC,QAAQ,sDAI7BF,EAAAA,CADCC,EAAAA,aAAa,OAAQC,QAAQ,uDAI9BF,EAAAA,CADCC,EAAAA,aAAa,WAAYsO,kEAXjBgD,EAAWzT,EAAA,CADvBqC,EAAAA,YACYoR,mBCAb,SAAAG,IAIWhU,KAAAiU,MAAgB/R,UAE3B,OAFII,EAAAA,CADCC,EAAAA,aAAa,QAAS,CAACwQ,wDAFfiB,EAAa5T,EAAA,CADzBqC,EAAAA,WAAW,kBACCuR,mBCDb,SAAAE,IAIWlU,KAAAmU,KAAajS,UACxB,OADII,EAAAA,CADCC,EAAAA,aAAa,OAAQwQ,mBACTA,+BAHJmB,EAAY9T,EAAA,CADxBqC,EAAAA,WAAW,iBACCyR,MCwCbE,EAAA,SAAAA,KAIapU,KAAAqU,KAAe3Q,EAAee,WAY3CuD,EAAA,SAAAsM,GAEI,SAAAtM,EAAqBmI,EAAqBoE,EAAkBC,GAA5D,IAAAC,EACIH,EAAA3S,KAAA3B,OAAOA,YADUyU,EAAAtE,GAAAA,EAAqBsE,EAAAF,QAAAA,EAAkBE,EAAAD,IAAAA,IAWhE,OAb2CE,EAAAA,EAAAA,GAMvC1M,EAAA9H,UAAAyU,aAAA,WACI,OAAOjR,EAAesE,uBAG1BA,EAAA9H,UAAA0U,WAAA,WACI,OAAO5U,KAAKwU,KAEpBxM,EAbA,CAA2CoM,GAkB3CS,EAAA,SAAAA,OAOA9M,EAAA,SAAAuM,GAEI,SAAAvM,EAAqBoI,EAAqBoE,EAAkBO,EAAuBC,GAAnF,IAAAN,EACIH,EAAA3S,KAAA3B,OAAOA,YADUyU,EAAAtE,GAAAA,EAAqBsE,EAAAF,QAAAA,EAAkBE,EAAAK,KAAAA,EAAuBL,EAAAM,kBAAAA,IAiCvF,OAnCyCL,EAAAA,EAAAA,GAerC3M,EAAA7H,UAAA8U,wBAAA,SAAwBC,EAAqBC,GACzC,GAAIlV,KAAK+U,oBAAsB7S,WAAalC,KAAK+U,kBAAkBE,KAAiB/S,UAMhF,MAAO,yEAJP,IAAMiT,EAAgBD,EAAaE,yBAAyBpV,KAAK+U,kBAAkBE,GAAaZ,MAEhG,OAAOrU,KAAK+U,kBAAkBE,GAAazD,MAAQ,KAAK2D,EAAa,KAO7EpN,EAAA7H,UAAAyU,aAAA,WACI,OAAOjR,EAAeqE,qBAG1BA,EAAA7H,UAAA0U,WAAA,WACI,OAAO5U,KAAK8U,MAGpB/M,EAnCA,CAAyCqM,GAwCzCnM,EAAA,SAAAqM,GAEI,SAAArM,EAAqBkI,EAAqBoE,EAAkBc,EAAsBC,GAAlF,IAAAb,EACIH,EAAA3S,KAAA3B,OAAOA,YADUyU,EAAAtE,GAAAA,EAAqBsE,EAAAF,QAAAA,EAAkBE,EAAAY,IAAAA,EAAsBZ,EAAAa,WAAAA,IAYtF,OAdwCZ,EAAAA,EAAAA,GAMpCzM,EAAA/H,UAAAyU,aAAA,WACI,OAAOjR,EAAeuE,oBAG1BA,EAAA/H,UAAA0U,WAAA,WACI,OAAO5U,KAAKqV,KAGpBpN,EAdA,CAAwCmM,GAoBxClM,EAAA,WAEI,SAAAA,EACaiI,EACAoE,EACAxF,EACAwG,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAVA9V,KAAAmQ,GAAAA,EACAnQ,KAAAuU,QAAAA,EACAvU,KAAA+O,SAAAA,EACA/O,KAAAuV,UAAAA,EACAvV,KAAAwV,QAAAA,EACAxV,KAAAyV,SAAAA,EACAzV,KAAA0V,OAAAA,EACA1V,KAAA2V,WAAAA,EACA3V,KAAA4V,SAAAA,EACA5V,KAAA6V,SAAAA,EACA7V,KAAA8V,OAAAA,EAGJ9V,KAAAqU,KAAO3Q,EAAeoB,UAEvB9E,KAAA2P,UAAY,IAoBxB,OAlBIzH,EAAAhI,UAAA6V,cAAA,WACI,OAAI/V,KAAKuV,YAAcvV,KAAKwV,SAAWxV,KAAK2V,aAAe3V,KAAK4V,UAAY5V,KAAK6V,WAAa7V,KAAK8V,QAAU9V,KAAKyV,WAAazV,KAAK0V,OAEzH,IAAI5G,EAAW9O,KAAK+O,SAAU/O,KAAKyV,SAAUzV,KAAKuV,UAAWvV,KAAK2V,WAAY3V,KAAK6V,UAGnF,IAAIhG,EAAgB,IAAIf,EAAW9O,KAAK+O,SAAU/O,KAAKyV,SAAUzV,KAAKuV,UAAWvV,KAAK2V,WAAY3V,KAAK6V,UAAW,IAAI/G,EAAW9O,KAAK+O,SAAU/O,KAAK0V,OAAQ1V,KAAKwV,QAASxV,KAAK4V,SAAU5V,KAAK8V,UAK9M5N,EAAAhI,UAAAyU,aAAA,WACI,OAAOjR,EAAewE,eAG1BA,EAAAhI,UAAA0U,WAAA,WACI,OAAO5U,KAAK+V,gBAAgBnG,mBAEpC1H,EAtCA,GA2CAC,EAAA,WAEI,SAAAA,EAAqBgI,EAAqBoE,EAAkByB,EAAsCC,GAA7EjW,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAAkBvU,KAAAgW,oBAAAA,EAAsChW,KAAAiW,iBAAAA,EAIzFjW,KAAAqU,KAAO3Q,EAAeyB,UAwBnC,OAtBIgD,EAAAjI,UAAA8U,wBAAA,SAAwBE,GACpB,GAAIlV,KAAKiW,mBAAqB/T,UAM1B,OAAOlC,KAAKgW,oBAJZ,IAAMb,EAAgBD,EAAaE,yBAAyBpV,KAAKiW,iBAAiB5B,MAElF,OAAOrU,KAAKiW,iBAAiBzE,MAAQ,KAAK2D,EAAa,KAM/DhN,EAAAjI,UAAAyU,aAAA,WACI,OAAOjR,EAAeyE,eAG1BA,EAAAjI,UAAA0U,WAAA,WACI,OAAI5U,KAAKiW,mBAAqB/T,UACnBlC,KAAKiW,iBAAiBzE,MAEtBxR,KAAKgW,qBAGxB7N,EA9BA,GAmCAC,EAAA,WAEI,SAAAA,EAAqB+H,EAAqBoE,EAAkB2B,GAAvClW,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAAkBvU,KAAAkW,QAAAA,EAInDlW,KAAAqU,KAAO3Q,EAAegB,SAUnC,OARI0D,EAAAlI,UAAAyU,aAAA,WACI,OAAOjR,EAAe0E,kBAG1BA,EAAAlI,UAAA0U,WAAA,WACI,OAAO5U,KAAKkW,QAAQxG,YAG5BtH,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAqB8H,EAAqBoE,EAAkB4B,GAAvCnW,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAAkBvU,KAAAmW,QAAAA,EAInDnW,KAAAqU,KAAO3Q,EAAemB,aASnC,OAPIwD,EAAAnI,UAAAyU,aAAA,WACI,OAAOjR,EAAe2E,kBAG1BA,EAAAnI,UAAA0U,WAAA,WACI,OAAO5U,KAAKmW,QAAQzG,YAE5BrH,EAfA,GAoBAC,GAAA,WAEI,SAAAA,EACa6H,EACAoE,EACA6B,EACAC,EACAC,EACAC,EACAC,EACTC,GAPSzW,KAAAmQ,GAAAA,EACAnQ,KAAAuU,QAAAA,EACAvU,KAAAoW,cAAAA,EACApW,KAAAqW,uBAAAA,EACArW,KAAAsW,UAAAA,EACAtW,KAAAuW,KAAAA,EACAvW,KAAAwW,KAAAA,EAOJxW,KAAAqU,KAAO3Q,EAAe+B,oBAJ3BzF,KAAKyW,UAAYA,IAAcvU,WAAoBuU,EA6B3D,OArBInO,EAAApI,UAAAwW,YAAA,SAAYC,GAER,GAAI3W,KAAKyW,UACL,OAAOzW,KAAKsW,UAEZ,IAAIM,EAAaC,KAAKC,MAAM,IAAMH,GAIlC,OAFAC,EAA2B,EAAbA,GAAkBA,GAAc,IAAOA,EAAa,GAE3D5W,KAAKqW,uBAAyB,IAAMrW,KAAKoW,cAAgB,aAAeQ,EAAWlH,WAAa,kBAK/GpH,EAAApI,UAAAyU,aAAA,WACI,OAAOjR,EAAe4E,yBAG1BA,EAAApI,UAAA0U,WAAA,WACI,OAAO5U,KAAKsW,WAEpBhO,EAzCA,GA8CAC,GAAA,WAEI,SAAAA,EAAqB4H,EAAqBoE,EAAkBwC,EAA+BC,GAAtEhX,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAAkBvU,KAAA+W,aAAAA,EAA+B/W,KAAAgX,YAAAA,EAIlFhX,KAAAqU,KAAO3Q,EAAeiC,cAUnC,OARI4C,EAAArI,UAAAyU,aAAA,WACI,OAAOjR,EAAe6E,mBAG1BA,EAAArI,UAAA0U,WAAA,WACI,OAAO5U,KAAKgX,aAGpBzO,EAhBA,GAqBAE,GAAA,WAEI,SAAAA,EAAqB0H,EACRoE,EACA0C,GAFQjX,KAAAmQ,GAAAA,EACRnQ,KAAAuU,QAAAA,EACAvU,KAAAiX,SAAAA,EAGJjX,KAAAqU,KAAO3Q,EAAeqB,WASnC,OAPI0D,EAAAvI,UAAAyU,aAAA,WACI,OAAOjR,EAAe+E,gBAG1BA,EAAAvI,UAAA0U,WAAA,WACI,OAAO5U,KAAKiX,UAEpBxO,EAhBA,GAqBAyO,GACI,SAAAA,GAAmBC,EAAkBC,GAAlBpX,KAAAmX,EAAAA,EAAkBnX,KAAAoX,EAAAA,GAOzCC,GACI,SAAAA,GAAmB1U,EACR2U,EACAC,EACAC,EACAnD,EACAoD,GALQzX,KAAA2C,OAAAA,EACR3C,KAAAsX,UAAAA,EACAtX,KAAAuX,UAAAA,EACAvX,KAAAwX,OAAAA,EACAxX,KAAAqU,KAAAA,EACArU,KAAAyX,OAAAA,GAQfjP,GAAA,WAEI,SAAAA,EAAqB2H,EAAqBoE,EAA0BmD,GAA/C1X,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAA0BvU,KAAA0X,eAAAA,EA2B3D1X,KAAAqU,KAAO3Q,EAAesB,UAzB3B,IAOIyS,MAPEE,EAAeC,KAAKC,MAAMH,GAE1BF,EAAoB,OAC1B,IAAoB,IAAAM,EAAAC,EAAAJ,EAAaH,QAAMQ,EAAAF,EAAAlW,QAAAoW,EAAAlW,KAAAkW,EAAAF,EAAAlW,OAAA,CAAlC,IAAMqW,EAAKD,EAAAnW,MACZ2V,EAAOU,KAAK,IAAIhB,GAAQe,EAAMd,EAAGc,EAAMb,yGAIvCO,EAAaF,SACbA,EAAS,IAAIP,GAAQS,EAAaF,OAAON,EAAGQ,EAAaF,OAAOL,IAGpEpX,KAAKmY,SAAW,IAAId,GAChBM,EAAahV,OACbgV,EAAaL,UACbK,EAAaJ,UACbC,EACAG,EAAatD,KACboD,GAgBZ,OAPIjP,EAAAtI,UAAAyU,aAAA,WACI,OAAOjR,EAAe8E,eAG1BA,EAAAtI,UAAA0U,WAAA,WACI,OAAO5U,KAAK0X,gBAEpBlP,EAtCA,GA2CAE,GAAA,WAEI,SAAAA,EAAqByH,EAAqBoE,EAA0B6D,GAA/CpY,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAA0BvU,KAAAoY,IAAAA,EAI3DpY,KAAAqU,KAAO3Q,EAAekB,SAUnC,OARI8D,EAAAxI,UAAAyU,aAAA,WACI,OAAOjR,EAAegF,cAG1BA,EAAAxI,UAAA0U,WAAA,WACI,OAAO5U,KAAKoY,KAGpB1P,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAqBwH,EAAqBoE,EAA0B8D,GAA/CrY,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAA0BvU,KAAAqY,KAAAA,EAI3DrY,KAAAqU,KAAO3Q,EAAeiB,aAUnC,OARIgE,EAAAzI,UAAAyU,aAAA,WACI,OAAOjR,EAAeiF,kBAG1BA,EAAAzI,UAAA0U,WAAA,WACI,OAAO5U,KAAKqY,KAAK3I,YAGzB/G,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAqBuH,EAAqBoE,EAA0B+D,EAAgCC,GAA/EvY,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAA0BvU,KAAAsY,cAAAA,EAAgCtY,KAAAuY,YAAAA,EAI3FvY,KAAAqU,KAAO3Q,EAAewB,cAUnC,OARI0D,EAAA1I,UAAAyU,aAAA,WACI,OAAOjR,EAAekF,mBAG1BA,EAAA1I,UAAA0U,WAAA,WACI,OAAO5U,KAAKsY,cAAc5I,WAAa,IAAM1P,KAAKuY,aAG1D3P,EAhBA,GAqBAC,GAAA,WAEI,SAAAA,EAAqBsH,EAAqBoE,EAA0BiE,EAA8BC,GAA7EzY,KAAAmQ,GAAAA,EAAqBnQ,KAAAuU,QAAAA,EAA0BvU,KAAAwY,YAAAA,EAA8BxY,KAAAyY,cAAAA,EAIzFzY,KAAAqU,KAAO3Q,EAAeuB,UAUnC,OARI4D,EAAA3I,UAAAyU,aAAA,WACI,OAAOjR,EAAemF,eAG1BA,EAAA3I,UAAA0U,WAAA,WACI,OAAO5U,KAAKyY,eAGpB5P,EAhBA,GC1dA6P,GAaI,SAAAA,GACoBvI,EACAkE,EACA7C,EACTmH,EACAC,EACAC,EACAC,EACSC,GAPA/Y,KAAAmQ,GAAAA,EACAnQ,KAAAqU,KAAAA,EACArU,KAAAwR,MAAAA,EACTxR,KAAA2Y,gBAAAA,EACA3Y,KAAA4Y,kCAAAA,EACA5Y,KAAA6Y,cAAAA,EACA7Y,KAAA8Y,mCAAAA,EACS9Y,KAAA+Y,WAAAA,GCtBxBC,GAOI,SAAAA,GAA4BC,EAAgDC,GAAhDlZ,KAAAiZ,UAAAA,EAAgDjZ,KAAAkZ,kBAAAA,GCLhFC,GAOI,SAAAA,GAAqBC,EAAuDC,GAAvDrZ,KAAAoZ,oBAAAA,EAAuDpZ,KAAAqZ,QAAAA,GCNhFC,GAAA,WAMI,SAAAA,EAAqBC,GAAAvZ,KAAAuZ,eAAAA,EAYzB,OAHID,EAAApZ,UAAAsZ,cAAA,WACI,OAAOxZ,KAAKuZ,eAAeR,WAAWrV,EAAe4C,cAE7DgT,EAlBA,MCOsCtX,EAVtCyX,GAAA,WAAA,SAAAA,KA+BA,OAVWA,EAAAC,QAAP,SAAeC,GAGX,MAAO,CACHC,SAAUH,EACVI,UAAW,CACP,CAACC,QAAS,SAAUC,SAAUJ,0BA3B7CK,EAAAA,SAAQC,KAAA,CAAC,CACNC,QAAS,CACLC,EAAAA,aACAC,EAAAA,kBAEJC,aAAc,GACdC,QAAS,CACLF,EAAAA,kBAEJP,UAAW,CACP,CAACC,QAAS,SAAUC,SAAQQ,SAqBpCd,EA/BA,iBCeI,SAAAe,EAA6BC,EACAd,GADA3Z,KAAAya,KAAAA,EACAza,KAAA2Z,OAAAA,EAH7B3Z,KAAA0a,SAAU,SAYVF,EAAAta,UAAAya,QAAA,SAAQC,EAAcC,GAAtB,IAAApG,EAAAzU,KAII,OAFAA,KAAK0a,SAAU,EAER1a,KAAKya,KAAKK,IAAI9a,KAAK2Z,OAAOxX,IAAMyY,EAAM,CAAEG,QAAS,WAAYF,OAAQA,IAAUG,KAClFC,EAAAA,IAAI,SAACC,GACDzG,EAAKiG,SAAU,EAEf,IAAMS,EAAS,IAAIzY,EAMnB,OALAyY,EAAOxY,OAASuY,EAASvY,OACzBwY,EAAOvY,WAAasY,EAAStY,WAC7BuY,EAAOtY,IAAM+X,EACbO,EAAOjY,KAAOgY,EAAShY,KAEhBiY,IAEXC,EAAAA,WAAW,SAACtN,GAGR,OAFA2G,EAAKiG,SAAU,EAERjG,EAAK4G,mBAAmBvN,OAa3C0M,EAAAta,UAAAob,SAAA,SAASV,EAAc1X,GAAvB,IAAAuR,EAAAzU,KAMI,OAJAA,KAAK0a,SAAU,EAIR1a,KAAKya,KAAKc,KAAKvb,KAAK2Z,OAAOxX,IAAMyY,EAAM1X,EAAM,CAAE6X,QAAS,aAAcC,KACzEC,EAAAA,IAAI,SAACC,GACDzG,EAAKiG,SAAU,EAEf,IAAMS,EAAS,IAAIzY,EAKnB,OAJAyY,EAAOxY,OAASuY,EAASvY,OACzBwY,EAAOvY,WAAasY,EAAStY,WAC7BuY,EAAOtY,IAAM+X,EACbO,EAAOjY,KAAOgY,EAAShY,KAChBiY,IAEXC,EAAAA,WAAW,SAACtN,GAKR,OAJA2G,EAAKiG,SAAU,EAIRjG,EAAK4G,mBAAmBvN,OAa3C0M,EAAAta,UAAAsb,QAAA,SAAQZ,EAAc1X,GAAtB,IAAAuR,EAAAzU,KAMI,OAJAA,KAAK0a,SAAU,EAIR1a,KAAKya,KAAKgB,IAAIzb,KAAK2Z,OAAOxX,IAAMyY,EAAM1X,EAAM,CAAE6X,QAAS,aAAcC,KACxEC,EAAAA,IAAI,SAACC,GACDzG,EAAKiG,SAAU,EAIf,IAAMS,EAAS,IAAIzY,EAKnB,OAJAyY,EAAOxY,OAASuY,EAASvY,OACzBwY,EAAOvY,WAAasY,EAAStY,WAC7BuY,EAAOtY,IAAM+X,EACbO,EAAOjY,KAAOgY,EAAShY,KAChBiY,IAGXC,EAAAA,WAAW,SAACtN,GAKR,OAJA2G,EAAKiG,SAAU,EAIRjG,EAAK4G,mBAAmBvN,OAW3C0M,EAAAta,UAAAwb,WAAA,SAAWd,GAAX,IAAAnG,EAAAzU,KAMI,OAJAA,KAAK0a,SAAU,EAIR1a,KAAKya,KAAKkB,UAAO3b,KAAK2Z,OAAOxX,IAAMyY,EAAM,CAAEG,QAAS,aAAcC,KACrEC,EAAAA,IAAI,SAACC,GACDzG,EAAKiG,SAAU,EAIf,IAAMS,EAAS,IAAIzY,EAKnB,OAJAyY,EAAOxY,OAASuY,EAASvY,OACzBwY,EAAOvY,WAAasY,EAAStY,WAC7BuY,EAAOtY,IAAM+X,EACbO,EAAOjY,KAAOgY,EAAShY,KAChBiY,IAGXC,EAAAA,WAAW,SAACtN,GAKR,OAJA2G,EAAKiG,SAAU,EAIRjG,EAAK4G,mBAAmBvN,OAYjC0M,EAAAta,UAAAmb,mBAAV,SAA6BvN,GAEzB,IAAM8N,EAAe,IAAIpY,EAKzB,OAJAoY,EAAajZ,OAASmL,EAAMnL,OAC5BiZ,EAAahZ,WAAakL,EAAMlL,WAChCgZ,EAAanY,UAAYqK,EAAM+N,QAC/BD,EAAa/Y,IAAMiL,EAAMjL,IAClBiZ,EAAAA,WAAWF,IASZpB,EAAAta,UAAA6b,gBAAV,SAA0BjO,GAEtB,GAAIA,aAAiBtK,EAAiB,OAAOsY,EAAAA,WAAWhO,GAExD,IAAM8N,EAAe,IAAIpY,EAKzB,OAJAoY,EAAajZ,QAAU,EACvBiZ,EAAahZ,WAAa,eAC1BgZ,EAAanY,UAAYqK,EACzB8N,EAAa/Y,IAAM,GACZiZ,EAAAA,WAAWF,wBA3LzBI,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,oDARPC,EAAAA,kBAImCla,EAAa3B,WAAA,CAAA,CAAAgU,KAgBhD8H,EAAAA,OAAMlC,KAAA,CAAC,iLCfhB,SAAAmC,IAAA,IAAA3H,EAAA,OAAAH,GAAAA,EAAA+H,MAAArc,KAAAU,YAAAV,YAKYyU,EAAAmG,KAAe,yBAFQlG,EAAAA,EAAAA,GAQ/B0H,EAAAlc,UAAAoc,aAAA,WACI,OAAOtc,KAAK2a,QAAQ3a,KAAK4a,MAAMI,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoO,GAAgBC,SACjEiK,EAAAA,WAAWpb,KAAK+b,mBASxBK,EAAAlc,UAAAqc,cAAA,SAAcC,GAGV,OAFAxc,KAAK4a,MAAQ,IAAM6B,mBAAmBD,GAE/Bxc,KAAK2a,QAAQ3a,KAAK4a,MAAMI,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQkO,GAAeC,QAChEmK,EAAAA,WAAWpb,KAAK+b,uCA5B3BC,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,4JAEmBzB,mBCWnC,SAAAkC,IAAA,IAAAjI,EAAA,OAAAH,GAAAA,EAAA+H,MAAArc,KAAAU,YAAAV,YAKYyU,EAAAmG,KAAe,wBAFOlG,EAAAA,EAAAA,GAc9BgI,EAAAxc,UAAAyc,SAAA,SAAStL,GAIL,OAHIA,IACArR,KAAK4a,MAAQ,eAAiB6B,mBAAmBpL,IAE9CrR,KAAK2a,QAAQ3a,KAAK4a,MAAMI,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQyP,GAAeC,QAChE4I,EAAAA,WAAWpb,KAAK+b,mBASxBW,EAAAxc,UAAA0c,QAAA,SAAQC,GACJ,OAAO7c,KAAK2a,QAAQ3a,KAAK4a,KAAO,IAAM6B,mBAAmBI,IAAU7B,KAC/DC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQuP,GAAcC,OAC/D8I,EAAAA,WAAWpb,KAAK+b,mBASxBW,EAAAxc,UAAA4c,YAAA,SAAYD,GAER,OADA7c,KAAK4a,MAAQ,UAAY6B,mBAAmBI,GACrC7c,KAAK2a,QAAQ3a,KAAK4a,MAAMI,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQkP,GAAkBD,WACnEqJ,EAAAA,WAAWpb,KAAK+b,mBASxBW,EAAAxc,UAAA6c,gBAAA,SAAgBC,GAEZ,OADAhd,KAAK4a,MAAQ,UAAY6B,mBAAmBO,GACrChd,KAAK2a,QAAQ3a,KAAK4a,MAAMI,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQqP,GAAsBC,WACvEgJ,EAAAA,WAAWpb,KAAK+b,mBAcxBW,EAAAxc,UAAA+c,WAAA,SAAWC,GACP,OAAOld,KAAKsb,SAAStb,KAAK4a,KAAMsC,GAASlC,KACrCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQuP,GAAcC,OAC/D8I,EAAAA,WAAWpb,KAAK+b,mBAcxBW,EAAAxc,UAAAid,eAAA,SAAeD,GAEX,OADAld,KAAK4a,MAAQ,UAAY6B,mBAAmBS,EAAQL,SAC7C7c,KAAKwb,QAAQxb,KAAK4a,KAAMsC,GAASlC,KACpCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQkP,GAAkBD,WACnEqJ,EAAAA,WAAWpb,KAAK+b,uCAhG3BC,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,4JAEkBzB,mBCdlC,SAAA4C,0DAGqC1I,EAAAA,EAAAA,GAWjC0I,EAAAld,UAAAmd,eAAA,WACI,OAAOrd,KAAK2a,QAAQ,mBAAmBK,KACnCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQ8Q,GAAkBP,WACnE+H,EAAAA,WAAWpb,KAAK+b,mBAUxBqB,EAAAld,UAAAod,gBAAA,SAAgBd,GACZ,IAAM3Z,EAAc,mBAAqB4Z,mBAAmBD,GAC5D,OAAOxc,KAAKud,WAAW1a,IAS3Bua,EAAAld,UAAAsd,sBAAA,SAAsBpN,GAClB,IAAMvN,EAAM,mBAAqBuN,EAAY,wBAC7C,OAAOpQ,KAAKud,WAAW1a,IAS3Bua,EAAAld,UAAAud,sBAAA,SAAsBpN,GAClB,IAAMxN,EAAM,mBAAqBwN,EAAY,wBAC7C,OAAOrQ,KAAKud,WAAW1a,IASjBua,EAAAld,UAAAqd,WAAV,SAAqB1a,GACjB,OAAO7C,KAAK2a,QAAQ9X,GAAKmY,KACrBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQ6Q,GAAiB5C,UAClEqK,EAAAA,WAAWpb,KAAK+b,mBAWxBqB,EAAAld,UAAAwd,uBAAA,SAAuBlB,GACnB,IAAM3Z,EAAM,2BAA6B4Z,mBAAmBD,GAC5D,OAAOxc,KAAK2d,kBAAkB9a,IAUlCua,EAAAld,UAAA0d,6BAAA,SAA6BxN,GACzB,IAAMvN,EAAM,2BAA6BuN,EAAY,wBACrD,OAAOpQ,KAAK2d,kBAAkB9a,IAUlCua,EAAAld,UAAA2d,6BAAA,SAA6BxN,GACzB,IAAMxN,EAAM,2BAA6BwN,EAAY,wBACrD,OAAOrQ,KAAK2d,kBAAkB9a,IASxBua,EAAAld,UAAAyd,kBAAV,SAA4B9a,GACxB,OAAO7C,KAAK2a,QAAQ9X,GAAKmY,KACrBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQ2Q,GAAwBC,UACzE0H,EAAAA,WAAWpb,KAAK+b,mBAexBqB,EAAAld,UAAA4d,cAAA,SAAcC,GAEV,OAAO/d,KAAKsb,SADQ,kBACMyC,GAAM/C,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQ6Q,GAAiB5C,UAClEqK,EAAAA,WAAWpb,KAAK+b,mBAexBqB,EAAAld,UAAA8d,cAAA,SAAcxB,EAAauB,GACvB,IAAMlb,EAAc,mBAAqB4Z,mBAAmBD,GAE5D,OAAOxc,KAAKwb,QAAQ3Y,EAAKkb,GAAM/C,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQ6Q,GAAiB5C,UAClEqK,EAAAA,WAAWpb,KAAK+b,mBAWxBqB,EAAAld,UAAA+d,gBAAA,SAAgBzB,GACZ,IAIM3Z,EAAc,mBAAqB4Z,mBAAmBD,GAE5D,OAAOxc,KAAKwb,QAAQ3Y,EANF,CACdF,QAAQ,IAKmBqY,KAC3BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQ6Q,GAAiB5C,UAClEqK,EAAAA,WAAWpb,KAAK+b,mBAexBqB,EAAAld,UAAAge,cAAA,SAAc1B,GACV,IAAM3Z,EAAc,mBAAqB4Z,mBAAmBD,GAE5D,OAAOxc,KAAK0b,WAAW7Y,GAAKmY,KACxBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQ6Q,GAAiB5C,UAClEqK,EAAAA,WAAWpb,KAAK+b,uCA/L3BC,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,4JAEqBzB,mBCDrC,SAAA2D,IAAA,IAAA1J,EAAA,OAAAH,GAAAA,EAAA+H,MAAArc,KAAAU,YAAAV,YAKIyU,EAAA2J,SAAmB3J,EAAKkF,OAAOxX,IAAM,wBAFPuS,EAAAA,EAAAA,GAc9ByJ,EAAAje,UAAAme,YAAA,WACI,OAAOre,KAAK2a,QAAQ,gBAAgBK,KAChCC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQkR,GAAeC,QAChEmH,EAAAA,WAAWpb,KAAK+b,mBASxBoC,EAAAje,UAAAoe,eAAA,SAAetL,GACX,IAAM4H,EAAO,gBAAkB6B,mBAAmBzJ,GAAS,oBAC3D,OAAOhT,KAAKue,QAAQ3D,IAQxBuD,EAAAje,UAAAse,aAAA,SAAahC,GACT,IAAM5B,EAAO,gBAAkB6B,mBAAmBD,GAClD,OAAOxc,KAAKue,QAAQ3D,IASduD,EAAAje,UAAAqe,QAAV,SAAkB3D,GACd,OAAO5a,KAAK2a,QAAQC,GAAMI,KACtBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBAcxBoC,EAAAje,UAAAue,WAAA,SAAWV,GAEP,OAAO/d,KAAKsb,SADC,eACcyC,GAAM/C,KAC7BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBAUxBoC,EAAAje,UAAAwe,iBAAA,SAAiBC,EAAiBtN,GAC9B,IAAMuJ,EAAO,yBAA2B6B,mBAAmBkC,GAAW,IAAMlC,mBAAmBpL,GAC/F,OAAOrR,KAAKsb,SAASV,GAAMI,KACvBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBAUxBoC,EAAAje,UAAA0e,sBAAA,SAAsBD,EAAiBtN,GACnC,IAAMuJ,EAAO,+BAAiC6B,mBAAmBkC,GAAW,IAAMlC,mBAAmBpL,GACrG,OAAOrR,KAAKsb,SAASV,GAAMI,KACvBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBAUxBoC,EAAAje,UAAA2e,2BAAA,SAA2BF,EAAiBtN,GACxC,IAAMuJ,EAAO,+BAAiC6B,mBAAmBkC,GAAW,IAAMlC,mBAAmBpL,GACrG,OAAOrR,KAAK0b,WAAWd,GAAMI,KACzBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBAgBxBoC,EAAAje,UAAA4e,qBAAA,SAAqBH,EAAiBZ,GAClC,IAAMnD,EAAO,gBAAkB6B,mBAAmBkC,GAClD,OAAO3e,KAAKwb,QAAQZ,EAAMmD,GAAM/C,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBASxBoC,EAAAje,UAAA6e,aAAA,SAAaJ,GAIT,OAAO3e,KAAKgf,WAAWL,EAHL,CACdhc,QAAQ,KAchBwb,EAAAje,UAAA+e,kBAAA,SAAkBN,EAAiBO,EAAqBC,GACpD,IAAMpB,EAAO,CACToB,YAAaA,EACbC,kBAAmBF,GAEvB,OAAOlf,KAAKgf,WAAWL,EAASZ,IAIpCI,EAAAje,UAAAmf,oBAAA,SAAoBV,EAAiBS,EAA2BD,GAC5D,IAAMpB,EAAO,CACToB,YAAaA,EACbC,kBAAmBA,GAEvB,OAAOpf,KAAKgf,WAAWL,EAASZ,IAUpCI,EAAAje,UAAA8e,WAAA,SAAWL,EAAiBZ,GAExB,IAAMnD,EAAO,gBAAkB6B,mBAAmBkC,GAElD,OAAO3e,KAAKwb,QAAQZ,EAAMmD,GAAM/C,KAC5BC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBAaxBoC,EAAAje,UAAAof,WAAA,SAAWX,GACP,IAAM/D,EAAO,gBAAkB6B,mBAAmBkC,GAClD,OAAO3e,KAAK0b,WAAWd,GAAMI,KACzBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,mBAWxBoC,EAAAje,UAAAqf,sBAAA,SAAsBZ,EAAiBtN,GACnC,IAAMuJ,EAAO,yBAA2B6B,mBAAmBkC,GAAW,IAAMlC,mBAAmBpL,GAC/F,OAAOrR,KAAK0b,WAAWd,GAAMI,KACzBC,EAAAA,IAAI,SAACE,GAA6B,OAAAA,EAAOrY,QAAQoR,GAAcC,OAC/DiH,EAAAA,WAAWpb,KAAK+b,uCA5N3BC,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,4JAEkBzB,kBCXlC,SAAAgF,IAKUxf,KAAAyf,QAAU,IAAIC,EAAAA,eAEtBF,EAAAtf,UAAAyf,YAAA,SAAYvM,GACVpT,KAAKyf,QAAQ7d,KAAK,CAAEge,MAAKxM,KAE3BoM,EAAAtf,UAAA2f,YAAA,WACE,OAAO7f,KAAKyf,QAAQK,oCAXvB9D,EAAAA,WAAU/B,KAAA,CAAC,CACVgC,WAAY,iICQZ,SAAA8D,EAAoBC,EACOrG,GADP3Z,KAAAggB,MAAAA,EACOhgB,KAAA2Z,OAAAA,SAS3BoG,EAAA7f,UAAA+f,aAAA,WAEE,OAAOjgB,KAAKggB,MAAMlF,IAAI9a,KAAK2Z,OAAOtX,IAAM,+BACrC2Y,KAAKC,EAAAA,IACJ,SAACiF,GACC,OAAOA,GAET,SAAAC,GACEtS,QAAQC,MAAMqS,2BAvBvBnE,EAAAA,WAAU/B,KAAA,CAAC,CACVgC,WAAY,oDAPLC,EAAAA,kBAIAla,EAAa3B,WAAA,CAAA,CAAAgU,KAQjB8H,EAAAA,OAAMlC,KAAA,CAAC,kKCJZmG,GAAA,SAAA9L,GAAA,SAAA8L,0DAGqC1L,EAAAA,EAAAA,GAOjC0L,EAAAlgB,UAAAmgB,sBAAA,WACI,OAAOrgB,KAAK2a,QAAQ,4BASxByF,EAAAlgB,UAAAogB,qCAAA,SAAqC5N,GACjC,OAAO1S,KAAK2a,QAAQ,8BAAgC8B,mBAAmB/J,KAS3E0N,EAAAlgB,UAAAqgB,mBAAA,SAAmBC,GAEf,GAAiC,IAA7BA,EAAkB7f,OAElB,OAAO8f,EAAAA,WAAWtgB,OAAO,SAAAugB,GAAY,OAAAA,EAAS5S,MAAM,iFAGxD,IAAI6S,EAAiB,GAMrB,OAJAH,EAAkBI,QAAQ,SAAUC,GAChCF,EAAiBA,EAAiB,IAAMlE,mBAAmBoE,EAAYnR,cAGpE1P,KAAK2a,QAAQ,yBAA2BgG,IASnDP,EAAAlgB,UAAA4gB,cAAA,SAAcC,GAEV,GAA4B,IAAxBA,EAAapgB,OAEb,OAAO8f,EAAAA,WAAWtgB,OAAO,SAAAugB,GAAY,OAAAA,EAAS5S,MAAM,sEAGxD,IAAIkT,EAAmB,GAMvB,OAJAD,EAAaH,QAAQ,SAAUC,GAC3BG,EAAmBA,EAAmB,IAAMvE,mBAAmBoE,EAAYnR,cAGxE1P,KAAK2a,QAAQ,4BAA8BqG,wBAjEzDhF,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,2JADhB,CAGqCzB,IpCL/ByG,GAASC,QAAQ,UAKvBC,GAAA,SAAA7M,GAEI,SAAA6M,EAAqBtF,GAArB,IAAApH,EACIH,EAAA3S,KAAA3B,KAAM6b,IAAQ7b,YADGyU,EAAAoH,QAAAA,IAGzB,OALiCnH,EAAAA,EAAAA,GAKjCyM,EALA,CAAiCC,OAWjCC,GAOI,SAAAA,GAAqBlR,EACRqB,GADQxR,KAAAmQ,GAAAA,EACRnQ,KAAAwR,MAAAA,IAUL3C,EAAAA,EAAAA,wBAAAA,EAAAA,sBAAqB,KAC7BA,EAAA,QAAA,GAAA,UACAA,EAAAA,EAAA,KAAA,GAAA,OACAA,EAAAA,EAAA,QAAA,GAAA,UAOJ,IAAAyS,GAQI,SAAAA,GAAqBC,EACR1f,EACA2f,GAFQxhB,KAAAuhB,WAAAA,EACRvhB,KAAA6B,MAAAA,EACA7B,KAAAwhB,SAAAA,GAQjBC,GAUI,SAAAA,GAAqBtR,EACRuR,EACAC,EACAnQ,EACAoQ,GAJQ5hB,KAAAmQ,GAAAA,EACRnQ,KAAA0hB,KAAAA,EACA1hB,KAAA2hB,QAAAA,EACA3hB,KAAAwR,MAAAA,EACAxR,KAAA4hB,cAAAA,GASjBC,GAAA,SAAAA,OAQAC,GAaI,SAAAA,GAAqB3R,EACR4R,EACAJ,EACAnQ,EACA1K,EACAX,EACAC,EACAC,GAPQrG,KAAAmQ,GAAAA,EACRnQ,KAAA+hB,WAAAA,EACA/hB,KAAA2hB,QAAAA,EACA3hB,KAAAwR,MAAAA,EACAxR,KAAA8G,cAAAA,EACA9G,KAAAmG,WAAAA,EACAnG,KAAAoG,eAAAA,EACApG,KAAAqG,oBAAAA,GASjB2b,GAAA,SAAAA,OAUAC,GAAA,SAAAA,OAWAC,GAsBI,SAAAA,KACIliB,KAAK2Q,WAAa,GAElB3Q,KAAKmiB,6BAA+B,IAAIF,GAExCjiB,KAAKoiB,gBAAkB,IAAIP,GAE3B7hB,KAAK+Y,WAAa,IAAIiJ,IAS9BK,GAAA,WAQI,SAAAA,EACYC,EACAF,EACArJ,GAFA/Y,KAAAsiB,2BAAAA,EACAtiB,KAAAoiB,gBAAAA,EACApiB,KAAA+Y,WAAAA,EAyJhB,OA5IIsJ,EAAAniB,UAAAqiB,0BAAA,SAA0BrN,GAGtB,IAAMsN,EAA8DtN,EAAauN,8BAIjF,IAAK,IAAMC,KAA0BF,EACjCxiB,KAAKsiB,2BAA2BI,GAA0BF,EAA8BE,GAI5F,IAAMC,EAAqBzN,EAAaqL,qBAIxC,IAAK,IAAMqC,KAAeD,EACtB3iB,KAAKoiB,gBAAgBQ,GAAeD,EAAmBC,GAI3D,IAAMC,EAAgB3N,EAAa4L,gBAInC,IAAK,IAAMgC,KAAWD,EAClB7iB,KAAK+Y,WAAW+J,GAAWD,EAAcC,IAUjDT,EAAAniB,UAAAuiB,4BAAA,WACI,OAAOziB,KAAKsiB,4BAQhBD,EAAAniB,UAAAqgB,mBAAA,WACI,OAAOvgB,KAAKoiB,iBAQhBC,EAAAniB,UAAA6iB,0BAAA,WAEI,IAAMC,EAAmC,GAGzC,IAAK,IAAMnC,KAAe7gB,KAAKoiB,gBAAiB,CAC5C,IAAMa,EAA0BjjB,KAAKoiB,gBAAgBvB,GACrDmC,EAAW9K,KAAK+K,GAGpB,OAAOD,GAUXX,EAAAniB,UAAAkV,yBAAA,SAAyB6N,GAErB,GAAIA,IAAa/gB,UAAW,CAExB,IAAMghB,EAAcljB,KAAKoiB,gBAAgBa,GAEzC,OAAIC,IAAgBhhB,WAAaghB,EAAY1R,QAAUtP,UAC5CghB,EAAY1R,MAEZ0R,EAAY/S,GAGvBtC,QAAQsV,IAAI,mFASpBd,EAAAniB,UAAA4gB,cAAA,WACI,OAAO9gB,KAAK+Y,YAQhBsJ,EAAAniB,UAAAkjB,qBAAA,WAEI,IAAMrK,EAA8B,GAGpC,IAAK,IAAMxE,KAAWvU,KAAK+Y,WAAY,CACnC,IAAMsK,EAAiBrjB,KAAK+Y,WAAWxE,GACvCwE,EAAWb,KAAKmL,GAGpB,OAAOtK,GAUXsJ,EAAAniB,UAAAojB,oBAAA,SAAoB9B,GAEhB,GAAIA,IAAatf,UAAW,CAExB,IAAMqhB,EAAUvjB,KAAK+Y,WAAWyI,GAEhC,OAAI+B,IAAYrhB,WAAaqhB,EAAQ/R,QAAUtP,UACpCqhB,EAAQ/R,MAER+R,EAAQpT,GAGnBtC,QAAQsV,IAAI,8EAIxBd,EApKA,GA2KAmB,GAAA,WAkBI,SAAAA,EAAoBC,GAAAzjB,KAAAyjB,iBAAAA,EAZZzjB,KAAA0jB,mBAAoC,CAAChgB,EAAeY,kBAAmBZ,EAAea,kBAItFvE,KAAA2jB,mBAAoC,CAACjgB,EAAeiD,WAGpD3G,KAAA4jB,mBAAoC,CAAClgB,EAAeoC,kBAAmBpC,EAAeqC,qBAAsBrC,EAAesC,UAG3HhG,KAAA6jB,cAA+B,IAAI3B,UAUnCsB,EAAAtjB,UAAA4jB,+BAAR,WAEI,OAAO9jB,KAAKyjB,iBAAiBpD,wBAAwBrF,KACjD+I,EAAAA,SAII,SAACC,GACG,IAEMC,EAFchD,GAAOiD,SAEIC,QAAQH,EAAO9gB,KAAM,IAIpD,OAAOkhB,EAAAA,KAAKH,OAWpBT,EAAAtjB,UAAAmkB,4CAAR,SAAoD3R,GAEhD,OAAO1S,KAAKyjB,iBAAiBnD,qCAAqC5N,GAAasI,KAC3E+I,EAAAA,SAII,SAACC,GACG,IAEMC,EAFchD,GAAOiD,SAEIC,QAAQH,EAAO9gB,KAAM,IAIpD,OAAOkhB,EAAAA,KAAKH,OAWpBT,EAAAtjB,UAAAokB,yCAAR,SAAiD3T,GAE7C3Q,KAAK6jB,cAAclT,WAAaA,EAAWsK,IACvC,SAAAsJ,GACI,OAAO,IAAIlD,GAAiBkD,EAAS,OAAQA,EAAS7gB,EAAeiD,eAUzE6c,EAAAtjB,UAAAskB,kCAAR,WAEI,OAAOxkB,KAAK6jB,cAAclT,YAWtB6S,EAAAtjB,UAAAukB,yCAAR,SAAiDC,GAC7C,QAAMlE,EAA8B,OAEpC,IAAuB,IAAAmE,EAAA5M,EAAA2M,GAAgBE,EAAAD,EAAA/iB,QAAAgjB,EAAA9iB,KAAA8iB,EAAAD,EAAA/iB,OAAA,CAAlC,IAAMijB,EAAQD,EAAA/iB,MACTijB,EAAWD,EAAS,OAItBC,IAAaphB,EAAec,WACvB,IADmCxE,KAAK4jB,mBAAmBlV,QAAQoW,IAC7DD,EAASnhB,EAAekC,mBAAqB1D,YAA0D,IAA7C2iB,EAASnhB,EAAekC,kBAE7F4a,EAAkBtI,KAAK4M,wGAI/B,OAAOtE,GAYHgD,EAAAtjB,UAAA6kB,sDAAR,SAA8DR,GAE1D,IAAMS,EAAQT,EAAS,UAGjBU,EAAYD,EAAME,OACpB,SAACC,GAEG,OADmBA,EAAO,WACJzhB,EAAeqD,WAIvCqe,EAAeJ,EAAME,OACvB,SAACC,GACG,IAAME,EAAaF,EAAO,SAC1B,OAAOE,IAAe3hB,EAAeuD,mBACjCoe,IAAe3hB,EAAewD,qBAC9Bme,IAAe3hB,EAAeyD,uBAC9Bke,IAAe3hB,EAAegD,cAK1C1G,KAAK6jB,cAAc1B,6BAA6BoC,EAAS,QAAUvkB,KAAKykB,yCAAyCQ,GAGjHjlB,KAAKslB,wCAAwCL,EAAWG,IAUpD5B,EAAAtjB,UAAAqlB,gCAAR,SAAwCC,GAEpC,QAAMlD,EAA6B,IAAIL,GAGnCwD,EAAuB,OAE3B,IAA0B,IAAAC,EAAA3N,EAAAyN,GAAYG,EAAAD,EAAA9jB,QAAA+jB,EAAA7jB,KAAA6jB,EAAAD,EAAA9jB,OAAA,CAAjC,IAAM8Q,EAAWiT,EAAA9jB,MAElB,GAAI7B,KAAK6jB,cAAc1B,6BAA6BzP,KAAiBxQ,UACjE,MAAM,IAAIif,GAAmB,0EAA0EzO,GAI3G4P,EAA2B5P,GAAe1S,KAAK6jB,cAAc1B,6BAA6BzP,GAG1F+S,EAAuBA,EAAqBG,OAAO5lB,KAAK6jB,cAAc1B,6BAA6BzP,yGAIvG,OAAO1S,KAAK6lB,4BAA4BJ,GAAsBzK,KAC1DC,EAAAA,IACI,SAAA6K,GACI,OAAO,IAAIzD,GACPC,EAA4BwD,EAAavF,qBAAsBuF,EAAahF,qBAcxF0C,EAAAtjB,UAAAolB,wCAAR,SAAgDS,EAAyCC,OAGrF,IAAuB,IAAAC,EAAAlO,EAAAgO,GAAwBG,EAAAD,EAAArkB,QAAAskB,EAAApkB,KAAAokB,EAAAD,EAAArkB,OAAA,CAA1C,IAAMqhB,EAAQiD,EAAArkB,MAETgf,EAAcoC,EAAS,OAGvBrB,EAA+B,GAErC,GAAIqB,EAASvf,EAAemD,kBAAoB3E,UAAW,CAEvD,IAAIikB,OAAoB,EAMpBA,EAHCxmB,MAAMymB,QAAQnD,EAASvf,EAAemD,iBAGhBoc,EAASvf,EAAemD,gBAFxB,CAACoc,EAASvf,EAAemD,qBAMpD,IAAsB,IAAAwf,EAAAtO,EAAAoO,GAAoBG,EAAAD,EAAAzkB,QAAA0kB,EAAAxkB,KAAAwkB,EAAAD,EAAAzkB,OAAA,CAArC,IAAM2kB,EAAOD,EAAAzkB,MAGd,GAAI0kB,aAAmB/mB,QAAU+mB,EAAQ,WAAarkB,WAAaqkB,EAAQ,WAAa7iB,EAAe8D,eAAgB,CAEnH,IAAIgf,OAAO,EAGX,GAAID,EAAQ7iB,EAAe4D,qBAAuBpF,UAC9CskB,EAAU,IAAIlF,GAAYzS,EAAAA,sBAAsB4X,QAASF,EAAQ7iB,EAAe4D,mBAAoBif,EAAQ7iB,EAAe0D,eAAe,aACvI,GAAImf,EAAQ7iB,EAAe6D,kBAAoBrF,UAClDskB,EAAU,IAAIlF,GAAYzS,EAAAA,sBAAsB6X,KAAMH,EAAQ7iB,EAAe6D,gBAAiBgf,EAAQ7iB,EAAe0D,eAAe,YACjI,CAAA,GAAImf,EAAQ7iB,EAAe2D,qBAAuBnF,UAIrD,MAAM,IAAIykB,UAAU,gCAAgC1D,EAAS,OAAM,IAAIsD,EAAQ7iB,EAAe0D,gBAH9Fof,EAAU,IAAIlF,GAAYzS,EAAAA,sBAAsB+X,QAASL,EAAQ7iB,EAAe2D,mBAAoBkf,EAAQ7iB,EAAe0D,eAAe,QAU9Iwa,EAAc1J,KAAKsO,0GAO/B,IAAMK,EAAc,IAAIpF,GACpBZ,EACAoC,EAASvf,EAAewC,cACxB+c,EAASvf,EAAekD,aACxBqc,EAASvf,EAAeiD,WACxBib,GAIJ5hB,KAAK6jB,cAAczB,gBAAgBvB,GAAegG,mHAItD7mB,KAAK8mB,uDAAuDd,IAUxDxC,EAAAtjB,UAAA6mB,qCAAR,SAA6CC,GAA7C,IAAAvS,EAAAzU,KAGU8lB,EAAe,IAAIjE,GAGnBd,EAAe,GAcrB,OAZAiG,EAAapG,QACT,SAAAC,GACIiF,EAAajF,GAAepM,EAAKoP,cAAczB,gBAAgBvB,GAE/DpM,EAAKoP,cAAczB,gBAAgBvB,GAAae,cAAchB,QAC1D,SAAA8F,GAEI3F,EAAa7I,KAAKwO,EAAKlF,cAKhCxhB,KAAKinB,uBAAuBlG,GAAc/F,KAC7CC,EAAAA,IACI,SAAAiM,GACI,OAAO,IAAI7E,GAAoB,IAAIJ,GAAgC6D,EAAcoB,EAASpG,qBAalG0C,EAAAtjB,UAAA4mB,uDAAR,SAA+DK,OAG3D,IAAsB,IAAAC,EAAArP,EAAAoP,GAA4BE,EAAAD,EAAAxlB,QAAAylB,EAAAvlB,KAAAulB,EAAAD,EAAAxlB,OAAA,CAA7C,IAAM2hB,EAAO8D,EAAAxlB,MAER0S,EAAUgP,EAAQ,OAEpBpd,GAAa,EACbod,EAAQ7f,EAAeyC,cAAgBjE,YAAoD,IAAvCqhB,EAAQ7f,EAAeyC,cAC3EA,GAAa,GAGjB,IAAIC,GAAiB,EACjBmd,EAAQ7f,EAAe0C,kBAAoBlE,YAAwD,IAA3CqhB,EAAQ7f,EAAe0C,kBAC/EA,GAAiB,GAGrB,IAAIC,GAAsB,EACtBkd,EAAQ7f,EAAe2C,uBAAyBnE,YAA6D,IAAhDqhB,EAAQ7f,EAAe2C,uBACpFA,GAAsB,GAG1B,IAAIS,EAAgB,GAChByc,EAAQ7f,EAAeoD,iBAAmB5E,WAAavC,MAAMymB,QAAQ7C,EAAQ7f,EAAeoD,gBAC5FA,EAAgByc,EAAQ7f,EAAeoD,eAAemU,IAAI,SAACqM,GAAsB,OAAAA,EAAU,SACpF/D,EAAQ7f,EAAeoD,iBAAmB5E,WACjD4E,EAAcoR,KAAKqL,EAAQ7f,EAAeoD,eAAe,QAG7D,IAAIib,OAAU,EACVwB,EAAQ7f,EAAeuC,cAAgB/D,YACvC6f,EAAawB,EAAQ7f,EAAeuC,YAAY,QAIpDjG,KAAK6jB,cAAc9K,WAAWxE,GAAW,IAAIuN,GACzCvN,EACAwN,EACAwB,EAAQ7f,EAAekD,aACvB2c,EAAQ7f,EAAeiD,WACvBG,EACAX,EACAC,EACAC,iHAaJmd,EAAAtjB,UAAAqnB,gCAAR,SAAwCxG,GAAxC,IAAAtM,EAAAzU,KAEUolB,EAAe,IAAIpD,GAiBzB,OAfAjB,EAAaH,QACT,SAAArM,GAEI,MAAgD,EAA5CE,EAAKkP,mBAAmBjV,QAAQ6F,IAApC,CAIA,GAAIE,EAAKoP,cAAc9K,WAAWxE,KAAarS,UAC3C,MAAM,IAAIif,GAAmB,iEAAiE5M,GAGlG6Q,EAAa7Q,GAAWE,EAAKoP,cAAc9K,WAAWxE,MAIvD,IAAI8N,GAAoB,IAAIJ,GAAgC,IAAIJ,GAAmBuD,IASvF5B,EAAAtjB,UAAAmgB,sBAAP,WAAA,IAAA5L,EAAAzU,KAEI,OAA6C,IAAzCA,KAAK6jB,cAAclT,WAAWhQ,OAEvBX,KAAK8jB,iCAAiC9I,KACzCC,EAAAA,IACI,SAAA5Z,GAKI,OAJAoT,EAAK6P,yCAAyCjjB,EAAS,UAAU6jB,OAAO,SAACsC,GAErE,OAAyD,IAAlD/S,EAAKiP,mBAAmBhV,QAAQ8Y,EAAK,WAEzC/S,EAAK+P,uCAMjBiD,EAAAA,GAAGznB,KAAKwkB,sCAWfhB,EAAAtjB,UAAAwnB,sBAAR,SAA8BlC,GAA9B,IAAA/Q,EAAAzU,KAGU2nB,EAAc,GAmBpB,OAhBAnC,EAAa5E,QAAQ,SAAAlO,GAEjBiV,EAAYzP,KAAKzD,EAAK4P,4CAA4C3R,GAAasI,KAC3EC,EAAAA,IACI,SAACsJ,GAEG9P,EAAKsQ,sDAAsDR,SAUpEqD,EAAAA,SAASD,IASbnE,EAAAtjB,UAAA2nB,kCAAP,SAAyCrC,GAAzC,IAAA/Q,EAAAzU,KAEU8nB,EAAsBtC,EAAaN,OACrC,SAAAxS,GAEI,OAAO+B,EAAKoP,cAAc1B,6BAA6BzP,KAAiBxQ,YAIhF,OAAiC,EAA7B4lB,EAAoBnnB,OAEbX,KAAK0nB,sBAAsBI,GAAqB9M,KACnD+I,EAAAA,SACI,SAAAgE,GAEI,OAAOtT,EAAK8Q,gCAAgCC,MAMjDxlB,KAAKulB,gCAAgCC,IAc7ChC,EAAAtjB,UAAA2lB,4BAAP,SAAmCrF,GAAnC,IAAA/L,EAAAzU,KAEUgoB,EAAmCxH,EAAkB0E,OACvD,SAAArE,GAGI,OAAOpM,EAAKoP,cAAczB,gBAAgBvB,KAAiB3e,YAInE,GAAoC,EAAhC8lB,EAAuBrnB,OAAY,CAGnC,IAAM6kB,EAAyBwC,EAAuB/M,IAClD,SAAA4F,GACI,OAAOrT,EAAMC,4BAA4BoT,KAE/CqE,OAAO1X,EAAMc,qBAGf,OAAOtO,KAAK0nB,sBAAsBlC,GAAcxK,KAC5C+I,EAAAA,SACI,SAAAgE,GAEI,OAAOtT,EAAKsS,qCAAqCvG,MAM7D,OAAOxgB,KAAK+mB,qCAAqCvG,IAYlDgD,EAAAtjB,UAAA+mB,uBAAP,SAA8BlG,GAA9B,IAAAtM,EAAAzU,KAEUioB,EAA8BlH,EAAamE,OAC7C,SAAA3Q,GAGI,SAAgD,EAA5CE,EAAKkP,mBAAmBjV,QAAQ6F,KAK7BE,EAAKoP,cAAc9K,WAAWxE,KAAarS,YAI1D,GAA+B,EAA3B+lB,EAAkBtnB,OAAY,CAG9B,IAAM6kB,EAAyByC,EAAkBhN,IAC7C,SAAA1G,GACI,OAAO/G,EAAMC,4BAA4B8G,KAE/C2Q,OAAO1X,EAAMc,qBAGf,OAAOtO,KAAK0nB,sBAAsBlC,GAAcxK,KAC5CC,EAAAA,IACI,SAAA8M,GACI,GAAIA,EACA,OAAOtT,EAAK8S,gCAAgCxG,GAE5C,MAAM,IAAIK,MAAM,+EAMhC,OAAOqG,EAAAA,GAAGznB,KAAKunB,gCAAgCxG,yBA7jB1D/E,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,oDAtWPmE,yHAqWT,kBqCjWA,SAAA8H,0DAGqCxT,EAAAA,EAAAA,GASjCwT,EAAAhoB,UAAAioB,YAAA,SAAY3L,GAER,OAAOxc,KAAK2a,QAAQ,iBAAmB8B,mBAAmBD,yBAdjER,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,4JAEqBzB,mBCJrC,SAAA4N,0DAGmC1T,EAAAA,EAAAA,GAS/B0T,EAAAloB,UAAAmoB,iBAAA,SAAiBC,EAAoBC,GAEjC,YAFiC,IAAAA,IAAAA,EAAA,GAE7BD,IAAepmB,WAAmC,IAAtBomB,EAAW3nB,OAChC8f,EAAAA,WAAWtgB,OAAO,SAAAugB,GAAY,OAAAA,EAAS5S,MAAM,qEAGjD9N,KAAK2a,QAAQ,cAAgB2N,EAAa,WAAaC,IASlEH,EAAAloB,UAAAsoB,2BAAA,SAA2BF,GAEvB,OAAIA,IAAepmB,WAAmC,IAAtBomB,EAAW3nB,OAChC8f,EAAAA,WAAWtgB,OAAO,SAAAugB,GAAY,OAAAA,EAAS5S,MAAM,+EAGjD9N,KAAK2a,QAAQ,oBAAsB2N,IAS9CF,EAAAloB,UAAAuoB,iBAAA,SAAiBC,GAEb,OAAIA,IAAiBxmB,WAAqC,IAAxBwmB,EAAa/nB,OACpC8f,EAAAA,WAAWtgB,OAAO,SAAAugB,GAAY,OAAAA,EAAS5S,MAAM,uEAIjD9N,KAAKsb,SAAS,qBAAsBoN,IAU/CN,EAAAloB,UAAAyoB,2BAAA,SAA2BD,GAEvB,OAAIA,IAAiBxmB,WAAqC,IAAxBwmB,EAAa/nB,OACpC8f,EAAAA,WAAWtgB,OAAO,SAAAugB,GAAY,OAAAA,EAAS5S,MAAM,iFAIjD9N,KAAKsb,SAAS,2BAA4BoN,IAWrDN,EAAAloB,UAAA0oB,cAAA,SAAcN,EAAoBO,EAA2BxX,GAEzD,GAAIiX,IAAepmB,WAAmC,IAAtBomB,EAAW3nB,OACvC,OAAO8f,EAAAA,WAAWtgB,OAAO,SAAAugB,GAAY,OAAAA,EAAS5S,MAAM,qEAGxD,IAAM+M,EAAS,GAWf,OATIgO,IAAqB3mB,YACrB2Y,EAA6B,qBAAIgO,GAGjCxX,IAAenP,YACf2Y,EAAuB,eAAIxJ,GAIxBrR,KAAK2a,QAAQ,qBAAuB8B,mBAAmB6L,GAAazN,wBA9FlFmB,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,4JAEmBzB,KCqBnC,SAAcsO,GAWV,IAAMC,EAAmB,SAACC,GACtB,MAAoB,QAAbA,GACa,UAAbA,GACAA,IAAatlB,EAAeiD,WAC5BqiB,IAAatlB,EAAekE,mBAC5BohB,IAAatlB,EAAemE,gBAC5BmhB,IAAatlB,EAAe+D,cAC5BuhB,IAAatlB,EAAegE,sBAC5BshB,IAAatlB,EAAeiE,gBAWvC,SAAAshB,EAA+BC,GAE3B,IAAMnQ,EAoQV,SAAAoQ,EAAiCD,GAI7B,IAAME,EAAmCF,EAAexlB,EAAewF,wBAGjEmgB,EAAsC,GAI5C,GAAID,IAA6BlnB,WAAavC,MAAMymB,QAAQgD,OACxD,IAAiC,IAAAE,EAAAvR,EAAAqR,GAAwBG,EAAAD,EAAA1nB,QAAA2nB,EAAAznB,KAAAynB,EAAAD,EAAA1nB,OAAA,CAApD,IAAM4nB,EAAkBD,EAAA1nB,MACnB4nB,EAA6BC,EAC/BF,EAAoB9lB,EAAewF,uBAAwB,IAG/DmgB,EAAmBnR,KAAKuR,6GAEzB,GAAIL,IAA6BlnB,UAAW,CAC/C,IAAMunB,EAAcC,EAChBN,EAA0B1lB,EAAewF,uBAAwB,IAGrEmgB,EAAmBnR,KAAKuR,GAG5B,IAAIE,EAAYnqB,OAAOoqB,KAAKV,GAG5BS,EAAYA,EAAUzE,OAAO6D,GAE7B,gBAAMhQ,EAA6B,OAGnC,IAAuB,IAAA8Q,EAAA9R,EAAA4R,GAASG,EAAAD,EAAAjoB,QAAAkoB,EAAAhoB,KAAAgoB,EAAAD,EAAAjoB,OAAA,CAA3B,IAAMonB,EAAQc,EAAAjoB,MAETkoB,EAAsC,GAG5C,GAAIpqB,MAAMymB,QAAQ8C,EAAeF,QAI7B,IAAwB,IAAAhR,EAAAD,EAAAmR,EAAeF,IAASgB,EAAAhS,EAAApW,QAAAooB,EAAAloB,KAAAkoB,EAAAhS,EAAApW,OAAA,CAA3C,IAAMqoB,EAASD,EAAAnoB,MAGVqoB,EAAsCR,EAAwBO,EAAWjB,EAAUK,GAIrFa,IAAsBhoB,WAAW6nB,EAAW7R,KAAKgS,4GAGtD,CAGH,IAAMA,EAAsCR,EAAwBR,EAAeF,GAAWA,EAAUK,GAIpGa,IAAsBhoB,WAAW6nB,EAAW7R,KAAKgS,GAIzDnR,EAAWiQ,GAAYe,uGAI3B,OAAOhR,EAzU4BoQ,CAAwBD,GAE3D,OAAO,IAAIxQ,GACPwQ,EAAe,OACfA,EAAe,SACfA,EAAexlB,EAAeiD,WAC9B,GACA,GACA,GACA,GACAoS,GAcR,SAAA2Q,EACIO,EAAmB1V,EAAiB8U,GAIpC,IAAIa,MAGJ,OAAQD,EAAU,UACd,KAAKvmB,EAAee,UAEhB,IAAI0lB,OAAS,EAEb,GAAIF,EAAUvmB,EAAeoF,iBAAmB5G,UAC5CioB,EAAY,IAAIniB,EAAsBiiB,EAAU,OAAQ1V,EAAS0V,EAAUvmB,EAAeoF,qBACvF,GAAImhB,EAAUvmB,EAAeqF,mBAAqB7G,UAAW,CAEhE,IAAM6S,EAAqD,OAI3D,IAA2B,IAAAqV,EAAArS,EAAAsR,GAAkBgB,EAAAD,EAAAxoB,QAAAyoB,EAAAvoB,KAAAuoB,EAAAD,EAAAxoB,OAAA,CAAxC,IACK0oB,EADaD,EAAAxoB,MAC4BoU,iBAC/ClB,EAAkBuV,EAAYna,IAAMma,uGAGxCH,EAAY,IAAIpiB,EACZkiB,EAAU,OAAQ1V,EAAS0V,EAAUvmB,EAAeqF,iBAAkBgM,QAG1EkV,EAAUvmB,EAAesF,kBAAoB9G,WAAa+nB,EAAUvmB,EAAeuF,uBAAyB/G,UAC5GioB,EAAY,IAAIliB,EACZgiB,EAAU,OAAQ1V,EAAS0V,EAAUvmB,EAAesF,gBAAiBihB,EAAUvmB,EAAeuF,sBAIlG4E,QAAQC,MAAM,8BAAgC8J,KAAK2S,UAAUN,IAGjEC,EAAoBC,EACpB,MAEJ,KAAKzmB,EAAeoB,UAahBolB,EAZkB,IAAIhiB,EAAc+hB,EAAU,OAC1C1V,EACA0V,EAAUvmB,EAAeiG,sBACzBsgB,EAAUvmB,EAAeyF,uBACzB8gB,EAAUvmB,EAAe0F,qBACzB6gB,EAAUvmB,EAAe2F,sBACzB4gB,EAAUvmB,EAAe4F,oBACzB2gB,EAAUvmB,EAAe6F,wBACzB0gB,EAAUvmB,EAAe8F,sBACzBygB,EAAUvmB,EAAe+F,sBACzBwgB,EAAUvmB,EAAegG,qBAG7B,MAEJ,KAAKhG,EAAeyB,UAEhB,IAAIqlB,OAAS,EAGb,GAAIP,EAAUvmB,EAAekG,sBAAwB1H,UAAW,CAG5D,IAAM+T,EAAiCgT,EAAsBgB,EAAUvmB,EAAekG,qBAEtF4gB,EAAY,IAAIriB,EAAc8hB,EAAU,OAAQ1V,EAAS0B,EAAiB9F,GAAI8F,QAC3E,GAAIgU,EAAUvmB,EAAeqG,yBAA2B7H,UAAW,CAGtE,IAAM8T,EAAsBiU,EAAUvmB,EAAeqG,uBAAuB,OAE5EygB,EAAY,IAAIriB,EAAc8hB,EAAU,OAAQ1V,EAASyB,QACtD,GAAIiU,EAAUvmB,EAAemG,sBAAwB3H,UAAW,CAGnE,IAAMuoB,EAAiCxB,EAAsBgB,EAAUvmB,EAAemG,qBAEtF2gB,EAAY,IAAIriB,EAAc8hB,EAAU,OAAQ1V,EAASkW,EAAiBta,GAAIsa,QAC3E,GAAIR,EAAUvmB,EAAeoG,yBAA2B5H,UAAW,CAGtE,IAAMwoB,EAAsBT,EAAUvmB,EAAeoG,uBAAuB,OAE5E0gB,EAAY,IAAIriB,EAAc8hB,EAAU,OAAQ1V,EAASmW,GAG7DR,EAAoBM,EACpB,MAEJ,KAAK9mB,EAAegB,SAGhBwlB,EADiB,IAAI9hB,EAAiB6hB,EAAU,OAAQ1V,EAAS0V,EAAUvmB,EAAesG,wBAG1F,MAEJ,KAAKtG,EAAemB,aAGhB,IAAM8lB,EAAiBC,WAAWX,EAAUvmB,EAAeuG,uBAAuB,WAGlFigB,EADqB,IAAI7hB,GAAiB4hB,EAAU,OAAQ1V,EAASoW,GAGrE,MAEJ,KAAKjnB,EAAe+B,oBAahBykB,EAXqD,IAAI5hB,GACrD2hB,EAAU,OACV1V,EACA0V,EAAUvmB,EAAe0G,sBACzB6f,EAAUvmB,EAAe8G,mCACzByf,EAAUvmB,EAAewG,gBACzB+f,EAAUvmB,EAAe4G,4BACzB2f,EAAUvmB,EAAe6G,4BACzB0f,EAAUvmB,EAAeyG,qBAK7B,MAEJ,KAAKzG,EAAeiC,cAShBukB,EAPsB,IAAI3hB,GACtB0hB,EAAU,OACV1V,EACA0V,EAAUvmB,EAAe0G,sBACzB6f,EAAUvmB,EAAewG,iBAK7B,MAEJ,KAAKxG,EAAeqB,WAQhBmlB,EANuC,IAAIzhB,GACvCwhB,EAAU,OACV1V,EACA0V,EAAUvmB,EAAe+G,oBAK7B,MAEJ,KAAK/G,EAAesB,UAQhBklB,EANqC,IAAI1hB,GACrCyhB,EAAU,OACV1V,EACA0V,EAAUvmB,EAAegH,0BAK7B,MAEJ,KAAKhH,EAAekB,SAQhBslB,EAN+B,IAAIxhB,GAC/BuhB,EAAU,OACV1V,EACA0V,EAAUvmB,EAAeiH,eAAe,WAK5C,MAEJ,KAAKjH,EAAeiB,aAQhBulB,EANoC,IAAIvhB,GACpCshB,EAAU,OACV1V,EACA0V,EAAUvmB,EAAekH,wBAK7B,MAGJ,KAAKlH,EAAewB,cAGhB,IAAM2lB,EAAWD,WAAWX,EAAUvmB,EAAemH,uBAAuB,WACtEigB,EAASF,WAAWX,EAAUvmB,EAAeoH,qBAAqB,WASxEof,EAPyC,IAAIthB,GACzCqhB,EAAU,OACV1V,EACAsW,EACAC,GAKJ,MAEJ,KAAKpnB,EAAeuB,UAShBilB,EAPiC,IAAIrhB,GACjCohB,EAAU,OACV1V,EACA0V,EAAUvmB,EAAeqH,qBAAqB,OAC9Ckf,EAAUvmB,EAAesH,2BAK7B,MAEJ,QAEI6C,QAAQC,MAAM,0CAA4Cmc,EAAU,UAI5E,OAAOC,EAwIX,SAAAa,EAAoC7B,GAEhC,IAAIS,EAAYnqB,OAAOoqB,KAAKV,GAE5BS,EAAYA,EAAUzE,OAAO6D,GAE7B,YAAMiC,EAA0B,OAEhC,IAAmB,IAAAC,EAAAlT,EAAA4R,GAASuB,EAAAD,EAAArpB,QAAAspB,EAAAppB,KAAAopB,EAAAD,EAAArpB,OAAA,CAAvB,IAAMyhB,EAAI6H,EAAArpB,MAGX,GAAIlC,MAAMymB,QAAQ8C,EAAe7F,QAE7B,IAA0B,IAAAvL,EAAAC,EAAAmR,EAAe7F,IAAKrL,EAAAF,EAAAlW,QAAAoW,EAAAlW,KAAAkW,EAAAF,EAAAlW,OAAA,CAAzC,IAAM0oB,EAAWtS,EAAAnW,MAGdyoB,EAAY,WAAa5mB,EAAeyB,WAAamlB,EAAY5mB,EAAekG,sBAAwB1H,UAGxG8oB,EAAwB9S,KAAKoS,EAAY5mB,EAAekG,oBAAoB,UAE5E0gB,EAAY,WAAa5mB,EAAeyB,WAAamlB,EAAY5mB,EAAemG,sBAAwB3H,WAExG8oB,EAAwB9S,KAAKoS,EAAY5mB,EAAemG,oBAAoB,oHAShFqf,EAAe7F,GAAM,WACjB3f,EAAeyB,WAAa+jB,EAAe7F,GAAM3f,EAAekG,sBAChE1H,UAGJ8oB,EAAwB9S,KAAKgR,EAAe7F,GAAM3f,EAAekG,oBAAoB,UAErFsf,EAAe7F,GAAM,WACjB3f,EAAeyB,WAAa+jB,EAAe7F,GAAM3f,EAAemG,sBAChE3H,WAEJ8oB,EAAwB9S,KAAKgR,EAAe7F,GAAM3f,EAAemG,oBAAoB,+GAMjG,OAAOmhB,EA9FKlC,EAAAqC,sCAAhB,SAAAA,EAAsDC,GAElD,IACIlS,MADED,EAAiC,GAEjCoS,EAAiBD,EAAwB,UAG/C,GAAIC,IAAmBnpB,UAAW,CAE9BgX,EAAoBmS,EAAe1qB,WAEnC,IAA6B,IAAA2qB,EAAAvT,EAAAsT,GAAcE,EAAAD,EAAA1pB,QAAA2pB,EAAAzpB,KAAAypB,EAAAD,EAAA1pB,OAAA,CAAtC,IAEK4pB,EAAyBvC,EAFVsC,EAAA1pB,OAKrBoX,EAAUf,KAAKsT,8GAGiC,IAAhDhsB,OAAOoqB,KAAKwB,GAAyBzqB,OAErCuY,EAAoB,GAIpBA,EAAoB,EAEdsS,EAAyBvC,EAAsBmC,GAGrDnS,EAAUf,KAAKsT,IAIvB,OAAO,IAAIxS,GAAsBC,EAAWC,IAuEhC4P,EAAA2C,6BAAhB,SAAAA,EAA6CL,GAEzC,QAAMC,EAAiBD,EAAwB,UAC3ChJ,EAAiC,GAGrC,GAAIiJ,IAAmBnpB,cAGnB,IAA6B,IAAAwpB,EAAA3T,EAAAsT,GAAcM,EAAAD,EAAA9pB,QAAA+pB,EAAA7pB,KAAA6pB,EAAAD,EAAA9pB,OAAA,CAAtC,IAAMsnB,EAAcyC,EAAA9pB,MAErBugB,EAAgBlK,KAAKgR,EAAe,UAGpC,IAAM8B,EAA0BD,EAA2B7B,GAE3D9G,EAAkBA,EAAgBwD,OAAOoF,4GAI1C,CAGH,GAAoD,IAAhDxrB,OAAOoqB,KAAKwB,GAAyBzqB,OACrC,MAAO,GAEPyhB,EAAgBlK,KAAKkT,EAAwB,UAGvCJ,EAA0BD,EAA2BK,GAE3DhJ,EAAkBA,EAAgBwD,OAAOoF,GAKjD,OAAO5I,EAAgB8C,OAAO1X,EAAMc,sBAhgB5C,CAAcwa,EAAAA,gBAAAA,EAAAA,cAAa,wBCzB3B,SAAA8C,0DAGqClX,EAAAA,EAAAA,GAKjCkX,EAAA1rB,UAAA2rB,mBAAA,SAAmBC,EAAqBvD,GACpC,IAAMwD,EAAiB,yWAeCD,EAAW,2EAGxCA,EAAW,saAgBHvD,EAAM,KAGT,OAAOvoB,KAAKyoB,iBAAiBsD,IAWjCH,EAAA1rB,UAAA8rB,gDAAA,SAAgD/W,EAAqBsT,GACjE,IAAMwD,EAAiB,yUAcH9W,EAAW,yEAGpCA,EAAW,0TAaLsT,EAAM,KAGP,OAAOvoB,KAAKyoB,iBAAiBsD,IAajCH,EAAA1rB,UAAA+rB,4BAAA,SAA4BhX,EAAqBsT,GAC7C,IAAMwD,EAAiB,wKAMD9W,EAAW,0FAMXA,EAAW,WAEtCA,EAAW,oRAQyBA,EAAW,qEAIbA,EAAW,sBAGrCsT,EAAM,KAGT,OAAOvoB,KAAKyoB,iBAAiBsD,wBAzIpC/P,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,4JAEqBmM,ICArC8D,GAQI,SAAAA,GAAmBC,GAAAnsB,KAAAmsB,mBAAAA,iBAkBnB,SAAAC,IAHQpsB,KAAAqsB,oBAAsB,IAAIC,EAAAA,gBAAsC,IAAIJ,GAAqB,SAAC3D,GAAmB,MAAA,MACrHvoB,KAAAusB,oBAAsBvsB,KAAKqsB,oBAAoBvM,sBAU/CsM,EAAAlsB,UAAAssB,sBAAA,SAAsBC,GAClBzsB,KAAKqsB,oBAAoBzqB,KAAK6qB,wBArBrCzQ,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,yJCdhByQ,GAAA,SAAApY,GAEI,SAAAoY,EAAYC,UACRrY,EAAA3S,KAAA3B,KAAM2sB,IAAI3sB,KAElB,OALwC0U,EAAAA,EAAAA,GAKxCgY,EALA,CAAwCtL,OAOxCwL,GAAA,WA2BI,SAAAA,EAAoBC,GAAA7sB,KAAA6sB,qBAAAA,SAQZD,EAAA1sB,UAAA4sB,+BAAR,SAAuCC,GAEnC,IAAMC,EAAqBJ,EAA4BK,8BAA8BF,GAErF,GAAIC,IAAe9qB,UACf,OAAO8qB,EAEP,MAAM,IAAIN,GAA0B,gBAAgBK,EAAW,4CAahEH,EAAA1sB,UAAAgtB,sBAAP,SAA6BnU,EAAiCoU,EAAkC5E,GAAhG,IAAA9T,EAAAzU,UAAgG,IAAAuoB,IAAAA,EAAA,GAG5F,IAAI6E,EAAoB,GAGpBD,IAA4BjrB,YAC5BkrB,EAAoB,eAAe5f,EAAMO,wCAAwCof,GAAwB,OAI7G,IAAME,EAAkB,GAGlBC,EAAmB,GAGnBC,EAAkBxU,EAAWkC,IAC/B,SAACuS,EAAgChf,GAE7B,IAEIwe,EAQA/C,EAVEwD,EAAgBjgB,EAAMO,wCAAwCyf,EAAYhM,SAASrR,IAMrF6c,EAHCQ,EAAYhM,SAASpb,eAGT1C,EAAe6H,eAFfkJ,EAAKqY,+BAA+BU,EAAYhM,SAASO,YAiB1E,IAAI2L,EAAoB,aAAaD,EAAa,MAJ9CxD,EANCuD,EAAYhM,SAASpb,gBAAiF,WAA/DonB,EAAYG,aAAaC,mBAAmBjZ,eAMxE6Y,EAAYG,aAAa9rB,MAAMgsB,SAAS9rB,EAAAA,YAAY+rB,QAHpD,WAAWtf,GAOqC,KAG1Duf,EAAqB,IAAIN,EAAa,2BAA2BT,EAAU,MAC3EgB,EAAyB/D,EAAS,OAAO+C,EAAU,MAKrDU,EAFAF,EAAYhM,SAASpb,gBAAiF,cAA/DonB,EAAYG,aAAaC,mBAAmBjZ,eAEvE,wBAC9B+Y,EAAS,KACTK,EAAkB,KAClBC,EAAmB,OAIDV,EAAiBpV,KAAKwV,GACV,KAC9BA,EAAS,KACTK,EAAkB,KAClBC,EAAmB,MAKL,IAAI9I,EAAiB,GAkBrB,OAhBKsI,EAAYhM,SAASpb,gBAAiF,WAA/DonB,EAAYG,aAAaC,mBAAmBjZ,iBAIhFuQ,EAF+D,SAA/DsI,EAAYG,aAAaC,mBAAmBjZ,eAEnC,gBAAgBsV,EAAS,KAAKuD,EAAYG,aAAa9rB,MAAMgsB,SAAS9rB,EAAAA,YAAY+rB,QAAO,SAC5B,UAA/DN,EAAYG,aAAaC,mBAAmBjZ,eAE1C,WAAWjR,EAAeoI,cAAa,KAAKme,EAAS,KAAKuD,EAAYG,aAAa9rB,MAAMgsB,SAAS9rB,EAAAA,YAAY+rB,QAAO,IAErH,UAAU7D,EAAS,IAAIuD,EAAYG,aAAaC,mBAAmBvZ,KAAI,IAAImZ,EAAYG,aAAa9rB,MAAMgsB,SAAS9rB,EAAAA,YAAY+rB,QAAO,KAKnJN,EAAYS,iBAAiBZ,EAAgBnV,KAAK+R,GAE5CyD,EAAS,KACjCxI,EAAM,OAKIgJ,EAAmB,GAEM,EAAzBb,EAAgB1sB,SAChButB,EAAmB,cACpBb,EAAgBc,KAAK,KAAI,MAK5B,IAAMC,EAAqB,wIAMjCd,EAAiBa,KAAK,MAAK,uDAM3Bf,EAAiB,OAEjBG,EAAMY,KAAK,IAAG,UAGdD,EAGYG,EAAiB,YACtB9F,EAAM,KAmBP,OAPe,IAAXA,GAEAvoB,KAAK6sB,qBAAqBL,sBAAsB,IAAIN,GAVR,SAACoC,GAK7C,OAAOF,EAJsB,YAChCE,EAAW,QAaLF,EAAqBC,GA5LlBzB,EAAAK,8BAAgC,CAC1CsB,sDAAuD7qB,EAAe0H,WACtEojB,0DAA2D9qB,EAAe2H,WAC1EojB,0DAA2D/qB,EAAeyH,WAC1EujB,uDAAwDhrB,EAAeuH,UACvE0jB,uDAAwDjrB,EAAe8H,WACvEojB,2DAA4DlrB,EAAe+H,eAC3EojB,uDAAwDnrB,EAAegI,WACvEojB,wDAAyDprB,EAAeiI,YACxEojB,0DAA2DrrB,EAAekI,cAC1EojB,sDAAuDtrB,EAAe4H,OACtE2jB,iEAAkEvrB,EAAemI,WACjFqjB,uDAAwDxrB,EAAemI,WACvEsjB,kEAAmEzrB,EAAemI,WAClFujB,0DAA2D1rB,EAAemI,WAC1EwjB,4DAA6D3rB,EAAemI,WAC5EyjB,+DAAgE5rB,EAAemI,WAC/E0jB,2DAA4D7rB,EAAemI,WAC3E2jB,uDAAwD9rB,EAAeuH,+BAxB9E+Q,EAAAA,WAAU/B,KAAA,CAAC,CACRgC,WAAY,oDAfemQ,yHAc/B,iBCHE,SAAAqD,EAAoBhV,EAA2Cd,GAA3C3Z,KAAAya,KAAAA,EAA2Cza,KAAA2Z,OAAAA,SAQ/D8V,EAAAvvB,UAAAwvB,wBAAA,SAAwBC,GAEtB,OAAO3vB,KAAKya,KAAKc,KAAsCvb,KAAK2Z,OAAOxX,IAAM,uCAAwCwtB,GAC9G3U,KACCC,EAAAA,IACE,SAAC8C,GAGC,OAFgDA,EAElClC,SAEhB,SAAC/N,GAMC,MALIA,EAAMA,iBAAiBsT,MACzBvT,QAAQsV,IAAI,uEAAwErV,GAEpFD,QAAQsV,IAAI,uEAAwErV,GAEhFA,0BA7BjBkO,EAAAA,WAAU/B,KAAA,CAAC,CACVgC,WAAY,oDAPLC,EAAAA,kBAGAla,EAAa3B,WAAA,CAAA,CAAAgU,KAQmB8H,EAAAA,OAAMlC,KAAA,CAAC,iLCRhD,SAAA2V,0DAG0Clb,EAAAA,EAAAA,GAWxCkb,EAAA1vB,UAAA2vB,iBAAA,WACE,IAAMhtB,EAAM7C,KAAK2Z,OAAOtX,IACxB,OAAOrC,KAAK2a,QAAQ9X,EAAM,4DAhB7BmZ,EAAAA,WAAU/B,KAAA,CAAC,CACVgC,WAAY,4JAE4BzB,mBCH1C,SAAAsV,0DAG0Cpb,EAAAA,EAAAA,GAOxCob,EAAA5vB,UAAA6vB,sBAAA,SAAsBvT,GACpB,OAAOxc,KAAK2a,QAAQ,gCAAkC8B,mBAAmBD,KAQ3EsT,EAAA5vB,UAAA8vB,gBAAA,SAAgBxT,GACd,OAAOxc,KAAK2a,QAAQ,qBAAuB8B,mBAAmBD,yBApBjER,EAAAA,WAAU/B,KAAA,CAAC,CACVgC,WAAY,4JAE4BzB,kBCkBtC,SAAAyV,IAHAjwB,KAAAqU,KAAO3Q,EAAeqI,yBACtB/L,KAAAwR,MAAQ9N,EAAesI,sBAQ3B,OAHIikB,EAAA/vB,UAAAyU,aAAA,WACI,MAAO,UAEfsb,mBAQI,SAAAC,IAHAlwB,KAAAqU,KAAO3Q,EAAeuI,4BACtBjM,KAAAwR,MAAQ9N,EAAewI,yBAQ3B,OAHIgkB,EAAAhwB,UAAAyU,aAAA,WACI,MAAO,aAEfub,mBAOI,SAAAC,IAHAnwB,KAAAqU,KAAO3Q,EAAe2I,oCACtBrM,KAAAwR,MAAQ9N,EAAe4I,iCAQ3B,OAHI6jB,EAAAjwB,UAAAyU,aAAA,WACI,MAAO,qBAEfwb,mBAOI,SAAAC,IAHApwB,KAAAqU,KAAO3Q,EAAeyI,8BACtBnM,KAAAwR,MAAQ9N,EAAe0I,2BAQ3B,OAHIgkB,EAAAlwB,UAAAyU,aAAA,WACI,MAAO,eAEfyb,mBAOI,SAAAC,IAHArwB,KAAAqU,KAAO3Q,EAAe6I,2BACtBvM,KAAAwR,MAAQ9N,EAAe8I,wBAQ3B,OAHI6jB,EAAAnwB,UAAAyU,aAAA,WACI,MAAO,YAEf0b,mBAOI,SAAAC,IAHAtwB,KAAAqU,KAAO3Q,EAAe+I,iCACtBzM,KAAAwR,MAAQ9N,EAAegJ,6BAQ3B,OAHI4jB,EAAApwB,UAAAyU,aAAA,WACI,MAAO,kBAEf2b,mBAQI,SAAAC,IAHAvwB,KAAAqU,KAAO3Q,EAAeiJ,yBACtB3M,KAAAwR,MAAQ9N,EAAekJ,sBAQ3B,OAHI2jB,EAAArwB,UAAAyU,aAAA,WACI,MAAO,UAEf4b,mBAOI,SAAAC,IAHAxwB,KAAAqU,KAAO3Q,EAAemJ,uBACtB7M,KAAAwR,MAAQ9N,EAAeoJ,oBAS3B,OAJI0jB,EAAAtwB,UAAAyU,aAAA,WACI,MAAO,QAGf6b,mBAOI,SAAAC,IAHAzwB,KAAAqU,KAAO3Q,EAAeqJ,wBACtB/M,KAAAwR,MAAQ9N,EAAesJ,qBAS3B,OAJIyjB,EAAAvwB,UAAAyU,aAAA,WACI,MAAO,SAGf8b,KAMAC,GAEI,SAAAA,GAAqB9C,EAAiD/rB,GAAjD7B,KAAA4tB,mBAAAA,EAAiD5tB,KAAA6B,MAAAA,GAsB1E8uB,GAAA,WAQI,SAAAA,EACoB9uB,EACAwS,GADArU,KAAA6B,MAAAA,EACA7B,KAAAqU,KAAAA,EA2BxB,OAjBWsc,EAAAzwB,UAAA2tB,SAAP,SAAgB+C,GAEZ,IAAIC,EAYJ,OANIA,EAFAD,IAAW7uB,EAAAA,YAAY+rB,QAAUlB,GAA4BK,8BAA8BjtB,KAAKqU,QAAUnS,UAE5F0qB,GAA4BK,8BAA8BjtB,KAAKqU,MAG/DrU,KAAKqU,KAGhB,IAAIrU,KAAK6B,MAAK,OAAOgvB,EAAW,KAG/CF,EArCA,GA0CAG,GAAA,WAOI,SAAAA,EAAqBtU,GAAAxc,KAAAwc,IAAAA,EAczB,OALWsU,EAAA5wB,UAAA2tB,SAAP,SAAgB+C,GAEZ,MAAO,IAAI5wB,KAAKwc,IAAG,KAG3BsU,EArBA,GA8CAC,GASI,SAAAA,GACavP,EACAmM,EACAM,GAFAjuB,KAAAwhB,SAAAA,EACAxhB,KAAA2tB,aAAAA,EACA3tB,KAAAiuB,gBAAAA","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class KnoraConstants {\n\n    public static KnoraApi: string = 'http://api.knora.org/ontology/knora-api';\n    public static PathSeparator = '#';\n\n    public static KnoraOntologyPath: string = 'http://www.knora.org/ontology';\n    public static KnoraBase: string = KnoraConstants.KnoraOntologyPath + '/knora-base';\n\n    public static SystemProjectIRI: string = KnoraConstants.KnoraBase + '#SystemProject';\n    public static SystemAdminGroupIRI: string = KnoraConstants.KnoraBase + '#SystemAdmin';\n    public static ProjectAdminGroupIRI: string = KnoraConstants.KnoraBase + '#ProjectAdmin';\n    public static ProjectMemberGroupIRI: string = KnoraConstants.KnoraBase + '#ProjectMember';\n\n    public static KnoraApiV2WithValueObjectPath: string = KnoraConstants.KnoraApi + '/v2' + KnoraConstants.PathSeparator;\n    public static KnoraApiV2SimplePath: string = KnoraConstants.KnoraApi + '/simple/v2' + KnoraConstants.PathSeparator;\n\n    public static SalsahGuiOntology = 'http://api.knora.org/ontology/salsah-gui/v2';\n\n    public static SalsahGuiOrder = KnoraConstants.SalsahGuiOntology + '#guiOrder';\n\n    public static StandoffOntology = 'http://api.knora.org/ontology/standoff/v2';\n\n    public static Resource: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'Resource';\n    public static TextValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'TextValue';\n    public static IntValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'IntValue';\n    public static BooleanValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'BooleanValue';\n    public static UriValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'UriValue';\n    public static DecimalValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DecimalValue';\n    public static DateValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DateValue';\n    public static ColorValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ColorValue';\n    public static GeomValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'GeomValue';\n    public static ListValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ListValue';\n    public static IntervalValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'IntervalValue';\n    public static LinkValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'LinkValue';\n    public static GeonameValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'GeonameValue';\n    public static FileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'FileValue';\n    public static AudioFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'AudioFileValue';\n    public static DDDFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DDDFileValue';\n    public static DocumentFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'DocumentFileValue';\n    public static StillImageFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'StillImageFileValue';\n    public static MovingImageFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'MovingImageFileValue';\n    public static TextFileValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'TextFileValue';\n    public static IsResourceClass: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isResourceClass';\n    public static IsValueClass: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isValueClass';\n    public static ForbiddenResource: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ForbiddenResource';\n    public static XMLToStandoffMapping: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'XMLToStandoffMapping';\n    public static ListNode: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'ListNode';\n\n    public static ObjectType = KnoraConstants.KnoraApiV2WithValueObjectPath + 'objectType';\n    public static ResourceIcon: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'resourceIcon';\n    public static isEditable: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isEditable';\n    public static isLinkProperty: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isLinkProperty';\n    public static isLinkValueProperty: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'isLinkValueProperty';\n    public static hasGeometry = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasGeometry';\n\n    public static schemaName = 'http://schema.org/name';\n    public static schemaNumberOfItems = 'http://schema.org/numberOfItems';\n    public static schemaItemListElement = 'http://schema.org/itemListElement';\n\n\n    public static RdfProperty: string = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#Property';\n    public static RdfsLabel = 'http://www.w3.org/2000/01/rdf-schema#label';\n    public static RdfsComment = 'http://www.w3.org/2000/01/rdf-schema#comment';\n    public static RdfsSubclassOf = 'http://www.w3.org/2000/01/rdf-schema#subClassOf';\n    public static subPropertyOf: string = 'http://www.w3.org/2000/01/rdf-schema#subPropertyOf';\n\n    public static owl: string = 'http://www.w3.org/2002/07/owl';\n\n    public static OwlClass: string = KnoraConstants.owl + '#Class';\n    public static OwlObjectProperty: string = KnoraConstants.owl + '#ObjectProperty';\n    public static OwlDatatypeProperty: string = KnoraConstants.owl + '#DatatypeProperty';\n    public static OwlAnnotationProperty: string = KnoraConstants.owl + '#AnnotationProperty';\n    public static OwlOnProperty: string = KnoraConstants.owl + '#onProperty';\n    public static OwlMaxCardinality: string = KnoraConstants.owl + '#maxCardinality';\n    public static OwlMinCardinality: string = KnoraConstants.owl + '#minCardinality';\n    public static OwlCardinality: string = KnoraConstants.owl + '#cardinality';\n    public static OwlRestriction = KnoraConstants.owl + '#Restriction';\n\n    public static creationDate = KnoraConstants.KnoraApiV2WithValueObjectPath + 'creationDate';\n    public static lastModificationDate = KnoraConstants.KnoraApiV2WithValueObjectPath + 'lastModificationDate';\n    public static hasPermissions = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasPermissions';\n    public static attachedToProject = KnoraConstants.KnoraApiV2WithValueObjectPath + 'attachedToProject';\n    public static attachedToUser = KnoraConstants.KnoraApiV2WithValueObjectPath + 'attachedToUser';\n\n    public static Region = KnoraConstants.KnoraApiV2WithValueObjectPath + 'Region';\n\n    public static ReadTextValueAsHtml: string = 'ReadTextValueAsHtml';\n    public static ReadTextValueAsString: string = 'ReadTextValueAsString';\n    public static ReadTextValueAsXml: string = 'ReadTextValueAsXml';\n    public static ReadDateValue: string = 'ReadDateValue';\n    public static ReadLinkValue: string = 'ReadLinkValue';\n    public static ReadIntegerValue: string = 'ReadIntegerValue';\n    public static ReadDecimalValue: string = 'ReadDecimalValue';\n    public static ReadStillImageFileValue: string = 'ReadStillImageFileValue';\n    public static ReadTextFileValue: string = 'ReadTextFileValue';\n    public static ReadGeomValue: string = 'ReadGeomValue';\n    public static ReadColorValue: string = 'ReadColorValue';\n    public static ReadUriValue: string = 'ReadUriValue';\n    public static ReadBooleanValue: string = 'ReadBooleanValue';\n    public static ReadIntervalValue: string = 'ReadIntervalValue';\n    public static ReadListValue: string = 'ReadListValue';\n\n    public static valueAsString: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'valueAsString';\n\n    public static textValueAsHtml: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'textValueAsHtml';\n    public static textValueAsXml: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'textValueAsXml';\n    public static textValueHasMapping: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'textValueHasMapping';\n\n    public static hasStandoffLinkToValue: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasStandoffLinkToValue';\n\n    public static dateValueHasStartYear: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartYear';\n    public static dateValueHasEndYear: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndYear';\n    public static dateValueHasStartEra: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartEra';\n    public static dateValueHasEndEra: string = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndEra';\n    public static dateValueHasStartMonth = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartMonth';\n    public static dateValueHasEndMonth = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndMonth';\n    public static dateValueHasStartDay = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasStartDay';\n    public static dateValueHasEndDay = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasEndDay';\n    public static dateValueHasCalendar = KnoraConstants.KnoraApiV2WithValueObjectPath + 'dateValueHasCalendar';\n\n    public static linkValueHasTarget = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasTarget';\n    public static linkValueHasSource = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasSource';\n    public static linkValueHasSourceIri = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasSourceIri';\n    public static linkValueHasTargetIri = KnoraConstants.KnoraApiV2WithValueObjectPath + 'linkValueHasTargetIri';\n\n    public static integerValueAsInteger = KnoraConstants.KnoraApiV2WithValueObjectPath + 'intValueAsInt';\n\n    public static decimalValueAsDecimal = KnoraConstants.KnoraApiV2WithValueObjectPath + 'decimalValueAsDecimal';\n\n    public static fileValueAsUrl = KnoraConstants.KnoraApiV2WithValueObjectPath + 'fileValueAsUrl';\n    public static fileValueIsPreview = KnoraConstants.KnoraApiV2WithValueObjectPath + 'fileValueIsPreview';\n    public static fileValueHasFilename = KnoraConstants.KnoraApiV2WithValueObjectPath + 'fileValueHasFilename';\n\n    public static hasStillImageFileValue = KnoraConstants.KnoraApiV2WithValueObjectPath + 'hasStillImageFileValue';\n\n    public static stillImageFileValueHasDimX = KnoraConstants.KnoraApiV2WithValueObjectPath + 'stillImageFileValueHasDimX';\n    public static stillImageFileValueHasDimY = KnoraConstants.KnoraApiV2WithValueObjectPath + 'stillImageFileValueHasDimY';\n    public static stillImageFileValueHasIIIFBaseUrl = KnoraConstants.KnoraApiV2WithValueObjectPath + 'stillImageFileValueHasIIIFBaseUrl';\n\n    public static colorValueAsColor = KnoraConstants.KnoraApiV2WithValueObjectPath + 'colorValueAsColor';\n    public static geometryValueAsGeometry = KnoraConstants.KnoraApiV2WithValueObjectPath + 'geometryValueAsGeometry';\n    public static uriValueAsUri = KnoraConstants.KnoraApiV2WithValueObjectPath + 'uriValueAsUri';\n    public static booleanValueAsBoolean = KnoraConstants.KnoraApiV2WithValueObjectPath + 'booleanValueAsBoolean';\n\n    public static intervalValueHasStart = KnoraConstants.KnoraApiV2WithValueObjectPath + 'intervalValueHasStart';\n    public static intervalValueHasEnd = KnoraConstants.KnoraApiV2WithValueObjectPath + 'intervalValueHasEnd';\n\n    public static listValueAsListNode = KnoraConstants.KnoraApiV2WithValueObjectPath + 'listValueAsListNode';\n    public static listValueAsListNodeLabel = KnoraConstants.KnoraApiV2WithValueObjectPath + 'listValueAsListNodeLabel';\n\n    public static Xsd = 'http://www.w3.org/2001/XMLSchema#';\n\n    public static xsdString = KnoraConstants.Xsd + 'string';\n    public static xsdBoolean = KnoraConstants.Xsd + 'boolean';\n    public static xsdInteger = KnoraConstants.Xsd + 'integer';\n    public static xsdDecimal = KnoraConstants.Xsd + 'decimal';\n    public static xsdUri = KnoraConstants.Xsd + 'anyURI';\n\n    public static resourceSimple = KnoraConstants.KnoraApiV2SimplePath + 'Resource';\n    public static dateSimple = KnoraConstants.KnoraApiV2SimplePath + 'Date';\n    public static intervalSimple = KnoraConstants.KnoraApiV2SimplePath + 'Interval';\n    public static geomSimple = KnoraConstants.KnoraApiV2SimplePath + 'Geom';\n    public static colorSimple = KnoraConstants.KnoraApiV2SimplePath + 'Color';\n    public static geonameSimple = KnoraConstants.KnoraApiV2SimplePath + 'Geoname';\n    public static fileSimple = KnoraConstants.KnoraApiV2SimplePath + 'File';\n\n    public static matchFunction = KnoraConstants.KnoraApiV2SimplePath + 'match';\n\n    public static EqualsComparisonOperator = '=';\n    public static EqualsComparisonLabel = 'is equal to';\n\n    public static NotEqualsComparisonOperator = '!=';\n    public static NotEqualsComparisonLabel = 'is not equal to';\n\n    public static GreaterThanComparisonOperator = '>';\n    public static GreaterThanComparisonLabel = 'is greater than';\n\n    public static GreaterThanEqualsComparisonOperator = '>=';\n    public static GreaterThanEqualsComparisonLabel = 'is greater than equals to';\n\n    public static LessThanComparisonOperator = '<';\n    public static LessThanComparisonLabel = 'is less than';\n\n    public static LessThanEqualsComparisonOperator = '<=';\n    public static LessThanQualsComparisonLabel = 'is less than equals to';\n\n    public static ExistsComparisonOperator = 'E';\n    public static ExistsComparisonLabel = 'exists';\n\n    public static LikeComparisonOperator = 'regex';\n    public static LikeComparisonLabel = 'is like';\n\n    public static MatchComparisonOperator = 'contains';\n    public static MatchComparisonLabel = 'matches';\n\n    public static SalsahLink = 'salsah-link'; // class on an HTML <a> element that indicates a link to a Knora resource\n    public static RefMarker = 'ref-marker'; // class on an HTML element that refers to another element in the same document\n\n    public static GNDPrefix = '(DE-588)';\n    public static GNDResolver = 'http://d-nb.info/gnd/';\n\n    public static VIAFPrefix = '(VIAF)';\n    public static VIAFResolver = 'https://viaf.org/viaf/';\n\n}\n\n\nexport enum KnoraSchema {\n    complex = 0,\n    simple = 1\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n/**\n * Knora-ui core configuration with the server definitions of:\n *  - api: URL of data service e.g. knora: http://localhost:3333\n *  - media: URL of media server service e.g. sipi: http://localhost:1024\n *  - app: URL of the app e.g. salsah: http://localhost:4200\n */\n@JsonObject('KuiCoreConfig')\nexport class KuiCoreConfig {\n\n    /**\n     * (Salsah) name of the app\n     * @type {string}\n     */\n    @JsonProperty('name', String)\n    public name: string = undefined;\n\n    /**\n     * (knora) url of the api\n     * @type {string}\n     */\n    @JsonProperty('api', String)\n    public api: string = undefined;\n\n    /**\n     * (sipi) url of media/file server\n     * @type {string}\n     */\n    @JsonProperty('media', String)\n    public media: string = undefined;\n\n    /**\n     * (salsah) url of the app\n     * @type {undefined}\n     */\n    @JsonProperty('app', String)\n    public app: string = undefined;\n}\n","\nimport { JsonConvert, OperationMode, ValueCheckingMode } from 'json2typescript';\n\n/**\n * Result class used as API url response in ApiService\n */\nexport class ApiServiceResult {\n\n    private static jsonConvert: JsonConvert = new JsonConvert(OperationMode.ENABLE, ValueCheckingMode.ALLOW_NULL);\n\n    /**\n     * Status number\n     */\n    status = 0;\n\n    /**\n     * Status text\n     */\n    statusText = '';\n\n    /**\n     * API url\n     */\n    url = '';\n\n    /**\n     * Body as JSON\n     */\n    body: any;\n\n    /**\n     * Gets the result body as instance of classObject.\n     * @param classObject\n     * @returns {any}\n     * @throws\n     */\n\n    getBody(classObject?: { new(): any }): any {\n        // console.log(this.body);\n        return ApiServiceResult.jsonConvert.deserialize(this.body, classObject);\n    }\n\n\n}\n","\n/**\n * Error class used as API response in ApiService\n */\nexport class ApiServiceError {\n\n    /**\n     * Status number\n     */\n    status = 0;\n\n    /**\n     * Status text\n     */\n    statusText = '';\n\n    /**\n     * API url\n     */\n    url = '';\n\n    /**\n     * Additional error info\n     */\n    errorInfo = '';\n\n}\n","/**\n * Collection of useful utility functions.\n */\nimport {KnoraConstants} from './api/knora-constants';\n\n// @dynamic\nexport class Utils {\n    /**\n     * A regex to validate Emails.\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexEmail = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n\n    /**\n     * A regex to validate URLs.\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexUrl = /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,6}(:[0-9]{1,5})?(\\/.*)?$/i;\n\n    /**\n     * A regex to validate Passwords\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexPassword = /^(?=.*\\d)(?=.*[a-zA-Z]).{8,}$/i;\n\n    /**\n     * A regex to validate Hexadecimal values\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexHex = /^[0-9A-Fa-f]+$/;\n\n    /**\n     * A regex to validate shortname in projects\n     *\n     * @type {RegExp}\n     */\n    public static readonly RegexShortname = /^[a-zA-Z]+\\S*$/;\n\n\n    /**\n     * Lambda function eliminating duplicates in a collection to be passed to [[filter]].\n     *\n     * @param elem element of an Array that is currently being looked at.\n     * @param index current elements index.\n     * @param self reference to the whole Array.\n     * @returns {boolean} true if the same element does not already exist in the Array.\n     */\n    public static filterOutDuplicates = (elem, index: number, self) => {\n\n        // https://stackoverflow.com/questions/16747798/delete-duplicate-elements-from-an-array\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter?v=example\n\n        // returns true if the element's index equals the index of the leftmost element\n        // -> this means that there is no identical element before this index, hence it is not a duplicate\n        // for all other elements, false is returned\n        return index === self.indexOf(elem);\n    };\n\n    /**\n     * Given a Knora entity IRI, gets the ontology Iri.\n     *\n     * @param {string} entityIri an entity Iri.\n     * @return {string} the ontology IRI\n     */\n    public static getOntologyIriFromEntityIri(entityIri: string) {\n\n        // split class Iri on \"#\"\n        const segments: string[] = entityIri.split(KnoraConstants.PathSeparator);\n\n        if (segments.length !== 2) console.error(`Error: ${entityIri} is not a valid entity IRI.`);\n\n        return segments[0];\n\n    }\n\n    /**\n     * Converts a complex knora-api entity Iri to a knora-api simple entity Iri.\n     *\n     * @param {string} complexEntityIri\n     * @returns {string}\n     */\n    public static convertComplexKnoraApiEntityIritoSimple(complexEntityIri: string) {\n\n        // split entity Iri on \"#\"\n        const segments: string[] = complexEntityIri.split('v2' + KnoraConstants.PathSeparator);\n\n        if (segments.length !== 2) console.error(`Error: ${complexEntityIri} is not a valid entity IRI.`);\n\n        // add 'simple' to base path\n        return segments[0] + 'simple/v2' + KnoraConstants.PathSeparator + segments[1];\n\n    }\n\n\n}\n","/**\n * Precision for DateSalsah.\n */\nexport enum Precision {\n    yearPrecision,\n    monthPrecision,\n    dayPrecision\n}\n\n/**\n * Represents a Salsah date object with a precision information.\n */\nexport class DateSalsah {\n\n    private static separator = '-';\n\n    readonly precision: Precision;\n\n    constructor(\n        readonly calendar: string,\n        readonly era: string,\n        readonly year: number,\n        readonly month?: number,\n        readonly day?: number\n    ) {\n        if (this.month === undefined) {\n            // year precision\n            this.precision = Precision.yearPrecision;\n        } else if (this.day === undefined) {\n            // month precision\n            this.precision = Precision.monthPrecision;\n        } else {\n            // day precision\n            this.precision = Precision.dayPrecision;\n        }\n\n    }\n\n    /**\n     * Returns a string representation of the date without the calendar.\n     *\n     * @returns {string}\n     */\n    getDateAsStringWithoutCalendar() {\n\n        let dateString = '(' + this.era + ') ';\n\n        switch (this.precision) {\n\n            case Precision.yearPrecision: {\n                dateString += this.year.toString();\n                break;\n            }\n\n            case Precision.monthPrecision: {\n                dateString += this.year + DateSalsah.separator + this.month;\n                break;\n            }\n\n            case Precision.dayPrecision: {\n                dateString += this.year + DateSalsah.separator + this.month + DateSalsah.separator + this.day;\n                break;\n            }\n\n            default: {\n                break;\n            }\n\n        }\n\n        return dateString;\n    }\n\n    /**\n     * Returns a string representation of the date (with calendar).\n     *\n     * @returns {string}\n     */\n    getDateAsString(): string {\n\n        return this.calendar + ':' + this.getDateAsStringWithoutCalendar();\n    }\n\n}\n\n/**\n * Represents a period (with start date and end date).\n */\nexport class DateRangeSalsah {\n\n    constructor(\n        readonly start: DateSalsah,\n        readonly end: DateSalsah\n    ) {\n    }\n\n    /**\n     * Returns a string representation of the date range (with preceding calendar).\n     *\n     * @returns {string}\n     */\n    getDateAsString() {\n        return this.start.getDateAsString() + ':' + this.end.getDateAsStringWithoutCalendar();\n    }\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('StringLiteral')\nexport class StringLiteral {\n\n    @JsonProperty('value', String, false)\n    public value: string = undefined;\n\n    @JsonProperty('language', String, true)\n    public language: string = '';\n}\n","import { Injectable } from '@angular/core';\nimport { ApiServiceResult, KnoraConstants, Utils } from '../../declarations';\nimport { OntologyService } from './ontology.service';\nimport { forkJoin, from, Observable, of } from 'rxjs';\nimport { map, mergeMap } from 'rxjs/operators';\n\ndeclare let require: any; // http://stackoverflow.com/questions/34730010/angular2-5-minute-install-bug-require-is-not-defined\nconst jsonld = require('jsonld');\n\n/**\n * Represents an error occurred in OntologyCacheService.\n */\nclass OntologyCacheError extends Error {\n\n    constructor(readonly message: string) {\n        super(message);\n    }\n}\n\n\n/**\n * Represents an ontology's metadata.\n */\nexport class OntologyMetadata {\n\n    /**\n     *\n     * @param id Iri identifying the ontology.\n     * @param label a label describing the ontology.\n     */\n    constructor(readonly id: string,\n        readonly label: string) {\n\n    }\n\n}\n\n\n/**\n * Occurrence of a property for a resource class (its cardinality).\n */\nexport enum CardinalityOccurrence {\n    minCard = 0,\n    card = 1,\n    maxCard = 2\n}\n\n\n/**\n * Cardinality of a property for the given resource class.\n */\nexport class Cardinality {\n\n    /**\n     *\n     * @param occurrence type of given occurrence.\n     * @param value numerical value of given occurrence.\n     * @param property the property the given occurrence applies to.\n     */\n    constructor(readonly occurrence: CardinalityOccurrence,\n        readonly value: number,\n        readonly property: string) {\n    }\n}\n\n\n/**\n * A resource class definition.\n */\nexport class ResourceClass {\n\n    /**\n     *\n     * @param id Iri identifying the resource class.\n     * @param icon path to an icon representing the resource class.\n     * @param comment comment on the resource class.\n     * @param label label describing the resource class.\n     * @param cardinalities the resource class's properties.\n     */\n    constructor(readonly id: string,\n        readonly icon: string,\n        readonly comment: string,\n        readonly label: string,\n        readonly cardinalities: Array<Cardinality>) {\n\n    }\n}\n\n\n/**\n * A map of resource class Iris to resource class definitions.\n */\nexport class ResourceClasses {\n    [index: string]: ResourceClass;\n}\n\n\n/**\n * A property definition.\n */\nexport class Property {\n\n    /**\n     *\n     * @param id Iri identifying the property definition.\n     * @param objectType the property's object constraint.\n     * @param comment comment on the property definition.\n     * @param label label describing the property definition.\n     * @param subPropertyOf Iris of properties the given property is a subproperty of.\n     * @param isEditable indicates whether the given property can be edited by the client.\n     * @param isLinkProperty indicates whether the given property is a linking property.\n     * @param isLinkValueProperty indicates whether the given property refers to a link value.\n     */\n    constructor(readonly id: string,\n        readonly objectType: string,\n        readonly comment: string,\n        readonly label: string,\n        readonly subPropertyOf: Array<string>,\n        readonly isEditable: Boolean,\n        readonly isLinkProperty: Boolean,\n        readonly isLinkValueProperty: Boolean) {\n\n    }\n}\n\n\n/**\n * A map of property Iris to property definitions.\n */\nexport class Properties {\n    [index: string]: Property;\n}\n\n\n/**\n * Groups resource classes by the ontology they are defined in.\n *\n * A map of ontology Iris to an array of resource class Iris.\n */\nexport class ResourceClassIrisForOntology {\n    [index: string]: Array<string>;\n}\n\n\n/**\n * Represents cached ontology information (only used by this service internally).\n * This cache is updated whenever new definitions are requested from Knora.\n *\n * Requested ontology information by a service is represented by [[OntologyInformation]].\n */\nclass OntologyCache {\n\n    /**\n     * An array of all existing ontologies.\n     */\n    ontologies: Array<OntologyMetadata>;\n\n    /**\n     * A list of all resource class Iris for a named graph.\n     */\n    resourceClassIrisForOntology: ResourceClassIrisForOntology;\n\n    /**\n     * Resource class definitions.\n     */\n    resourceClasses: ResourceClasses;\n\n    /**\n     * Property definitions.\n     */\n    properties: Properties;\n\n    constructor() {\n        this.ontologies = [];\n\n        this.resourceClassIrisForOntology = new ResourceClassIrisForOntology();\n\n        this.resourceClasses = new ResourceClasses();\n\n        this.properties = new Properties();\n    }\n}\n\n/**\n * Represents ontology information requested from this service.\n *\n * For every request, an instance of this class is returned containing the requested information.\n */\nexport class OntologyInformation {\n\n    /**\n     *\n     * @param resourceClassesForOntology all resource class Iris for a given ontology.\n     * @param {ResourceClasses} resourceClasses resource class definitions.\n     * @param {Properties} properties property definitions.\n     */\n    constructor(\n        private resourceClassesForOntology: ResourceClassIrisForOntology,\n        private resourceClasses: ResourceClasses,\n        private properties: Properties) {\n    }\n\n    /**\n     * Merge the given [[OntologyInformation]] into the current instance,\n     * updating the existing information.\n     *\n     * This is necessary when a service like the search fetches new results\n     * that have to be added to an existing collection.\n     * The existing ontology information must not be lost.\n     *\n     * @params ontologyInfo the given definitions that have to be integrated.\n     */\n    updateOntologyInformation(ontologyInfo: OntologyInformation): void {\n\n        // get new resourceClassIrisForOntology\n        const newResourceClassesForOntology: ResourceClassIrisForOntology = ontologyInfo.getResourceClassForOntology();\n\n        // update new resourceClassIrisForOntology\n        // tslint:disable-next-line:forin\n        for (const newResClassForOntology in newResourceClassesForOntology) {\n            this.resourceClassesForOntology[newResClassForOntology] = newResourceClassesForOntology[newResClassForOntology];\n        }\n\n        // get new resource class definitions\n        const newResourceClasses = ontologyInfo.getResourceClasses();\n\n        // update resourceClasses\n        // tslint:disable-next-line:forin\n        for (const newResClass in newResourceClasses) {\n            this.resourceClasses[newResClass] = newResourceClasses[newResClass];\n        }\n\n        // get new property definitions\n        const newProperties = ontologyInfo.getProperties();\n\n        // update properties\n        // tslint:disable-next-line:forin\n        for (const newProp in newProperties) {\n            this.properties[newProp] = newProperties[newProp];\n        }\n\n    }\n\n    /**\n     * Returns resource class definitions for ontologies.\n     *\n     * @returns all resource class definitions grouped by ontologies.\n     */\n    getResourceClassForOntology(): ResourceClassIrisForOntology {\n        return this.resourceClassesForOntology;\n    }\n\n    /**\n     * Returns all resource classes as an object.\n     *\n     * @returns all resource class definitions as an object.\n     */\n    getResourceClasses(): ResourceClasses {\n        return this.resourceClasses;\n    }\n\n    /**\n     * Returns all resource classes as an array.\n     *\n     * @returns {Array<ResourceClass>}\n     */\n    getResourceClassesAsArray(): Array<ResourceClass> {\n\n        const resClasses: Array<ResourceClass> = [];\n\n        // tslint:disable-next-line:forin\n        for (const resClassIri in this.resourceClasses) {\n            const resClass: ResourceClass = this.resourceClasses[resClassIri];\n            resClasses.push(resClass);\n        }\n\n        return resClasses;\n\n    }\n\n    /**\n     * Returns a resource class's label.\n     *\n     * @param resClass resource class to query for.\n     * @returns the resource class's label.\n     */\n    getLabelForResourceClass(resClass: string): string {\n\n        if (resClass !== undefined) {\n\n            const resClassDef = this.resourceClasses[resClass];\n\n            if (resClassDef !== undefined && resClassDef.label !== undefined) {\n                return resClassDef.label;\n            } else {\n                return resClassDef.id;\n            }\n        } else {\n            console.log('call of OntologyInformation.getLabelForResourceClass without argument resClass');\n        }\n    }\n\n    /**\n     * Returns all properties as an object.\n     *\n     * @returns all properties as an object.\n     */\n    getProperties(): Properties {\n        return this.properties;\n    }\n\n    /**\n     * Returns all properties as an array.\n     *\n     * @returns all properties as an array.\n     */\n    getPropertiesAsArray(): Array<Property> {\n\n        const properties: Array<Property> = [];\n\n        // tslint:disable-next-line:forin\n        for (const propIri in this.properties) {\n            const prop: Property = this.properties[propIri];\n            properties.push(prop);\n        }\n\n        return properties;\n\n    }\n\n    /**\n     * Returns a property's label.\n     *\n     * @param property to query for.\n     * @returns the property's label.\n     */\n    getLabelForProperty(property: string): string {\n\n        if (property !== undefined) {\n\n            const propDef = this.properties[property];\n\n            if (propDef !== undefined && propDef.label !== undefined) {\n                return propDef.label;\n            } else {\n                return propDef.id;\n            }\n        } else {\n            console.log('call of OntologyInformation.getLabelForProperty without argument property');\n        }\n    }\n\n}\n\n\n/**\n * Requests ontology information from Knora and caches it.\n * Other components or services obtain ontology information through this service.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class OntologyCacheService {\n\n    // ontologies ingored by this service\n    private excludedOntologies: Array<string> = [KnoraConstants.SalsahGuiOntology, KnoraConstants.StandoffOntology];\n\n    // properties that Knora is not responsible for and\n    // that have to be ignored because they cannot be resolved at the moment\n    private excludedProperties: Array<string> = [KnoraConstants.RdfsLabel];\n\n    // class definitions that are not be treated as Knora resource classes\n    private nonResourceClasses: Array<string> = [KnoraConstants.ForbiddenResource, KnoraConstants.XMLToStandoffMapping, KnoraConstants.ListNode];\n\n    // central instance that caches all definitions\n    private cacheOntology: OntologyCache = new OntologyCache();\n\n    constructor(private _ontologyService: OntologyService) {\n    }\n\n    /**\n     * Requests the metadata of all ontologies from Knora.\n     *\n     * @returns metadata for all ontologies as JSON-LD (no prefixes, all Iris fully expanded).\n     */\n    private getOntologiesMetadataFromKnora(): Observable<object> {\n\n        return this._ontologyService.getOntologiesMetadata().pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                // http://reactivex.io/documentation/operators/flatmap.html\n                // http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html#instance-method-mergeMap\n                (ontRes: ApiServiceResult) => {\n                    const ontPromises = jsonld.promises;\n                    // compact JSON-LD using an empty context: expands all Iris\n                    const ontPromise = ontPromises.compact(ontRes.body, {});\n\n                    // convert promise to Observable and return it\n                    // https://www.learnrxjs.io/operators/creation/frompromise.html\n                    return from(ontPromise);\n                }\n            )\n        );\n    }\n\n    /**\n     * Requests all entity definitions (resource classes and properties) for the given ontology from Knora.\n     *\n     * @param ontologyIri the Iri of the requested ontology.\n     */\n    private getAllEntityDefinitionsForOntologyFromKnora(ontologyIri: string): Observable<object> {\n\n        return this._ontologyService.getAllEntityDefinitionsForOntologies(ontologyIri).pipe(\n            mergeMap(\n                // this would return an Observable of a PromiseObservable -> combine them into one Observable\n                // http://reactivex.io/documentation/operators/flatmap.html\n                // http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html#instance-method-mergeMap\n                (ontRes: ApiServiceResult) => {\n                    const ontPromises = jsonld.promises;\n                    // compact JSON-LD using an empty context: expands all Iris\n                    const ontPromise = ontPromises.compact(ontRes.body, {});\n\n                    // convert promise to Observable and return it\n                    // https://www.learnrxjs.io/operators/creation/frompromise.html\n                    return from(ontPromise);\n                }\n            )\n        );\n    }\n\n    /**\n     * Writes all the ontologies' metadata returned by Knora to the cache.\n     *\n     * @param {string[]} ontologies metadata of all existing ontologies as JSON-LD.\n     */\n    private convertAndWriteOntologiesMetadataToCache(ontologies: object[]) {\n\n        this.cacheOntology.ontologies = ontologies.map(\n            ontology => {\n                return new OntologyMetadata(ontology['@id'], ontology[KnoraConstants.RdfsLabel]);\n            }\n        );\n    }\n\n    /**\n     * Returns all ontologies' metadata from the cache and returns them.\n     *\n     * @returns metadata of all existing ontologies.\n     */\n    private getAllOntologiesMetadataFromCache(): Array<OntologyMetadata> {\n\n        return this.cacheOntology.ontologies;\n\n    }\n\n    /**\n     * Returns resource class Iris from the ontology response.\n     * `knora-api:Resource` will be excluded.\n     *\n     * @param classDefinitions the class definitions in an ontology response.\n     * @returns resource class Iris from the given class definitions.\n     */\n    private getResourceClassIrisFromOntologyResponse(classDefinitions: Array<object>): string[] {\n        const resourceClassIris: string[] = [];\n\n        for (const classDef of classDefinitions) {\n            const classIri = classDef['@id'];\n\n            // check that class name is not listed as a non resource class and that the isResourceClass flag is present and set to true\n            if (\n                classIri !== KnoraConstants.Resource && this.nonResourceClasses.indexOf(classIri)\n                === -1 && (classDef[KnoraConstants.IsResourceClass] !== undefined && classDef[KnoraConstants.IsResourceClass] === true)) {\n                // it is not a value class, but a resource class definition\n                resourceClassIris.push(classIri);\n            }\n        }\n\n        return resourceClassIris;\n    }\n\n    /**\n     * Converts a Knora response for all entity definitions for the requested ontology\n     * into an internal representation and caches it.\n     *\n     * Knora automatically includes the property definitions referred to in the cardinalities of resource classes.\n     * If they are defined in another ontology, that ontology is requested from Knora too.\n     *\n     * @param {Object} ontology the ontology to be cached.\n     */\n    private convertAndWriteAllEntityDefinitionsForOntologyToCache(ontology: object): void {\n\n        const graph = ontology['@graph'];\n\n        // get all class definitions\n        const classDefs = graph.filter(\n            (entity: Object) => {\n                const entityType = entity['@type'];\n                return entityType === KnoraConstants.OwlClass;\n            });\n\n        // get all property definitions\n        const propertyDefs = graph.filter(\n            (entity: Object) => {\n                const entityType = entity['@type'];\n                return entityType === KnoraConstants.OwlObjectProperty ||\n                    entityType === KnoraConstants.OwlDatatypeProperty ||\n                    entityType === KnoraConstants.OwlAnnotationProperty ||\n                    entityType === KnoraConstants.RdfProperty;\n            });\n\n\n        // cache all resource class Iris belonging to the current ontology\n        this.cacheOntology.resourceClassIrisForOntology[ontology['@id']] = this.getResourceClassIrisFromOntologyResponse(classDefs);\n\n        // write class and property defintions to cache\n        this.convertAndWriteEntityDefinitionsToCache(classDefs, propertyDefs);\n\n    }\n\n    /**\n     * Returns definitions for the requested ontologies from the cache.\n     *\n     * @param ontologyIris the ontologies for which definitions should be returned.\n     * @returns the definitions for the requested ontologies.\n     */\n    private getOntologyInformationFromCache(ontologyIris: string[]): Observable<OntologyInformation> {\n\n        const resourceClassesForOntology = new ResourceClassIrisForOntology();\n\n        // collect resource class Iris for all requested named graphs\n        let allResourceClassIris = [];\n\n        for (const ontologyIri of ontologyIris) {\n\n            if (this.cacheOntology.resourceClassIrisForOntology[ontologyIri] === undefined) {\n                throw new OntologyCacheError(`getResourceClassesForOntologiesFromCache: ontology not found in cache: ${ontologyIri}`);\n            }\n\n            // add information for the given ontology\n            resourceClassesForOntology[ontologyIri] = this.cacheOntology.resourceClassIrisForOntology[ontologyIri];\n\n            // add all resource class Iris of this ontology\n            allResourceClassIris = allResourceClassIris.concat(this.cacheOntology.resourceClassIrisForOntology[ontologyIri]);\n        }\n\n        // get resource class definitions for all requested ontologies\n        return this.getResourceClassDefinitions(allResourceClassIris).pipe(\n            map(\n                resClassDefs => {\n                    return new OntologyInformation(\n                        resourceClassesForOntology, resClassDefs.getResourceClasses(), resClassDefs.getProperties()\n                    );\n                }\n            )\n        );\n\n    }\n\n    /**\n     * Converts a Knora ontology response into an internal representation and caches it.\n     *\n     * @param resourceClassDefinitions the resource class definitions returned by Knora.\n     * @param propertyClassDefinitions the property definitions returned by Knora.\n     */\n    private convertAndWriteEntityDefinitionsToCache(resourceClassDefinitions: Array<object>, propertyClassDefinitions: Array<object>): void {\n\n        // convert and cache each given resource class definition\n        for (const resClass of resourceClassDefinitions) {\n\n            const resClassIri = resClass['@id'];\n\n            // represents all cardinalities of this resource class\n            const cardinalities: Cardinality[] = [];\n\n            if (resClass[KnoraConstants.RdfsSubclassOf] !== undefined) {\n\n                let subclassOfCollection;\n\n                // check if it is a single object or a collection\n                if (!Array.isArray(resClass[KnoraConstants.RdfsSubclassOf])) {\n                    subclassOfCollection = [resClass[KnoraConstants.RdfsSubclassOf]];\n                } else {\n                    subclassOfCollection = resClass[KnoraConstants.RdfsSubclassOf];\n                }\n\n                // get cardinalities for the properties of a resource class\n                for (const curCard of subclassOfCollection) {\n\n                    // make sure it is a cardinality (it could also be an Iri of a superclass)\n                    if (curCard instanceof Object && curCard['@type'] !== undefined && curCard['@type'] === KnoraConstants.OwlRestriction) {\n\n                        let newCard;\n\n                        // get occurrence\n                        if (curCard[KnoraConstants.OwlMinCardinality] !== undefined) {\n                            newCard = new Cardinality(CardinalityOccurrence.minCard, curCard[KnoraConstants.OwlMinCardinality], curCard[KnoraConstants.OwlOnProperty]['@id']);\n                        } else if (curCard[KnoraConstants.OwlCardinality] !== undefined) {\n                            newCard = new Cardinality(CardinalityOccurrence.card, curCard[KnoraConstants.OwlCardinality], curCard[KnoraConstants.OwlOnProperty]['@id']);\n                        } else if (curCard[KnoraConstants.OwlMaxCardinality] !== undefined) {\n                            newCard = new Cardinality(CardinalityOccurrence.maxCard, curCard[KnoraConstants.OwlMaxCardinality], curCard[KnoraConstants.OwlOnProperty]['@id']);\n                        } else {\n                            // no known occurrence found\n                            throw new TypeError(`cardinality type invalid for ${resClass['@id']} ${curCard[KnoraConstants.OwlOnProperty]}`);\n                        }\n\n                        // TODO: get gui order\n\n\n                        // add cardinality\n                        cardinalities.push(newCard);\n\n                    }\n\n                }\n            }\n\n            const resClassObj = new ResourceClass(\n                resClassIri,\n                resClass[KnoraConstants.ResourceIcon],\n                resClass[KnoraConstants.RdfsComment],\n                resClass[KnoraConstants.RdfsLabel],\n                cardinalities\n            );\n\n            // write this resource class definition to the cache object\n            this.cacheOntology.resourceClasses[resClassIri] = resClassObj;\n        }\n\n        // cache the property definitions\n        this.convertAndWriteKnoraPropertyDefinitionsToOntologyCache(propertyClassDefinitions);\n    }\n\n    /**\n     * Gets information about resource classes from the cache.\n     * The answer includes the property definitions referred to by the cardinalities of the given resource classes.\n     *\n     * @param resClassIris the given resource class Iris\n     * @returns {ResourceClasses} an [[OntologyCache]] representing the requested resource classes.\n     */\n    private getResourceClassDefinitionsFromCache(resClassIris: string[]): Observable<OntologyInformation> {\n        // collect the definitions for each resource class from the cache\n\n        const resClassDefs = new ResourceClasses();\n\n        // collect the properties from the cardinalities of the given resource classes\n        const propertyIris = [];\n\n        resClassIris.forEach(\n            resClassIri => {\n                resClassDefs[resClassIri] = this.cacheOntology.resourceClasses[resClassIri];\n\n                this.cacheOntology.resourceClasses[resClassIri].cardinalities.forEach(\n                    card => {\n                        // get property definition for each cardinality\n                        propertyIris.push(card.property);\n                    }\n                );\n            });\n\n        return this.getPropertyDefinitions(propertyIris).pipe(\n            map(\n                propDefs => {\n                    return new OntologyInformation(new ResourceClassIrisForOntology(), resClassDefs, propDefs.getProperties());\n                }\n            )\n        );\n\n    }\n\n    /**\n     * Converts a Knora response for ontology information about properties\n     * into an internal representation and cache it.\n     *\n     * @param propertyDefinitionsFromKnora the property definitions returned by Knora\n     */\n    private convertAndWriteKnoraPropertyDefinitionsToOntologyCache(propertyDefinitionsFromKnora: Array<object>): void {\n\n        // convert and cache each given property definition\n        for (const propDef of propertyDefinitionsFromKnora) {\n\n            const propIri = propDef['@id'];\n\n            let isEditable = false;\n            if (propDef[KnoraConstants.isEditable] !== undefined && propDef[KnoraConstants.isEditable] === true) {\n                isEditable = true;\n            }\n\n            let isLinkProperty = false;\n            if (propDef[KnoraConstants.isLinkProperty] !== undefined && propDef[KnoraConstants.isLinkProperty] === true) {\n                isLinkProperty = true;\n            }\n\n            let isLinkValueProperty = false;\n            if (propDef[KnoraConstants.isLinkValueProperty] !== undefined && propDef[KnoraConstants.isLinkValueProperty] === true) {\n                isLinkValueProperty = true;\n            }\n\n            let subPropertyOf = [];\n            if (propDef[KnoraConstants.subPropertyOf] !== undefined && Array.isArray(propDef[KnoraConstants.subPropertyOf])) {\n                subPropertyOf = propDef[KnoraConstants.subPropertyOf].map((superProp: Object) => superProp['@id']);\n            } else if (propDef[KnoraConstants.subPropertyOf] !== undefined) {\n                subPropertyOf.push(propDef[KnoraConstants.subPropertyOf]['@id']);\n            }\n\n            let objectType;\n            if (propDef[KnoraConstants.ObjectType] !== undefined) {\n                objectType = propDef[KnoraConstants.ObjectType]['@id'];\n            }\n\n            // cache property definition\n            this.cacheOntology.properties[propIri] = new Property(\n                propIri,\n                objectType,\n                propDef[KnoraConstants.RdfsComment],\n                propDef[KnoraConstants.RdfsLabel],\n                subPropertyOf,\n                isEditable,\n                isLinkProperty,\n                isLinkValueProperty\n            );\n\n        }\n\n    }\n\n    /**\n     * Returns property definitions from the cache.\n     *\n     * @param propertyIris the property definitions to be returned.\n     * @returns requested property defintions.\n     */\n    private getPropertyDefinitionsFromCache(propertyIris: string[]): OntologyInformation {\n\n        const propertyDefs = new Properties();\n\n        propertyIris.forEach(\n            propIri => {\n                // ignore non Knora props: if propIri is contained in excludedProperties, skip this propIri\n                if (this.excludedProperties.indexOf(propIri) > -1) {\n                    return;\n                }\n\n                if (this.cacheOntology.properties[propIri] === undefined) {\n                    throw new OntologyCacheError(`getPropertyDefinitionsFromCache: property not found in cache: ${propIri}`);\n                }\n\n                propertyDefs[propIri] = this.cacheOntology.properties[propIri];\n            }\n        );\n\n        return new OntologyInformation(new ResourceClassIrisForOntology(), new ResourceClasses(), propertyDefs);\n\n    }\n\n    /**\n     * Returns metadata about all ontologies.\n     *\n     * @returns metadata about all ontologies.\n     */\n    public getOntologiesMetadata(): Observable<Array<OntologyMetadata>> {\n\n        if (this.cacheOntology.ontologies.length === 0) {\n            // nothing in cache yet, get metadata from Knora\n            return this.getOntologiesMetadataFromKnora().pipe(\n                map(\n                    metadata => {\n                        this.convertAndWriteOntologiesMetadataToCache(metadata['@graph'].filter((onto) => {\n                            // ignore excluded ontologies\n                            return this.excludedOntologies.indexOf(onto['@id']) === -1;\n                        }));\n                        return this.getAllOntologiesMetadataFromCache();\n                    }\n                )\n            );\n        } else {\n            // return metadata from cache\n            return of(this.getAllOntologiesMetadataFromCache());\n        }\n\n    }\n\n\n    /**\n     * Requests the requested ontologies from Knora, adding them to the cache.\n     *\n     * @param ontologyIris Iris of the ontologies to be requested.\n     */\n    private getAndCacheOntologies(ontologyIris: string[]): Observable<any[]> {\n\n        // array to be populated with Observables\n        const observables = [];\n\n        // do a request for each ontology\n        ontologyIris.forEach(ontologyIri => {\n            // push an Observable onto `observables`\n            observables.push(this.getAllEntityDefinitionsForOntologyFromKnora(ontologyIri).pipe(\n                map(\n                    (ontology: object) => {\n                        // write response to cache\n                        this.convertAndWriteAllEntityDefinitionsForOntologyToCache(ontology);\n                    }\n                )\n            ));\n        });\n\n        // forkJoin returns an Observable of an array of results\n        // returned by each Observable contained in `observables`\n        // a subscription to the Observable returned by forkJoin is executed\n        // once all Observables have been completed\n        return forkJoin(observables);\n    }\n\n\n    /**\n     * Returns the entity definitions for the requested ontologies.\n     *\n     * @param ontologyIris Iris of the ontologies to be queried.\n     */\n    public getEntityDefinitionsForOntologies(ontologyIris: string[]): Observable<OntologyInformation> {\n\n        const ontologyIrisToQuery = ontologyIris.filter(\n            ontologyIri => {\n                // return the ontology Iris that are not cached yet\n                return this.cacheOntology.resourceClassIrisForOntology[ontologyIri] === undefined;\n            });\n\n        // get ontologies that are mot cached yet\n        if (ontologyIrisToQuery.length > 0) {\n\n            return this.getAndCacheOntologies(ontologyIrisToQuery).pipe(\n                mergeMap(\n                    results => {\n                        // executed once all ontologies have been cached\n                        return this.getOntologyInformationFromCache(ontologyIris);\n                    }\n                )\n            );\n        } else {\n\n            return this.getOntologyInformationFromCache(ontologyIris);\n        }\n\n    }\n\n    /**\n     * Returns the definitions for the given resource class Iris.\n     * If the definitions are not already in the cache, the will be retrieved from Knora and cached.\n     *\n     * Properties contained in the cardinalities will be returned too.\n     *\n     * @param resourceClassIris the given resource class Iris\n     * @returns the requested resource classes (including properties).\n     */\n    public getResourceClassDefinitions(resourceClassIris: string[]): Observable<OntologyInformation> {\n\n        const resClassIrisToQueryFor: string[] = resourceClassIris.filter(\n            resClassIri => {\n\n                // return the resource class Iris that are not cached yet\n                return this.cacheOntology.resourceClasses[resClassIri] === undefined;\n\n            });\n\n        if (resClassIrisToQueryFor.length > 0) {\n\n            // get a set of ontology Iris that have to be queried to obtain the missing resource classes\n            const ontologyIris: string[] = resClassIrisToQueryFor.map(\n                resClassIri => {\n                    return Utils.getOntologyIriFromEntityIri(resClassIri);\n                }\n            ).filter(Utils.filterOutDuplicates);\n\n            // obtain missing resource class information\n            return this.getAndCacheOntologies(ontologyIris).pipe(\n                mergeMap(\n                    results => {\n\n                        return this.getResourceClassDefinitionsFromCache(resourceClassIris);\n                    }\n                )\n            );\n        } else {\n\n            return this.getResourceClassDefinitionsFromCache(resourceClassIris);\n\n        }\n    }\n\n    /**\n     * Get definitions for the given property Iris.\n     * If the definitions are not already in the cache, the will be retrieved from Knora and cached.\n     *\n     * @param {string[]} propertyIris the Iris of the properties to be returned .\n     * @returns the requested property definitions.\n     */\n    public getPropertyDefinitions(propertyIris: string[]): Observable<OntologyInformation> {\n\n        const propertiesToQuery: string[] = propertyIris.filter(\n            propIri => {\n\n                // ignore non Knora props: if propIri is contained in excludedProperties, skip this propIri\n                if (this.excludedProperties.indexOf(propIri) > -1) {\n                    return false;\n                }\n\n                // return the property Iris that are not cached yet\n                return this.cacheOntology.properties[propIri] === undefined;\n            }\n        );\n\n        if (propertiesToQuery.length > 0) {\n\n            // get a set of ontology Iris that have to be queried to obtain the missing properties\n            const ontologyIris: string[] = propertiesToQuery.map(\n                propIri => {\n                    return Utils.getOntologyIriFromEntityIri(propIri);\n                }\n            ).filter(Utils.filterOutDuplicates);\n\n            // obtain missing resource class information\n            return this.getAndCacheOntologies(ontologyIris).pipe(\n                map(\n                    results => {\n                        if (results) {\n                            return this.getPropertyDefinitionsFromCache(propertyIris);\n                        } else {\n                            throw new Error('Problem with: return this.getPropertyDefinitionsFromCache(propertyIris);');\n                        }\n                    }\n                )\n            );\n        } else {\n            return of(this.getPropertyDefinitionsFromCache(propertyIris));\n        }\n    }\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('AuthenticationResponse')\nexport class AuthenticationResponse {\n\n    @JsonProperty('token', String)\n    public token: string = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { StringLiteral } from '../../shared/strings';\n\n\n@JsonObject('Project')\nexport class Project {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('shortname', String)\n    public shortname: string = undefined;\n\n    @JsonProperty('shortcode', String, true)\n    public shortcode: string = undefined;\n\n    @JsonProperty('longname', String, true)\n    public longname: string = undefined;\n\n    @JsonProperty('description', [StringLiteral], true)\n    public description: StringLiteral[] = [new StringLiteral()];\n\n    @JsonProperty('keywords', [String], true)\n    public keywords: string[] = undefined;\n\n    @JsonProperty('logo', String, true)\n    public logo: string = undefined;\n\n    @JsonProperty('institution', String, true)\n    public institution: string = undefined;\n\n    @JsonProperty('ontologies', [String])\n    public ontologies: string[] = undefined;\n\n    @JsonProperty('status', Boolean)\n    public status: boolean = undefined;\n\n    @JsonProperty('selfjoin', Boolean)\n    public selfjoin: boolean = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Project } from '../projects/project';\n\n@JsonObject('Group')\nexport class Group {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('name', String)\n    public name: string = undefined;\n\n    @JsonProperty('description', String)\n    public description: string = undefined;\n\n    @JsonProperty('project', Project, false)\n    public project: Project = undefined;\n\n    @JsonProperty('status', Boolean)\n    public status: boolean = undefined;\n\n    @JsonProperty('selfjoin', Boolean)\n    public selfjoin: boolean = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Group } from './group';\n\n@JsonObject('GroupResponse')\nexport class GroupResponse {\n\n    @JsonProperty('group', Group)\n    public group: Group = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Group } from './group';\n\n@JsonObject('GroupsResponse')\nexport class GroupsResponse {\n\n    @JsonProperty('groups', [Group])\n    public groups: Group[] = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { StringLiteral } from '../../shared/strings';\n\n@JsonObject('ListInfo')\nexport class ListInfo {\n\n    @JsonProperty('id', String, false)\n    public id: string = undefined;\n\n    @JsonProperty('projectIri', String, false)\n    public projectIri: string = undefined;\n\n    @JsonProperty('labels', [StringLiteral], true)\n    public labels: StringLiteral[] = undefined;\n\n    @JsonProperty('comments', [StringLiteral], true)\n    public comments: StringLiteral[] = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('ListNode')\nexport class ListNode {\n    @JsonProperty('id', String, false)\n    public id: string = undefined;\n\n    @JsonProperty('name', String, true)\n    public name: string = undefined;\n\n    @JsonProperty('label', String, true)\n    public label: string = undefined;\n\n    @JsonProperty('children', [ListNode], true)\n    public children: ListNode[] = undefined;\n\n    @JsonProperty('level', Number, true)\n    public level: number = undefined;\n\n    @JsonProperty('position', Number, true)\n    public position: number = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListInfo } from './list-info';\nimport { ListNode } from './list-node';\n\n@JsonObject('List')\nexport class List {\n\n    @JsonProperty('listinfo', ListInfo, false)\n    public listinfo: ListInfo = undefined;\n\n    @JsonProperty('children', [ListNode], false)\n    public children: ListNode[] = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListInfo } from './list-info';\n\n@JsonObject('ListInfoResponse')\nexport class ListInfoResponse {\n\n    @JsonProperty('listinfo', ListInfo, false)\n    public listinfo: ListInfo = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { StringLiteral } from '../../shared/strings';\n\n@JsonObject('ListNodeInfo')\nexport class ListNodeInfo {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('name', String, true)\n    public name: string = undefined;\n\n    @JsonProperty('projectIri', String, true)\n    public projectIri: string = undefined;\n\n    @JsonProperty('isRootNode', Boolean, true)\n    public isRootNode: boolean = undefined;\n\n    @JsonProperty('labels', [StringLiteral])\n    public labels: StringLiteral[] = undefined;\n\n    @JsonProperty('comments', [StringLiteral])\n    public comments: StringLiteral[] = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListNodeInfo } from './list-node-info';\n\n@JsonObject('ListNodeInfoResponse')\nexport class ListNodeInfoResponse {\n\n    @JsonProperty('nodeinfo', ListNodeInfo, false)\n    public nodeinfo: ListNodeInfo = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { List } from './list';\n\n@JsonObject('ListResponse')\nexport class ListResponse {\n\n    @JsonProperty('list', List, false)\n    public list: List = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { ListNodeInfo } from './list-node-info';\n\n@JsonObject('ListsResponse')\nexport class ListsResponse {\n\n    @JsonProperty('lists', [ListNodeInfo], false)\n    public lists: ListNodeInfo[] = undefined;\n}\n\n\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('OntologyInfoShort')\nexport class OntologyInfoShort {\n\n    @JsonProperty('ontologyIri', String)\n    public ontologyIri: string = undefined;\n\n    @JsonProperty('ontologyName', String)\n    public ontologyName: string = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject('PermissionData')\nexport class PermissionData {\n\n    @JsonProperty('groupsPerProject', Object)\n    public groupsPerProject: any = undefined;\n\n    @JsonProperty('administrativePermissionsPerProject', Object)\n    public administrativePermissionsPerProject: any = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Group } from '../groups/group';\nimport { PermissionData } from '../permissions/permission-data';\nimport { Project } from '../projects/project';\n\n@JsonObject('User')\nexport class User {\n\n    @JsonProperty('id', String)\n    public id: string = undefined;\n\n    @JsonProperty('email', String)\n    public email: string = undefined;\n\n    @JsonProperty('password', String, true)\n    public password: string = undefined;\n\n    @JsonProperty('token', String, true)\n    public token: string = undefined;\n\n    @JsonProperty('givenName', String)\n    public givenName: string = undefined;\n\n    @JsonProperty('familyName', String)\n    public familyName: string = undefined;\n\n    @JsonProperty('status', Boolean)\n    public status: boolean = undefined;\n\n    @JsonProperty('lang', String)\n    public lang: string = undefined;\n\n    @JsonProperty('groups', [Group])\n    public groups: Group[] = undefined;\n\n    @JsonProperty('projects', [Project])\n    public projects: Project[] = undefined;\n\n    @JsonProperty('sessionId', String, true)\n    public sessionId: string = undefined;\n\n    @JsonProperty('permissions', PermissionData)\n    public permissions: PermissionData = undefined;\n\n    @JsonProperty('systemAdmin', Boolean, true)\n    public systemAdmin?: boolean = false;\n\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { User } from '../users/user';\n\n@JsonObject('ProjectMembersResponse')\nexport class ProjectMembersResponse {\n    @JsonProperty('members', [User])\n    public members: User[] = undefined;\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Project } from './project';\n\n\n@JsonObject('ProjectResponse')\nexport class ProjectResponse {\n\n    @JsonProperty('project', Project)\n    public project: Project = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { Project } from './project';\n\n@JsonObject('ProjectsResponse')\nexport class ProjectsResponse {\n\n    @JsonProperty('projects', [Project])\n    public projects: Project[] = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\n\n@JsonObject\nexport class CurrentUser {\n\n    @JsonProperty('name', String)\n    public name: string = undefined;\n\n    @JsonProperty('jwt', String, true)\n    public jwt: string = undefined;\n\n    @JsonProperty('lang', String, true)\n    public lang: string = undefined;\n\n    @JsonProperty('sysAdmin', Boolean)\n    public sysAdmin: boolean = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { User } from './user';\n\n@JsonObject('UsersResponse')\nexport class UsersResponse {\n\n    @JsonProperty('users', [User])\n    public users: User[] = undefined;\n\n}\n","import { JsonObject, JsonProperty } from 'json2typescript';\nimport { User } from './user';\n\n@JsonObject('UserResponse')\nexport class UserResponse {\n\n    @JsonProperty('user', User)\n    public user: User = undefined;\n}\n","import { ReadResource } from '../../../';\nimport { KnoraConstants } from '../../knora-constants';\n\nimport { OntologyInformation } from '../../../../services';\nimport { DateRangeSalsah, DateSalsah } from '../../shared/date';\n\n/**\n * An abstract interface representing any value object.\n */\nexport interface ReadPropertyItem {\n\n    /**\n     * The value object's Iri.\n     */\n    readonly id: string;\n\n    /**\n     * The value object's type.\n     */\n    readonly type: string;\n\n    /**\n     * The property pointing to the value object.\n     */\n    readonly propIri: string;\n\n    /**\n     * Gets the class name of the class that implements this interface.\n     *\n     * @returns {string}\n     */\n    getClassName(): string;\n\n    /**\n     * Gets the value as a string (complexity of the value possibly reduced).\n     *\n     * @returns {string}\n     */\n    getContent(): string;\n}\n\n/**\n * Abstract class representing a text value object with or without markup.\n */\nexport abstract class ReadTextValue implements ReadPropertyItem {\n\n    abstract id: string;\n\n    readonly type: string = KnoraConstants.TextValue;\n\n    abstract propIri: string;\n\n    abstract getClassName(): string;\n\n    abstract getContent(): string;\n}\n\n/**\n * Represents a text value object without markup (mere character string).\n */\nexport class ReadTextValueAsString extends ReadTextValue {\n\n    constructor(readonly id: string, readonly propIri, readonly str: string) {\n        super();\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextValueAsString;\n    }\n\n    getContent() {\n        return this.str;\n    }\n}\n\n/**\n * Represents resources referred to by standoff links.\n */\nexport class ReferredResourcesByStandoffLink {\n    [index: string]: ReadResource;\n}\n\n/**\n * Represents a text value object with markup that has been turned into HTML.\n */\nexport class ReadTextValueAsHtml extends ReadTextValue {\n\n    constructor(readonly id: string, readonly propIri, readonly html: string, readonly referredResources: ReferredResourcesByStandoffLink) {\n        super();\n    }\n\n    /**\n     * Gets information about a resource referred to by a standoff link from a text value.\n     *\n     * @param {string} resourceIri the Iri of the referred resource.\n     * @param {OntologyInformation} ontologyInfo ontology information.\n     * @returns {string} information about the referred resource's class and its label.\n     */\n\n\n    getReferredResourceInfo(resourceIri: string, ontologyInfo: OntologyInformation) {\n        if (this.referredResources !== undefined && this.referredResources[resourceIri] !== undefined) {\n\n            const resClassLabel = ontologyInfo.getLabelForResourceClass(this.referredResources[resourceIri].type);\n\n            return this.referredResources[resourceIri].label + ` (${resClassLabel})`;\n        } else {\n            return 'no information found about referred resource (target of standoff link)';\n        }\n    }\n\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextValueAsHtml;\n    }\n\n    getContent() {\n        return this.html;\n    }\n\n}\n\n/**\n * Represents a text value object with markup as XML.\n */\nexport class ReadTextValueAsXml extends ReadTextValue {\n\n    constructor(readonly id: string, readonly propIri, readonly xml: string, readonly mappingIri: string) {\n        super();\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextValueAsXml;\n    }\n\n    getContent() {\n        return this.xml;\n    }\n\n}\n\n\n/**\n * Represents a date value object.\n */\nexport class ReadDateValue implements ReadPropertyItem {\n\n    constructor(\n        readonly id: string,\n        readonly propIri,\n        readonly calendar: string,\n        readonly startYear: number,\n        readonly endYear: number,\n        readonly startEra: string,\n        readonly endEra: string,\n        readonly startMonth?: number,\n        readonly endMonth?: number,\n        readonly startDay?: number,\n        readonly endDay?: number) {\n    }\n\n    readonly type = KnoraConstants.DateValue;\n\n    private separator = '/';\n\n    getDateSalsah(): DateSalsah | DateRangeSalsah {\n        if (this.startYear === this.endYear && this.startMonth === this.endMonth && this.startDay === this.endDay && this.startEra === this.endEra) {\n            // precise date\n            return new DateSalsah(this.calendar, this.startEra, this.startYear, this.startMonth, this.startDay);\n        } else {\n            // date period\n            return new DateRangeSalsah(new DateSalsah(this.calendar, this.startEra, this.startYear, this.startMonth, this.startDay), new DateSalsah(this.calendar, this.endEra, this.endYear, this.endMonth, this.endDay));\n        }\n\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadDateValue;\n    }\n\n    getContent() {\n        return this.getDateSalsah().getDateAsString();\n    }\n}\n\n/**\n * Represents a link value object (reification).\n */\nexport class ReadLinkValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri, readonly referredResourceIri: string, readonly referredResource?: ReadResource) {\n\n    }\n\n    readonly type = KnoraConstants.LinkValue;\n\n    getReferredResourceInfo(ontologyInfo: OntologyInformation) {\n        if (this.referredResource !== undefined) {\n\n            const resClassLabel = ontologyInfo.getLabelForResourceClass(this.referredResource.type);\n\n            return this.referredResource.label + ` (${resClassLabel})`;\n        } else {\n            return this.referredResourceIri;\n        }\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadLinkValue;\n    }\n\n    getContent() {\n        if (this.referredResource !== undefined) {\n            return this.referredResource.label;\n        } else {\n            return this.referredResourceIri;\n        }\n    }\n}\n\n/**\n * Represents an integer value object.\n */\nexport class ReadIntegerValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri, readonly integer: number) {\n\n    }\n\n    readonly type = KnoraConstants.IntValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadIntegerValue;\n    }\n\n    getContent() {\n        return this.integer.toString();\n    }\n\n}\n\n/**\n * Represents a decimal value object.\n */\nexport class ReadDecimalValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri, readonly decimal: number) {\n\n    }\n\n    readonly type = KnoraConstants.DecimalValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadDecimalValue;\n    }\n\n    getContent() {\n        return this.decimal.toString();\n    }\n}\n\n/**\n * Represents a still image value object.\n */\nexport class ReadStillImageFileValue implements ReadPropertyItem {\n\n    constructor(\n        readonly id: string,\n        readonly propIri,\n        readonly imageFilename: string,\n        readonly imageServerIIIFBaseURL: string,\n        readonly imagePath: string,\n        readonly dimX: number,\n        readonly dimY: number,\n        isPreview?: boolean) {\n\n        this.isPreview = isPreview === undefined ? false : isPreview;\n\n    }\n\n    readonly type = KnoraConstants.StillImageFileValue;\n\n    readonly isPreview: boolean;\n\n    makeIIIFUrl(reduceFactor: number): string {\n\n        if (this.isPreview) {\n            return this.imagePath;\n        } else {\n            let percentage = Math.floor(100 / reduceFactor);\n\n            percentage = (percentage > 0 && percentage <= 100) ? percentage : 50;\n\n            return this.imageServerIIIFBaseURL + '/' + this.imageFilename + '/full/pct:' + percentage.toString() + '/0/default.jpg';\n        }\n\n    }\n\n    getClassName(): string {\n        return KnoraConstants.ReadStillImageFileValue;\n    }\n\n    getContent() {\n        return this.imagePath;\n    }\n}\n\n/**\n * Represents a text representation value object\n */\nexport class ReadTextFileValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri, readonly textFilename: string, readonly textFileURL: string) {\n\n    }\n\n    readonly type = KnoraConstants.TextFileValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadTextFileValue;\n    }\n\n    getContent() {\n        return this.textFileURL;\n    }\n\n}\n\n/**\n * Represents a color value object.\n */\nexport class ReadColorValue implements ReadPropertyItem {\n\n    constructor(readonly id: string,\n        readonly propIri,\n        readonly colorHex: string) {\n    }\n\n    readonly type = KnoraConstants.ColorValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadColorValue;\n    }\n\n    getContent() {\n        return this.colorHex;\n    }\n}\n\n/**\n * Represents a point in a 2D-coordinate system (for geometry values).\n */\nexport class Point2D {\n    constructor(public x: number, public y: number) {\n    }\n}\n\n/**\n * Represents a geometry value parsed from JSON.\n */\nexport class RegionGeometry {\n    constructor(public status: string,\n        public lineColor: string,\n        public lineWidth: number,\n        public points: Point2D[],\n        public type: string,\n        public radius?: Point2D\n    ) {\n    }\n}\n\n/**\n * Represents a geometry value object.\n */\nexport class ReadGeomValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri: string, readonly geometryString: string) {\n\n        const geometryJSON = JSON.parse(geometryString);\n\n        const points: Point2D[] = [];\n        for (const point of geometryJSON.points) {\n            points.push(new Point2D(point.x, point.y));\n        }\n\n        let radius;\n        if (geometryJSON.radius) {\n            radius = new Point2D(geometryJSON.radius.x, geometryJSON.radius.y);\n        }\n\n        this.geometry = new RegionGeometry(\n            geometryJSON.status,\n            geometryJSON.lineColor,\n            geometryJSON.lineWidth,\n            points,\n            geometryJSON.type,\n            radius\n        );\n\n    }\n\n    readonly geometry: RegionGeometry;\n\n    readonly type = KnoraConstants.GeomValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadGeomValue;\n    }\n\n    getContent() {\n        return this.geometryString;\n    }\n}\n\n/**\n * Represents a URI value object.\n */\nexport class ReadUriValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri: string, readonly uri: string) {\n\n    }\n\n    readonly type = KnoraConstants.UriValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadUriValue;\n    }\n\n    getContent() {\n        return this.uri;\n    }\n\n}\n\n/**\n * Represents a Boolean value object.\n */\nexport class ReadBooleanValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri: string, readonly bool: boolean) {\n\n    }\n\n    readonly type = KnoraConstants.BooleanValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadBooleanValue;\n    }\n\n    getContent() {\n        return this.bool.toString();\n    }\n\n}\n\n/**\n * Represents an interval value object.\n */\nexport class ReadIntervalValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri: string, readonly intervalStart: number, readonly intervalEnd: number) {\n\n    }\n\n    readonly type = KnoraConstants.IntervalValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadIntervalValue;\n    }\n\n    getContent() {\n        return this.intervalStart.toString() + '-' + this.intervalEnd;\n    }\n\n}\n\n/**\n * Represents an interval value object.\n */\nexport class ReadListValue implements ReadPropertyItem {\n\n    constructor(readonly id: string, readonly propIri: string, readonly listNodeIri: string, readonly listNodeLabel: string, ) {\n\n    }\n\n    readonly type = KnoraConstants.ListValue;\n\n    getClassName(): string {\n        return KnoraConstants.ReadListValue;\n    }\n\n    getContent() {\n        return this.listNodeLabel;\n    }\n\n}\n","import { ReadProperties } from '../../../';\nimport { StillImageRepresentation } from '../still-image/still-image-representation';\n\n/**\n * Represents a resource and its properties.\n */\nexport class ReadResource {\n\n    /**\n     *\n     * @param {string} id the resource's Iri.\n     * @param {string} type the resource's type (class).\n     * @param {string} label the resource's rdfs:label.\n     * @param {Array<ReadResource>} incomingRegions regions pointing to this resource, if any (possibly to be queried by additional requests).\n     * @param {Array<ReadResource>} incomingStillImageRepresentations still image representations pointing to this resource, if any (possibly to be queried by additional requests).\n     * @param {Array<ReadResource>} incomingLinks resources pointing to this resource, if any (possibly to be queried by additional requests).\n     * @param {StillImageRepresentation[]} stillImageRepresentationsToDisplay  still image representations to be displayed for this resource, if any (possibly to be queried by additional requests).\n     * @param {ReadProperties} properties the resources's properties.\n     */\n    constructor(\n        public readonly id: string,\n        public readonly type: string,\n        public readonly label: string,\n        public incomingRegions: Array<ReadResource>,\n        public incomingStillImageRepresentations: Array<ReadResource>,\n        public incomingLinks: Array<ReadResource>,\n        public stillImageRepresentationsToDisplay: StillImageRepresentation[],\n        public readonly properties?: ReadProperties) {\n    }\n\n}\n","import { ReadResource } from './read-resource';\n\n/**\n * Represents a sequence of resources.\n */\nexport class ReadResourcesSequence {\n\n    /**\n     *\n     * @param {Array<ReadResource>} resources given sequence of resources.\n     * @param {number} numberOfResources number of given resources.\n     */\n    constructor(public readonly resources: Array<ReadResource>, public readonly numberOfResources: number) {\n    }\n\n}\n","import { ReadStillImageFileValue } from '../../../';\nimport { ImageRegion } from './image-region';\n\n/**\n * Represents an image including its regions.\n */\n\nexport class StillImageRepresentation {\n\n    /**\n     *\n     * @param {ReadStillImageFileValue} stillImageFileValue a [[ReadStillImageFileValue]] representing an image.\n     * @param {ImageRegion[]} regions the regions belonging to the image.\n     */\n    constructor(readonly stillImageFileValue: ReadStillImageFileValue, readonly regions: ImageRegion[]) {\n\n    }\n\n}\n","import { ReadGeomValue, ReadResource } from '../../../';\nimport { KnoraConstants } from '../../knora-constants';\n\n/**\n * Represents a region.\n * Contains a reference to the resource representing the region and its geometries.\n */\n\nexport class ImageRegion {\n\n    /**\n     *\n     * @param {ReadResource} regionResource a resource of type Region\n     */\n    constructor(readonly regionResource: ReadResource) {\n\n    }\n\n    /**\n     * Get all geometry information belonging to this region.\n     *\n     * @returns {ReadGeomValue[]}\n     */\n    getGeometries() {\n        return this.regionResource.properties[KnoraConstants.hasGeometry] as ReadGeomValue[];\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { KuiCoreConfig } from './declarations';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        HttpClientModule\n    ],\n    declarations: [],\n    exports: [\n        HttpClientModule\n    ],\n    providers: [\n        {provide: 'config', useValue: KuiCoreConfig}\n    ]\n})\n\n\nexport class KuiCoreModule {\n    /**\n     *\n     * @param {KuiCoreConfig} config\n     * @returns {ModuleWithProviders}\n     */\n    static forRoot(config: KuiCoreConfig): ModuleWithProviders {\n        // get the app environment configuration here\n        // console.log(config);\n        return {\n            ngModule: KuiCoreModule,\n            providers: [\n                {provide: 'config', useValue: config}\n            ]\n        };\n    }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { throwError } from 'rxjs/internal/observable/throwError';\nimport { catchError, map } from 'rxjs/operators';\nimport { ApiServiceError, ApiServiceResult, KuiCoreConfig } from '../declarations';\n\n\n@Injectable({\n    providedIn: 'root',\n})\nexport abstract class ApiService {\n\n    /**\n     *  if is loading, set it true;\n     *  it can be used in components\n     *  for progress loader element\n     */\n    loading = false;\n\n    protected constructor(public http: HttpClient,\n        @Inject('config') public config: KuiCoreConfig) {\n    }\n\n    /**\n     * GET\n     *\n     * @param {string} path\n     * @returns {Observable<any>}\n     */\n    httpGet(path: string, params?: any): Observable<any> {\n\n        this.loading = true;\n\n        return this.http.get(this.config.api + path, { observe: 'response', params: params }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                const result = new ApiServiceResult();\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n\n                return result;\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                return this.handleRequestError(error);\n            })\n        );\n\n    }\n\n    /**\n     * POST\n     *\n     * @param {string} path\n     * @param body\n     * @returns {Observable<any>}\n     */\n    httpPost(path: string, body?: any): Observable<any> {\n\n        this.loading = true;\n\n        // const headers = this.setHeaders(); --> this is now done by the interceptor from @knora/authentication\n\n        return this.http.post(this.config.api + path, body, { observe: 'response' }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                const result = new ApiServiceResult();\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n                return result;\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                // console.error(error);\n\n                return this.handleRequestError(error);\n            })\n        );\n\n    }\n\n    /**\n     * PUT\n     *\n     * @param {string} path\n     * @param body\n     * @returns {Observable<any>}\n     */\n    httpPut(path: string, body?: any): Observable<any> {\n\n        this.loading = true;\n\n        // const headers = this.setHeaders(); --> this is now done by the interceptor from @knora/authentication\n\n        return this.http.put(this.config.api + path, body, { observe: 'response' }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                // console.log(response);\n\n                const result = new ApiServiceResult();\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n                return result;\n\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                // console.error(error);\n\n                return this.handleRequestError(error);\n            })\n        );\n    }\n\n    /**\n     * DELETE\n     *\n     * @param {string} path\n     * @returns {Observable<any>}\n     */\n    httpDelete(path: string): Observable<any> {\n\n        this.loading = true;\n\n        // const headers = this.setHeaders(); --> this is now done by the interceptor from @knora/authentication\n\n        return this.http.delete(this.config.api + path, { observe: 'response' }).pipe(\n            map((response: HttpResponse<any>): ApiServiceResult => {\n                this.loading = false;\n\n                // console.log(response);\n\n                const result = new ApiServiceResult();\n                result.status = response.status;\n                result.statusText = response.statusText;\n                result.url = path;\n                result.body = response.body;\n                return result;\n\n            }),\n            catchError((error: HttpErrorResponse) => {\n                this.loading = false;\n\n                // console.error(error);\n\n                return this.handleRequestError(error);\n            })\n        );\n    }\n\n\n    /**\n     * handle request error in case of server error\n     *\n     * @param {HttpErrorResponse} error\n     * @returns {Observable<ApiServiceError>}\n     */\n    protected handleRequestError(error: HttpErrorResponse): Observable<ApiServiceError> {\n        // console.error(error);\n        const serviceError = new ApiServiceError();\n        serviceError.status = error.status;\n        serviceError.statusText = error.statusText;\n        serviceError.errorInfo = error.message;\n        serviceError.url = error.url;\n        return throwError(serviceError);\n    }\n\n    /**\n     * handle json error in case of type error in json response (json2typescript)\n     *\n     * @param error\n     * @returns {Observable<ApiServiceError>}\n     */\n    protected handleJsonError(error: any): Observable<ApiServiceError> {\n\n        if (error instanceof ApiServiceError) return throwError(error);\n\n        const serviceError = new ApiServiceError();\n        serviceError.status = -1;\n        serviceError.statusText = 'Invalid JSON';\n        serviceError.errorInfo = error;\n        serviceError.url = '';\n        return throwError(serviceError);\n\n    }\n\n    // the following method is replaced by the JwtInterceptor\n    /*\n    protected setHeaders(): HttpHeaders {\n        let currentUser: CurrentUser;\n        let subscription: Subscription;\n\n        // get key from local storage\n        const key = localStorage.getItem('session_id');\n\n        if (key && key !== null) {\n            subscription = this._acs.get(key)\n                .subscribe(\n                    (result: any) => {\n                        currentUser = result;\n                        console.log('api service -- setHeaders -- currentUser from acs', currentUser);\n                    },\n                    (error: any) => {\n                        console.error(error);\n                        return new HttpHeaders();\n                    }\n                );\n\n            if (currentUser) {\n                return new HttpHeaders({\n                    'Authorization': `Bearer ${currentUser.token}`\n                });\n            }\n        } else {\n            return new HttpHeaders();\n        }\n\n    }\n    */\n    /*\n    /!**\n     * Appends to existing options if they exist.\n     * @param {HttpHeaders} options\n     * @returns {HttpHeaders}\n     *!/\n    protected appendToOptions(options: any): any {\n\n        let headers: HttpHeaders;\n\n        if (!options) {\n            headers = this.appendAuthorizationHeader();\n            console.log('2a) ', headers);\n            options = {\n                headers\n            };\n            console.log('2b) ', options);\n\n        } else {\n            // have options\n            if (!options['headers']) {\n                // no headers set\n                options['headers'] = new HttpHeaders();\n                console.log('3: ', options);\n            } else {\n                // have headers, need to append to those\n                options['headers'] = this.appendAuthorizationHeader(options['headers']);\n                console.log('4: ', options);\n            }\n        }\n        return options;\n    }\n*/\n    /*\n    /!**\n     * Appends to existing headers if they exist.\n     * @param {Headers} headers\n     * @returns {Headers}\n     *!/\n    protected appendAuthorizationHeader(headers?: HttpHeaders): HttpHeaders {\n\n\n        if (!headers) {\n            headers = new HttpHeaders();\n        }\n\n        if (JSON.parse(localStorage.getItem('currentUser'))) {\n            const token = JSON.parse(localStorage.getItem('currentUser')).token;\n\n//            headers.append('Authorization', 'Bearer ' + token);\n\n            headers['Authorization'] = `Bearer ${JSON.parse(localStorage.getItem('currentUser')).token}`;\n        }\n        return headers;\n    }\n*/\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { ApiServiceResult, Group, GroupResponse, GroupsResponse } from '../../declarations/';\nimport { ApiService } from '../api.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class GroupsService extends ApiService {\n\n    private path: string = '/admin/groups';\n\n    /**\n     *\n     * @returns {Observable<Group[]>}\n     */\n    getAllGroups(): Observable<Group[]> {\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(GroupsResponse).groups),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} iri\n     * @returns {Observable<Group>}\n     */\n    getGroupByIri(iri: string): Observable<Group> {\n        this.path += '/' + encodeURIComponent(iri);\n\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(GroupResponse).group),\n            catchError(this.handleJsonError)\n        );\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { catchError, map } from 'rxjs/operators';\n\nimport {\n    ApiServiceResult,\n    List,\n    ListCreatePayload,\n    ListInfo,\n    ListInfoResponse,\n    ListInfoUpdatePayload,\n    ListNodeInfo,\n    ListNodeInfoResponse,\n    ListResponse,\n    ListsResponse\n} from '../../declarations';\n\nimport { ApiService } from '../api.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ListsService extends ApiService {\n\n    private path: string = '/admin/lists';\n\n\n    // ------------------------------------------------------------------------\n    // GET\n    // ------------------------------------------------------------------------\n\n    /**\n     *\n     * @param {string} projectIri (optional)\n     * @returns {Observable<ListNodeInfo[]>}\n     */\n    getLists(projectIri?: string): Observable<ListNodeInfo[]> {\n        if (projectIri) {\n            this.path += '?projectIri=' + encodeURIComponent(projectIri);\n        }\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListsResponse).lists),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} listIri\n     * @returns {Observable<List>}\n     */\n    getList(listIri: string): Observable<List> {\n        return this.httpGet(this.path + '/' + encodeURIComponent(listIri)).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListResponse).list),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} listIri\n     * @returns {Observable<ListInfo>}\n     */\n    getListInfo(listIri: string): Observable<ListInfo> {\n        this.path += '/infos/' + encodeURIComponent(listIri);\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListInfoResponse).listinfo),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} nodeIri\n     * @returns {Observable<ListNodeInfo>}\n     */\n    getListNodeInfo(nodeIri: string): Observable<ListNodeInfo> {\n        this.path += '/nodes/' + encodeURIComponent(nodeIri);\n        return this.httpGet(this.path).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListNodeInfoResponse).nodeinfo),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // POST\n    // ------------------------------------------------------------------------\n\n    /**\n     *\n     * @param {ListCreatePayload} payload\n     * @returns {Observable<List>}\n     */\n    createList(payload: ListCreatePayload): Observable<List> {\n        return this.httpPost(this.path, payload).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListResponse).list),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // PUT\n    // ------------------------------------------------------------------------\n\n    /**\n     *\n     * @param {ListInfoUpdatePayload} payload\n     * @returns {Observable<ListInfo>}\n     */\n    updateListInfo(payload: ListInfoUpdatePayload): Observable<ListInfo> {\n        this.path += '/infos/' + encodeURIComponent(payload.listIri);\n        return this.httpPut(this.path, payload).pipe(\n            map((result: ApiServiceResult) => result.getBody(ListInfoResponse).listinfo),\n            catchError(this.handleJsonError)\n        );\n\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nimport { ApiServiceResult, Project, ProjectMembersResponse, ProjectResponse, ProjectsResponse, User } from '../../declarations/';\n\nimport { ApiService } from '../api.service';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProjectsService extends ApiService {\n\n    // ------------------------------------------------------------------------\n    // GET\n    // ------------------------------------------------------------------------\n\n    /**\n     * returns a list of all projects\n     *\n     * @returns {Observable<Project[]>}\n     */\n    getAllProjects(): Observable<Project[]> {\n        return this.httpGet('/admin/projects').pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectsResponse).projects),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * returns a project object\n     *\n     * @param {string} iri\n     * @returns {Observable<Project>}\n     */\n    getProjectByIri(iri: string): Observable<Project> {\n        const url: string = '/admin/projects/' + encodeURIComponent(iri);\n        return this.getProject(url);\n    }\n\n    /**\n     * returns a project object\n     *\n     * @param {string} shortname\n     * @returns {Observable<Project>}\n     */\n    getProjectByShortname(shortname: string): Observable<Project> {\n        const url = '/admin/projects/' + shortname + '?identifier=shortname';\n        return this.getProject(url);\n    }\n\n    /**\n     * returns a project object\n     *\n     * @param {string} shortcode\n     * @returns {Observable<Project>}\n     */\n    getProjectByShortcode(shortcode: string): Observable<Project> {\n        const url = '/admin/projects/' + shortcode + '?identifier=shortcode';\n        return this.getProject(url);\n    }\n\n    /**\n     * Helper method combining project retrieval\n     *\n     * @param {string} url\n     * @returns {Observable<Project>}\n     */\n    protected getProject(url: string): Observable<Project> {\n        return this.httpGet(url).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     * returns all project members\n     * project identifier is project id (iri)\n     *\n     * @param {string} iri\n     * @returns {Observable<User[]>}\n     */\n    getProjectMembersByIri(iri: string): Observable<User[]> {\n        const url = '/admin/projects/members/' + encodeURIComponent(iri);\n        return this.getProjectMembers(url);\n    }\n\n    /**\n     * returns all project members\n     * project identifier is shortname\n     *\n     * @param {string} shortname\n     * @returns {Observable<User[]>}\n     */\n    getProjectMembersByShortname(shortname: string): Observable<User[]> {\n        const url = '/admin/projects/members/' + shortname + '?identifier=shortname';\n        return this.getProjectMembers(url);\n    }\n\n    /**\n     * returns all project members\n     * project identifier is shortcode\n     *\n     * @param {string} shortcode\n     * @returns {Observable<User[]>}\n     */\n    getProjectMembersByShortcode(shortcode: string): Observable<User[]> {\n        const url = '/admin/projects/members/' + shortcode + '?identifier=shortcode';\n        return this.getProjectMembers(url);\n    }\n\n    /**\n     * Helper method combining project member retrieval\n     *\n     * @param {string} url\n     * @returns {Observable<User[]>}\n     */\n    protected getProjectMembers(url: string): Observable<User[]> {\n        return this.httpGet(url).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectMembersResponse).members),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // POST\n    // ------------------------------------------------------------------------\n\n    /**\n     * create new project\n     *\n     * @param data\n     * @returns {Observable<Project>}\n     */\n    createProject(data: any): Observable<Project> {\n        const url: string = '/admin/projects';\n        return this.httpPost(url, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    // ------------------------------------------------------------------------\n    // PUT\n    // ------------------------------------------------------------------------\n\n    /**\n     * edit project data\n     *\n     * @param {string} iri\n     * @param data\n     * @returns {Observable<Project>}\n     */\n    updateProject(iri: string, data: any): Observable<Project> {\n        const url: string = '/admin/projects/' + encodeURIComponent(iri);\n\n        return this.httpPut(url, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    /**\n     * activate project (if it was deleted)\n     *\n     * @param {string} iri\n     * @returns {Observable<Project>}\n     */\n    activateProject(iri: string): Observable<Project> {\n        const data: any = {\n            status: true\n        };\n\n        const url: string = '/admin/projects/' + encodeURIComponent(iri);\n\n        return this.httpPut(url, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // DELETE\n    // ------------------------------------------------------------------------\n\n    /**\n     * Delete (set inactive) project\n     *\n     * @param {string} iri\n     * @returns {Observable<Project>}\n     */\n    deleteProject(iri: string): Observable<Project> {\n        const url: string = '/admin/projects/' + encodeURIComponent(iri);\n\n        return this.httpDelete(url).pipe(\n            map((result: ApiServiceResult) => result.getBody(ProjectResponse).project),\n            catchError(this.handleJsonError)\n        );\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { ApiService } from '../api.service';\nimport {\n    ApiServiceResult,\n    User,\n    UserResponse,\n    UsersResponse\n} from '../../declarations/';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class UsersService extends ApiService {\n\n    usersUrl: string = this.config.api + '/admin/users';\n\n\n    // ------------------------------------------------------------------------\n    // GET\n    // ------------------------------------------------------------------------\n\n    /**\n     * returns a list of all users\n     *\n     * @returns {Observable<User[]>}\n     */\n    getAllUsers(): Observable<User[]> {\n        return this.httpGet('/admin/users').pipe(\n            map((result: ApiServiceResult) => result.getBody(UsersResponse).users),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} email\n     * @returns {Observable<User>}\n     */\n    getUserByEmail(email: string): Observable<User> {\n        const path = '/admin/users/' + encodeURIComponent(email) + '?identifier=email';\n        return this.getUser(path);\n    }\n\n    /**\n     *\n     * @param {string} iri\n     * @returns {Observable<User>}\n     */\n    getUserByIri(iri: string): Observable<User> {\n        const path = '/admin/users/' + encodeURIComponent(iri);\n        return this.getUser(path);\n    }\n\n    /**\n     * Helper method combining user retrieval\n     *\n     * @param {string} path\n     * @returns {Observable<User>}\n     */\n    protected getUser(path: string): Observable<User> {\n        return this.httpGet(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // POST\n    // ------------------------------------------------------------------------\n\n    /**\n     *\n     * @param data\n     * @returns {Observable<User>}\n     */\n    createUser(data: any): Observable<User> {\n        const path = '/admin/users';\n        return this.httpPost(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns {Observable<User>}\n     */\n    addUserToProject(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/projects/' + encodeURIComponent(userIri) + '/' + encodeURIComponent(projectIri);\n        return this.httpPost(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns {Observable<User>}\n     */\n    addUserToProjectAdmin(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/projects-admin/' + encodeURIComponent(userIri) + '/' + encodeURIComponent(projectIri);\n        return this.httpPost(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns {Observable<User>}\n     */\n    removeUserFromProjectAdmin(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/projects-admin/' + encodeURIComponent(userIri) + '/' + encodeURIComponent(projectIri);\n        return this.httpDelete(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n\n    // ------------------------------------------------------------------------\n    // PUT\n    // ------------------------------------------------------------------------\n\n\n    /**\n     *\n     * @param {string} userIri\n     * @param data\n     * @returns {Observable<User>}\n     */\n    addUserToSystemAdmin(userIri: string, data: any): Observable<User> {\n        const path = '/admin/users/' + encodeURIComponent(userIri);\n        return this.httpPut(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    /**\n     *\n     * @param {string} userIri\n     * @returns {Observable<User>}\n     */\n    activateUser(userIri: string): Observable<User> {\n        const data: any = {\n            status: true\n        };\n        return this.updateUser(userIri, data);\n    }\n\n\n    /**\n     * Update own password\n     *\n     * @param {string} userIri\n     * @param {string} oldPassword\n     * @param {string} newPassword\n     * @returns {Observable<User>}\n     */\n    updateOwnPassword(userIri: string, oldPassword: string, newPassword: string): Observable<User> {\n        const data = {\n            newPassword: newPassword,\n            requesterPassword: oldPassword\n        };\n        return this.updateUser(userIri, data);\n    }\n\n\n    updateUsersPassword(userIri: string, requesterPassword: string, newPassword: string): Observable<User> {\n        const data = {\n            newPassword: newPassword,\n            requesterPassword: requesterPassword\n        };\n        return this.updateUser(userIri, data);\n    }\n\n\n    /**\n     *\n     * @param {string} userIri\n     * @param data\n     * @returns {Observable<User>}\n     */\n    updateUser(userIri: string, data: any): Observable<User> {\n\n        const path = '/admin/users/' + encodeURIComponent(userIri);\n\n        return this.httpPut(path, data).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n\n    // ------------------------------------------------------------------------\n    // DELETE\n    // ------------------------------------------------------------------------\n\n    /**\n     *\n     * @param {string} userIri\n     * @returns {Observable<User>}\n     */\n    deleteUser(userIri: string): Observable<User> {\n        const path = '/admin/users/' + encodeURIComponent(userIri);\n        return this.httpDelete(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n\n    }\n\n    /**\n     *\n     * @param {string} userIri\n     * @param {string} projectIri\n     * @returns {Observable<User>}\n     */\n    removeUserFromProject(userIri: string, projectIri: string): Observable<User> {\n        const path = '/admin/users/projects/' + encodeURIComponent(userIri) + '/' + encodeURIComponent(projectIri);\n        return this.httpDelete(path).pipe(\n            map((result: ApiServiceResult) => result.getBody(UserResponse).user),\n            catchError(this.handleJsonError)\n        );\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LanguageService {\n\n  private subject = new Subject<any>();\n\n  setLanguage(lang: string) {\n    this.subject.next({ var: lang });\n  }\n  getLanguage(): Observable<any> {\n    return this.subject.asObservable();\n  }\n\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { KuiCoreConfig } from '../../declarations';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StatusMsgService {\n\n  constructor(private _http: HttpClient,\n    @Inject('config') public config: KuiCoreConfig) {\n  }\n\n  /**\n  * this method get the status messages from the statusMsg.json file\n  * which are defined here: https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\n  * and here: http://www.w3schools.com/tags/ref_httpmessages.asp\n  *\n  */\n  getStatusMsg(): Observable<any> {\n\n    return this._http.get(this.config.app + '/assets/i18n/statusMsg.json')\n      .pipe(map(\n        (res: any) => {\n          return res;\n        },\n        err => {\n          console.error(err);\n        }\n      )\n      );\n\n  };\n}\n","import { Injectable } from '@angular/core';\nimport { ApiService } from '../api.service';\nimport { Observable } from 'rxjs';\nimport { ApiServiceResult, UsersResponse } from '../../declarations';\nimport { catchError, map, mergeMap } from 'rxjs/operators';\n\n/**\n * Requests ontology information from Knora.\n */\n@Injectable({\n    providedIn: 'root',\n})\nexport class OntologyService extends ApiService {\n\n    /**\n     * Requests the metadata about all existing ontologies from Knora's ontologies route.\n     *\n     * @returns the metadata of all ontologies.\n     */\n    getOntologiesMetadata(): Observable<ApiServiceResult> {\n        return this.httpGet('/v2/ontologies/metadata');\n    }\n\n    /**\n     * Requests all entity definitions for the given ontologies from Knora's ontologies route.\n     *\n     * @param ontologyIri the Iris of the named graphs whose resource classes are to be returned.\n     * @returns the requested ontology.\n     */\n    getAllEntityDefinitionsForOntologies(ontologyIri: string): Observable<ApiServiceResult> {\n        return this.httpGet('/v2/ontologies/allentities/' + encodeURIComponent(ontologyIri));\n    }\n\n    /**\n     * Requests information about the given resource classes from Knora's ontologies route.\n     *\n     * @param resourceClassIris the Iris of the resource classes to be queried.\n     * @returns the requested resource class definitions.\n     */\n    getResourceClasses(resourceClassIris: Array<string>): Observable<ApiServiceResult> {\n\n        if (resourceClassIris.length === 0) {\n            // no resource class Iris are given to query for, return a failed Observer\n            return Observable.create(observer => observer.error('No resource class Iris given for call of OntologyService.getResourceClasses'));\n        }\n\n        let resClassUriEnc = '';\n\n        resourceClassIris.forEach(function (resClassIri) {\n            resClassUriEnc = resClassUriEnc + '/' + encodeURIComponent(resClassIri.toString());\n        });\n\n        return this.httpGet('/v2/ontologies/classes' + resClassUriEnc);\n    }\n\n    /**\n     * Requests properties from Knora's ontologies route.\n     *\n     * @param propertyIris the Iris of the properties to be queried.\n     * @returns the requested properties.\n     */\n    getProperties(propertyIris: string[]): Observable<ApiServiceResult> {\n\n        if (propertyIris.length === 0) {\n            // no resource class Iris are given to query for, return a failed Observer\n            return Observable.create(observer => observer.error('No property Iris given for call of OntologyService.getProperties'));\n        }\n\n        let propertiesUriEnc = '';\n\n        propertyIris.forEach(function (resClassIri) {\n            propertiesUriEnc = propertiesUriEnc + '/' + encodeURIComponent(resClassIri.toString());\n        });\n\n        return this.httpGet('/v2/ontologies/properties' + propertiesUriEnc);\n\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\n\nimport { ApiService } from '../api.service';\nimport { ApiServiceResult } from '../../declarations';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ResourceService extends ApiService {\n\n    /**\n     * Given the Iri, requests the representation of a resource.\n     *\n     * @param iri Iri of the resource (already URL encoded).\n     * @returns {Observable<any>}\n     */\n\n    getResource(iri): Observable<ApiServiceResult> {\n        // console.log('IRI from resource service: ', iri);\n        return this.httpGet('/v2/resources/' + encodeURIComponent(iri));\n    }\n\n    /*\n    // TODO: we should use the ApiService correctly. But right now it doesn't work\n    getResource(iri): Observable<ReadResource> {\n        return this.httpGet('/v2/resources/' + encodeURIComponent(iri)).pipe(\n            map((result: ApiServiceResult) => result.getBody(ReadResource)),\n            catchError(this.handleJsonError)\n        );\n    }\n    */\n\n    // TODO: post, put, delete\n}\n","import { Injectable } from '@angular/core';\nimport { ApiService } from '../api.service';\nimport { Observable } from 'rxjs';\nimport { ApiServiceResult } from '../../declarations';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class SearchService extends ApiService {\n\n    /**\n     * Perform a fulltext search.\n     *\n     * @param searchTerm the term to search for.\n     * @param offset the offset to be used (for paging, first offset is 0).\n     * @returns {Observable<ApiServiceResult>}\n     */\n    doFulltextSearch(searchTerm: string, offset: number = 0): Observable<ApiServiceResult> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearch'));\n        }\n\n        return this.httpGet('/v2/search/' + searchTerm + '?offset=' + offset);\n    }\n\n    /**\n     * Perform a fulltext search count query.\n     *\n     * @param searchTerm the term to search for.\n     * @returns {Observable<ApiServiceResult>}\n     */\n    doFulltextSearchCountQuery(searchTerm: string): Observable<ApiServiceResult> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearchCountQuery'));\n        }\n\n        return this.httpGet('/v2/search/count/' + searchTerm);\n    }\n\n    /**\n     * Perform an extended search.\n     *\n     * @param sparqlString the Sparql query string to be sent to Knora.\n     * @returns {Observable<any>}\n     */\n    doExtendedSearch(sparqlString: string): Observable<ApiServiceResult> {\n\n        if (sparqlString === undefined || sparqlString.length === 0) {\n            return Observable.create(observer => observer.error('No Sparql string given for call of SearchService.doExtendedSearch'));\n        }\n\n        // return this.httpGet('/v2/searchextended/' + encodeURIComponent(sparqlString));\n        return this.httpPost('/v2/searchextended', sparqlString);\n\n    }\n\n    /**\n     * Perform an extended search count query.\n     *\n     * @param sparqlString the Sparql query string to be sent to Knora.\n     * @returns {Observable<ApiServiceResult>}\n     */\n    doExtendedSearchCountQuery(sparqlString: string): Observable<ApiServiceResult> {\n\n        if (sparqlString === undefined || sparqlString.length === 0) {\n            return Observable.create(observer => observer.error('No Sparql string given for call of SearchService.doExtendedSearchCountQuery'));\n        }\n\n        // return this.httpGet('/v2/searchextended/count/' + encodeURIComponent(sparqlString));\n        return this.httpPost('/v2/searchextended/count', sparqlString);\n    }\n\n    /**\n     * Perform a search by a resource's rdfs:label.\n     *\n     * @param {string} searchTerm the term to search for.\n     * @param resourceClassIRI restrict search to given resource class.\n     * @param projectIri restrict search to given project.\n     * @returns {Observable<ApiServiceResult>}\n     */\n    searchByLabel(searchTerm: string, resourceClassIRI?: string, projectIri?: string): Observable<ApiServiceResult> {\n\n        if (searchTerm === undefined || searchTerm.length === 0) {\n            return Observable.create(observer => observer.error('No search term given for call of SearchService.doFulltextSearch'));\n        }\n\n        const params = {};\n\n        if (resourceClassIRI !== undefined) {\n            params['limitToResourceClass'] = resourceClassIRI;\n        }\n\n        if (projectIri !== undefined) {\n            params['limitToProject'] = projectIri;\n        }\n\n        // httpGet() expects only one argument, not 2\n        return this.httpGet('/v2/searchbylabel/' + encodeURIComponent(searchTerm), params);\n        // return this.httpGet('/v2/searchbylabel/' + encodeURIComponent(searchTerm));\n\n    }\n}\n","import {\n    KnoraConstants,\n    ReadBooleanValue,\n    ReadColorValue,\n    ReadDateValue,\n    ReadDecimalValue,\n    ReadGeomValue,\n    ReadIntegerValue,\n    ReadIntervalValue,\n    ReadLinkValue,\n    ReadListValue,\n    ReadProperties,\n    ReadPropertyItem,\n    ReadResource,\n    ReadResourcesSequence,\n    ReadStillImageFileValue,\n    ReadTextFileValue,\n    ReadTextValueAsHtml,\n    ReadTextValueAsString,\n    ReadTextValueAsXml,\n    ReadUriValue,\n    ReferredResourcesByStandoffLink,\n    Utils\n} from '../../declarations';\n\n/**\n * Contains methods to convert JSON-LD representing resources and properties to classes.\n * These methods works only for instances of resources and properties, not for ontologies (data model).\n */\nexport module ConvertJSONLD {\n\n    /**\n     * Function to be passed to a filter used on an array of property names\n     * sorting out all non value property names.\n     *\n     * Gets all property names that refer to value objects.\n     *\n     * @param propName the name of a property to be checked.\n     * @returns Boolean indicating if the name refers to a value property.\n     */\n    const getPropertyNames = (propName) => {\n        return propName !== '@id'\n            && propName !== '@type'\n            && propName !== KnoraConstants.RdfsLabel\n            && propName !== KnoraConstants.attachedToProject\n            && propName !== KnoraConstants.attachedToUser\n            && propName !== KnoraConstants.creationDate\n            && propName !== KnoraConstants.lastModificationDate\n            && propName !== KnoraConstants.hasPermissions;\n    };\n\n\n    /**\n     * Constructs a [[ReadResource]] from JSON-LD.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param resourceJSONLD an a resource and its properties serialized as JSON-LD.\n     * @returns a [[ReadResource]].\n     */\n    function constructReadResource(resourceJSONLD: object): ReadResource {\n\n        const properties: ReadProperties = constructReadProperties(resourceJSONLD);\n\n        return new ReadResource(\n            resourceJSONLD['@id'],\n            resourceJSONLD['@type'],\n            resourceJSONLD[KnoraConstants.RdfsLabel],\n            [], // to be updated once another request has been made\n            [], // to be updated once another request has been made\n            [], // to be updated once another request has been made\n            [], // to be updated once another request has been made\n            properties\n        );\n    }\n\n    /**\n     * Constructs a [[ReadPropertyItem]] from JSON-LD,\n     * taking into account the property's value type.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param propValue the value serialized as JSON-LD.\n     * @param propIri the Iri of the property.\n     * @param standoffLinkValues standoffLinkValues of the resource. Text values may contain links to other resources.\n     * @returns a [[ReadPropertyItem]] or `undefined` in case the value could not be processed correctly.\n     */\n    function createValueSpecificProp(\n        propValue: Object, propIri: string, standoffLinkValues: ReadLinkValue[]): ReadPropertyItem | undefined {\n\n        // convert a JSON-LD property value to a `ReadPropertyItem`\n\n        let valueSpecificProp: ReadPropertyItem;\n\n        // check for the property's value type\n        switch (propValue['@type']) {\n            case KnoraConstants.TextValue:\n                // a text value might be given as plain string, html or xml.\n                let textValue: ReadPropertyItem;\n\n                if (propValue[KnoraConstants.valueAsString] !== undefined) {\n                    textValue = new ReadTextValueAsString(propValue['@id'], propIri, propValue[KnoraConstants.valueAsString]);\n                } else if (propValue[KnoraConstants.textValueAsHtml] !== undefined) {\n\n                    const referredResources: ReferredResourcesByStandoffLink = {};\n\n                    // check for standoff links and include referred resources, if any\n                    // when the user interacts with a standoff link, further information about the referred resource can be shown\n                    for (const standoffLink of standoffLinkValues) {\n                        const referredRes: ReadResource = standoffLink.referredResource;\n                        referredResources[referredRes.id] = referredRes;\n                    }\n\n                    textValue = new ReadTextValueAsHtml(\n                        propValue['@id'], propIri, propValue[KnoraConstants.textValueAsHtml], referredResources\n                    );\n                } else if (\n                    propValue[KnoraConstants.textValueAsXml] !== undefined && propValue[KnoraConstants.textValueHasMapping] !== undefined) {\n                    textValue = new ReadTextValueAsXml(\n                        propValue['@id'], propIri, propValue[KnoraConstants.textValueAsXml], propValue[KnoraConstants.textValueHasMapping]\n                    );\n                } else {\n                    // expected text value members not defined\n                    console.error('ERROR: Invalid text value: ' + JSON.stringify(propValue));\n                }\n\n                valueSpecificProp = textValue;\n                break;\n\n            case KnoraConstants.DateValue:\n                const dateValue = new ReadDateValue(propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.dateValueHasCalendar],\n                    propValue[KnoraConstants.dateValueHasStartYear],\n                    propValue[KnoraConstants.dateValueHasEndYear],\n                    propValue[KnoraConstants.dateValueHasStartEra],\n                    propValue[KnoraConstants.dateValueHasEndEra],\n                    propValue[KnoraConstants.dateValueHasStartMonth],\n                    propValue[KnoraConstants.dateValueHasEndMonth],\n                    propValue[KnoraConstants.dateValueHasStartDay],\n                    propValue[KnoraConstants.dateValueHasEndDay]);\n\n                valueSpecificProp = dateValue;\n                break;\n\n            case KnoraConstants.LinkValue:\n\n                let linkValue: ReadLinkValue;\n\n                // check if the referred resource is given as an object or just as an IRI\n                if (propValue[KnoraConstants.linkValueHasTarget] !== undefined) {\n                    // linkValueHasTarget contains the object\n\n                    const referredResource: ReadResource = constructReadResource(propValue[KnoraConstants.linkValueHasTarget]);\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, referredResource.id, referredResource);\n                } else if (propValue[KnoraConstants.linkValueHasTargetIri] !== undefined) {\n                    // linkValueHasTargetIri contains the resource's Iri\n\n                    const referredResourceIri = propValue[KnoraConstants.linkValueHasTargetIri]['@id'];\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, referredResourceIri);\n                } else if (propValue[KnoraConstants.linkValueHasSource] !== undefined) {\n                    // linkValueHasSource contains the object\n\n                    const incomingResource: ReadResource = constructReadResource(propValue[KnoraConstants.linkValueHasSource]);\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, incomingResource.id, incomingResource);\n                } else if (propValue[KnoraConstants.linkValueHasSourceIri] !== undefined) {\n                    // linkValueHasSourceIri contains the resource's Iri\n\n                    const incomingResourceIri = propValue[KnoraConstants.linkValueHasSourceIri]['@id'];\n\n                    linkValue = new ReadLinkValue(propValue['@id'], propIri, incomingResourceIri);\n                }\n\n                valueSpecificProp = linkValue;\n                break;\n\n            case KnoraConstants.IntValue:\n\n                const intValue = new ReadIntegerValue(propValue['@id'], propIri, propValue[KnoraConstants.integerValueAsInteger]);\n                valueSpecificProp = intValue;\n\n                break;\n\n            case KnoraConstants.DecimalValue:\n\n                // a decimal value is represented as a string in order to preserve its precision\n                const decVal: number = parseFloat(propValue[KnoraConstants.decimalValueAsDecimal]['@value']);\n\n                const decimalValue = new ReadDecimalValue(propValue['@id'], propIri, decVal);\n                valueSpecificProp = decimalValue;\n\n                break;\n\n            case KnoraConstants.StillImageFileValue:\n\n                const stillImageFileValue: ReadStillImageFileValue = new ReadStillImageFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.stillImageFileValueHasIIIFBaseUrl],\n                    propValue[KnoraConstants.fileValueAsUrl],\n                    propValue[KnoraConstants.stillImageFileValueHasDimX],\n                    propValue[KnoraConstants.stillImageFileValueHasDimY],\n                    propValue[KnoraConstants.fileValueIsPreview] // optional (may be undefined)\n                );\n\n                valueSpecificProp = stillImageFileValue;\n\n                break;\n\n            case KnoraConstants.TextFileValue:\n\n                const textFileValue = new ReadTextFileValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.fileValueHasFilename],\n                    propValue[KnoraConstants.fileValueAsUrl]\n                );\n\n                valueSpecificProp = textFileValue;\n\n                break;\n\n            case KnoraConstants.ColorValue:\n\n                const readColorValue: ReadColorValue = new ReadColorValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.colorValueAsColor]\n                );\n\n                valueSpecificProp = readColorValue;\n\n                break;\n\n            case KnoraConstants.GeomValue:\n\n                const readGeomValue: ReadGeomValue = new ReadGeomValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.geometryValueAsGeometry]\n                );\n\n                valueSpecificProp = readGeomValue;\n\n                break;\n\n            case KnoraConstants.UriValue:\n\n                const uriValue: ReadUriValue = new ReadUriValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.uriValueAsUri]['@value']\n                );\n\n                valueSpecificProp = uriValue;\n\n                break;\n\n            case KnoraConstants.BooleanValue:\n\n                const boolValue: ReadBooleanValue = new ReadBooleanValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.booleanValueAsBoolean]\n                );\n\n                valueSpecificProp = boolValue;\n\n                break;\n\n\n            case KnoraConstants.IntervalValue:\n\n                // represented as strings to preserve precision\n                const intStart = parseFloat(propValue[KnoraConstants.intervalValueHasStart]['@value']);\n                const intEnd = parseFloat(propValue[KnoraConstants.intervalValueHasEnd]['@value']);\n\n                const intervalValue: ReadIntervalValue = new ReadIntervalValue(\n                    propValue['@id'],\n                    propIri,\n                    intStart,\n                    intEnd\n                );\n\n                valueSpecificProp = intervalValue;\n\n                break;\n\n            case KnoraConstants.ListValue:\n\n                const listValue: ReadListValue = new ReadListValue(\n                    propValue['@id'],\n                    propIri,\n                    propValue[KnoraConstants.listValueAsListNode]['@id'],\n                    propValue[KnoraConstants.listValueAsListNodeLabel]\n                );\n\n                valueSpecificProp = listValue;\n\n                break;\n\n            default:\n                // unsupported value type\n                console.error('ERROR: value type not implemented yet: ' + propValue['@type']);\n                break;\n        }\n\n        return valueSpecificProp;\n\n    }\n\n\n    /**\n     * Construct a [[ReadProperties]] from JSON-LD.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param resourceJSONLD an object describing the resource and its properties.\n     * @returns a [[ReadProperties]].\n     */\n    function constructReadProperties(resourceJSONLD: object): ReadProperties {\n\n        // JSON-LD representing standoff link values\n        // text values may contain standoff links\n        const standoffLinkValuesJSONLD: Object = resourceJSONLD[KnoraConstants.hasStandoffLinkToValue];\n\n        // to be populated with standoff link values\n        const standoffLinkValues: ReadLinkValue[] = [];\n\n        // convert each standoff link value JSON-LD object to a ReadLinkValue\n        // in order populate the collection with all the standoff link values\n        if (standoffLinkValuesJSONLD !== undefined && Array.isArray(standoffLinkValuesJSONLD)) {\n            for (const standoffLinkJSONLD of standoffLinkValuesJSONLD) {\n                const standoffVal: ReadLinkValue = createValueSpecificProp(\n                    standoffLinkJSONLD, KnoraConstants.hasStandoffLinkToValue, []\n                ) as ReadLinkValue;\n\n                standoffLinkValues.push(standoffVal);\n            }\n        } else if (standoffLinkValuesJSONLD !== undefined) {\n            const standoffVal = createValueSpecificProp(\n                standoffLinkValuesJSONLD, KnoraConstants.hasStandoffLinkToValue, []\n            ) as ReadLinkValue;\n\n            standoffLinkValues.push(standoffVal);\n        }\n\n        let propNames = Object.keys(resourceJSONLD);\n\n        // filter out everything that is not a Knora property name\n        propNames = propNames.filter(getPropertyNames);\n\n        const properties: ReadProperties = {};\n\n        // iterate over all the given property names\n        for (const propName of propNames) {\n\n            const propValues: Array<ReadPropertyItem> = [];\n\n            // either an array of values or just one value is given\n            if (Array.isArray(resourceJSONLD[propName])) {\n                // array of values\n\n                // for each property name, an array of property values is given, iterate over it\n                for (const propValue of resourceJSONLD[propName]) {\n\n                    // convert a JSON-LD property value to a `ReadPropertyItem`\n                    const valueSpecificProp: ReadPropertyItem = createValueSpecificProp(propValue, propName, standoffLinkValues);\n\n                    // if it is undefined, the value could not be constructed correctly\n                    // add the property value to the array of property values\n                    if (valueSpecificProp !== undefined) propValues.push(valueSpecificProp);\n\n                }\n            } else {\n                // only one value\n\n                const valueSpecificProp: ReadPropertyItem = createValueSpecificProp(resourceJSONLD[propName], propName, standoffLinkValues);\n\n                // if it is undefined, the value could not be constructed correctly\n                // add the property value to the array of property values\n                if (valueSpecificProp !== undefined) propValues.push(valueSpecificProp);\n            }\n\n            // add the property to the properties object\n            properties[propName] = propValues;\n\n        }\n\n        return properties;\n    }\n\n    /**\n     * Turns an API response in JSON-LD representing a sequence of resources into a [[ReadResourcesSequence]].\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param resourcesResponseJSONLD a resource or a sequence of resources, represented as a JSON-LD object.\n     * @returns a [[ReadResourcesSequence]].\n     */\n    export function createReadResourcesSequenceFromJsonLD(resourcesResponseJSONLD: object): ReadResourcesSequence {\n\n        const resources: Array<ReadResource> = [];\n        let numberOfResources: number;\n        const resourcesGraph = resourcesResponseJSONLD['@graph'];\n\n        // either an array of resources or just one resource is given\n        if (resourcesGraph !== undefined) {\n            // an array of resources\n            numberOfResources = resourcesGraph.length;\n\n            for (const resourceJSONLD of resourcesGraph) {\n\n                const resource: ReadResource = constructReadResource(resourceJSONLD);\n\n                // add the resource to the resources array\n                resources.push(resource);\n            }\n        } else {\n            if (Object.keys(resourcesResponseJSONLD).length === 0) {\n                // empty answer, no resources given\n                numberOfResources = 0;\n            } else {\n\n                // only one resource\n                numberOfResources = 1;\n\n                const resource: ReadResource = constructReadResource(resourcesResponseJSONLD);\n\n                // add the resource to the resources array\n                resources.push(resource);\n            }\n        }\n\n        return new ReadResourcesSequence(resources, numberOfResources);\n\n    }\n\n    /**\n     * Collects all the types (classes) of referred resources from a given resource (from its linking properties).\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param {Object} resourceJSONLD JSON-LD describing one resource.\n     * @return an Array of resource class Iris (including duplicates).\n     */\n    function getReferredResourceClasses(resourceJSONLD: object): string[] {\n\n        let propNames = Object.keys(resourceJSONLD);\n        // filter out everything that is not a Knora property name\n        propNames = propNames.filter(getPropertyNames);\n\n        const referredResourceClasses = [];\n\n        for (const prop of propNames) {\n\n            // several values given for this property\n            if (Array.isArray(resourceJSONLD[prop])) {\n\n                for (const referredRes of resourceJSONLD[prop]) {\n\n                    // if the property is a LinkValue and it contains an embedded resource, get its type\n                    if (referredRes['@type'] === KnoraConstants.LinkValue && referredRes[KnoraConstants.linkValueHasTarget] !== undefined) {\n\n                        // target resource is represented\n                        referredResourceClasses.push(referredRes[KnoraConstants.linkValueHasTarget]['@type']);\n                    } else if (\n                        referredRes['@type'] === KnoraConstants.LinkValue && referredRes[KnoraConstants.linkValueHasSource] !== undefined) {\n                        // source resource is represented\n                        referredResourceClasses.push(referredRes[KnoraConstants.linkValueHasSource]['@type']);\n                    }\n\n                }\n            } else {\n                // only one value given for this property\n\n                // if the property is a LinkValue and it contains an embedded resource, get its type\n                if (\n                    resourceJSONLD[prop]['@type']\n                    === KnoraConstants.LinkValue && resourceJSONLD[prop][KnoraConstants.linkValueHasTarget]\n                    !== undefined) {\n\n                    // target resource is represented\n                    referredResourceClasses.push(resourceJSONLD[prop][KnoraConstants.linkValueHasTarget]['@type']);\n                } else if (\n                    resourceJSONLD[prop]['@type']\n                    === KnoraConstants.LinkValue && resourceJSONLD[prop][KnoraConstants.linkValueHasSource]\n                    !== undefined) {\n                    // source resource is represented\n                    referredResourceClasses.push(resourceJSONLD[prop][KnoraConstants.linkValueHasSource]['@type']);\n                }\n            }\n\n        }\n\n        return referredResourceClasses;\n\n    }\n\n    /**\n     * Gets the resource types (classes) from a JSON-LD representing a sequence of resources.\n     * Expects JSON-LD with all Iris fully expanded.\n     *\n     * @param resourcesResponseJSONLD a sequence of resources, represented as a JSON-LD object.\n     * @returns {Array<String>} the resource class Iris (without duplicates).\n     */\n    export function getResourceClassesFromJsonLD(resourcesResponseJSONLD: object): string[] {\n\n        const resourcesGraph = resourcesResponseJSONLD['@graph'];\n        let resourceClasses: Array<string> = [];\n\n        // either an array of resources or just one resource is given\n        if (resourcesGraph !== undefined) {\n            // an array of resources\n\n            for (const resourceJSONLD of resourcesGraph) {\n                // get class of the current resource\n                resourceClasses.push(resourceJSONLD['@type']);\n\n                // get the classes of referred resources\n                const referredResourceClasses = getReferredResourceClasses(resourceJSONLD);\n\n                resourceClasses = resourceClasses.concat(referredResourceClasses);\n\n            }\n\n        } else {\n            // only one resource\n\n            if (Object.keys(resourcesResponseJSONLD).length === 0) {\n                return [];\n            } else {\n                resourceClasses.push(resourcesResponseJSONLD['@type']);\n\n                // get the classes of referred resources\n                const referredResourceClasses = getReferredResourceClasses(resourcesResponseJSONLD);\n\n                resourceClasses = resourceClasses.concat(referredResourceClasses);\n            }\n        }\n\n        // filter out duplicates\n        return resourceClasses.filter(Utils.filterOutDuplicates);\n\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SearchService } from './search.service';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class IncomingService extends SearchService {\n\n    /**\n       * Returns all incoming regions for a particular resource.\n       */\n    getIncomingRegions(resourceIRI: string, offset: number): Observable<any> {\n        const sparqlQueryStr = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?region knora-api:isMainResource true .\n\n?region knora-api:hasGeometry ?geom .\n\n?region knora-api:hasComment ?comment .\n\n?region knora-api:hasColor ?color .\n} WHERE {\n?region a knora-api:Region .\n?region a knora-api:Resource .\n\n?region knora-api:isRegionOf <${resourceIRI}> .\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\n\n<${resourceIRI}> a knora-api:Resource .\n\n?region knora-api:hasGeometry ?geom .\nknora-api:hasGeometry knora-api:objectType knora-api:Geom .\n\n?geom a knora-api:Geom .\n\n?region knora-api:hasComment ?comment .\nknora-api:hasComment knora-api:objectType xsd:string .\n\n?comment a xsd:string .\n\n?region knora-api:hasColor ?color .\nknora-api:hasColor knora-api:objectType knora-api:Color .\n\n?color a knora-api:Color .\n} OFFSET ${offset}\n`;\n        // console.log('sparqlQueryStr ', sparqlQueryStr);\n        return this.doExtendedSearch(sparqlQueryStr);\n    }\n\n    /**\n     * Returns all the StillImageRepresentations for the given resource, if any.\n     * StillImageRepresentations link to the given resource via knora-base:isPartOf.\n     *\n     * @param resourceIri the Iri of the resource whose StillImageRepresentations should be returned.\n     * @param offset the offset to be used for paging. 0 is the default and is used to get the first page of results.\n     * @returns {Observable<any>}\n     */\n    getStillImageRepresentationsForCompoundResource(resourceIri: string, offset: number): Observable<any> {\n        const sparqlQueryStr = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?page knora-api:isMainResource true .\n\n?page knora-api:seqnum ?seqnum .\n\n?page knora-api:hasStillImageFile ?file .\n} WHERE {\n\n?page a knora-api:StillImageRepresentation .\n?page a knora-api:Resource .\n\n?page knora-api:isPartOf <${resourceIri}> .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\n<${resourceIri}> a knora-api:Resource .\n\n?page knora-api:seqnum ?seqnum .\nknora-api:seqnum knora-api:objectType xsd:integer .\n\n?seqnum a xsd:integer .\n\n?page knora-api:hasStillImageFile ?file .\nknora-api:hasStillImageFile knora-api:objectType knora-api:File .\n\n?file a knora-api:File .\n\n} ORDER BY ?seqnum\nOFFSET ${offset}\n`;\n\n        return this.doExtendedSearch(sparqlQueryStr);\n\n    }\n\n\n    /**\n     *\n     * Returns all incoming links for the given resource Iri\n     * but incoming regions and still image representations.\n     *\n     * @param {string} resourceIri the Iri of the resource whose incoming links should be returned.\n     * @param offset the offset to be used for paging. 0 is the default and is used to get the first page of results.\n     */\n    getIncomingLinksForResource(resourceIri: string, offset: number): Observable<any> {\n        const sparqlQueryStr = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?incomingRes knora-api:isMainResource true .\n\n?incomingRes ?incomingProp <${resourceIri}> .\n\n} WHERE {\n\n?incomingRes a knora-api:Resource .\n\n?incomingRes ?incomingProp <${resourceIri}> .\n\n<${resourceIri}> a knora-api:Resource .\n\n?incomingProp knora-api:objectType knora-api:Resource .\n\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isRegionOf <${resourceIri}> .\n}\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isPartOf <${resourceIri}> .\n}\n\n} OFFSET ${offset}\n`;\n\n        return this.doExtendedSearch(sparqlQueryStr);\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\n\n\n/**\n * Represents teh parameters of an extended search.\n */\nexport class ExtendedSearchParams {\n\n    /**\n     *\n     * @param generateGravsearch a function the generates KnarQL.\n     *                       The function is expected to take the offset\n     *                       as a parameter and return a KnarQL query string.\n     */\n    constructor(public generateGravsearch: (offset: number) => string) {\n\n    }\n\n}\n\n@Injectable({\n    providedIn: 'root'\n})\n/**\n * Temporarily stores the parameters of an extended search.\n */\nexport class SearchParamsService {\n\n    // init with a dummy function\n    private searchParamsMessage = new BehaviorSubject<ExtendedSearchParams>(new ExtendedSearchParams((offset: number) => ''));\n    currentSearchParams = this.searchParamsMessage.asObservable();\n\n    constructor() {\n    }\n\n    /**\n     * Update the parameters of an extended seacrh.\n     *\n     * @param {ExtendedSearchParams} searchParams\n     */\n    changeSearchParamsMsg(searchParams: ExtendedSearchParams) {\n        this.searchParamsMessage.next(searchParams);\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ExtendedSearchParams, SearchParamsService } from './search-params.service';\nimport { KnoraConstants, KnoraSchema, Utils } from '../../declarations';\nimport { PropertyWithValue } from '../../declarations/api/operators';\n\n/**\n * Represents an error that occurred when generating KnarQL.\n */\nclass GravsearchGenerationError extends Error {\n\n    constructor(msg: string) {\n        super(msg);\n    }\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class GravsearchGenerationService {\n\n    // map of complex knora-api value types to simple ones\n    public static typeConversionComplexToSimple = {\n        'http://api.knora.org/ontology/knora-api/v2#IntValue': KnoraConstants.xsdInteger, // use computed property name: http://www.ecma-international.org/ecma-262/6.0/#sec-object-initializer\n        'http://api.knora.org/ontology/knora-api/v2#DecimalValue': KnoraConstants.xsdDecimal,\n        'http://api.knora.org/ontology/knora-api/v2#BooleanValue': KnoraConstants.xsdBoolean,\n        'http://api.knora.org/ontology/knora-api/v2#TextValue': KnoraConstants.xsdString,\n        'http://api.knora.org/ontology/knora-api/v2#DateValue': KnoraConstants.dateSimple,\n        'http://api.knora.org/ontology/knora-api/v2#IntervalValue': KnoraConstants.intervalSimple,\n        'http://api.knora.org/ontology/knora-api/v2#GeomValue': KnoraConstants.geomSimple,\n        'http://api.knora.org/ontology/knora-api/v2#ColorValue': KnoraConstants.colorSimple,\n        'http://api.knora.org/ontology/knora-api/v2#GeonameValue': KnoraConstants.geonameSimple,\n        'http://api.knora.org/ontology/knora-api/v2#UriValue': KnoraConstants.xsdUri,\n        'http://api.knora.org/ontology/knora-api/v2#StillImageFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#FileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#MovingImageFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#DDDFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#AudioFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#DocumentFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#TextFileValue': KnoraConstants.fileSimple,\n        'http://api.knora.org/ontology/knora-api/v2#ListValue': KnoraConstants.xsdString\n    };\n\n    constructor(private _searchParamsService: SearchParamsService) { }\n\n    /**\n       * Converts a complex type Iri to a simple type Iri.\n       *\n       * @param {string} complexType the Iri of a value type (knora-api complex).\n       * @returns {string} the corresponding Iri of the simple type (knora-api simple).\n       */\n    private convertComplexTypeToSimpleType(complexType: string): string {\n\n        const simpleType: string = GravsearchGenerationService.typeConversionComplexToSimple[complexType];\n\n        if (simpleType !== undefined) {\n            return simpleType;\n        } else {\n            throw new GravsearchGenerationError(`complex type ${complexType} could not be converted to simple type.`);\n        }\n\n    }\n\n    /**\n       * Generates a Gravsearch query from the provided arguments.\n       *\n       * @param {PropertyWithValue[]} properties the properties specified by the user.\n       * @param {string} mainResourceClassOption the class of the main resource, if specified.\n       * @param offset the offset to be used (nth page of results).\n       * @returns {string} a KnarQL query string.\n       */\n    public createGravsearchQuery(properties: PropertyWithValue[], mainResourceClassOption?: string, offset: number = 0): string {\n\n        // class restriction for the resource searched for\n        let mainResourceClass = '';\n\n        // if given, create the class restriction for the main resource\n        if (mainResourceClassOption !== undefined) {\n            mainResourceClass = `?mainRes a <${Utils.convertComplexKnoraApiEntityIritoSimple(mainResourceClassOption)}> .`;\n        }\n\n        // criteria for the order by statement\n        const orderByCriteria = [];\n\n        // statements to be returned in query results\n        const returnStatements = [];\n\n        // loop over given properties and create statements and Filters and type annotations from them\n        const props: string[] = properties.map(\n            (propWithVal: PropertyWithValue, index: number) => {\n\n                const propIriSimple = Utils.convertComplexKnoraApiEntityIritoSimple(propWithVal.property.id);\n\n                let simpleType;\n                if (!propWithVal.property.isLinkProperty) {\n                    simpleType = this.convertComplexTypeToSimpleType(propWithVal.property.objectType);\n                } else {\n                    simpleType = KnoraConstants.resourceSimple;\n                }\n\n                // represents the object of a statement\n                let propValue;\n                if (!propWithVal.property.isLinkProperty || propWithVal.valueLiteral.comparisonOperator.getClassName() === 'Exists') {\n                    // it is not a linking property, create a variable for the value (to be used by a subsequent FILTER)\n                    // OR the comparison operator Exists is used in which case we do not need to specify the object any further\n                    propValue = `?propVal${index}`;\n                } else {\n                    // it is a linking property and the comparison operator is not Exists, use its IRI\n                    propValue = propWithVal.valueLiteral.value.toSparql(KnoraSchema.simple);\n                }\n\n                // generate statement\n                let statement: string = `?mainRes <${propIriSimple}> ${propValue} .`;\n\n                // type annotations\n                const propTypeAnnotation = `<${propIriSimple}> knora-api:objectType <${simpleType}> .`;\n                const propValueAnnotation = `${propValue} a <${simpleType}> .`;\n\n                // check if it is a linking property that has to be wrapped in a FILTER NOT EXISTS (comparison operator NOT_EQUALS) to negate it\n                if (propWithVal.property.isLinkProperty && propWithVal.valueLiteral.comparisonOperator.getClassName() === 'NotEquals') {\n                    // do not include statement in results, because the query checks for the absence of this statement\n                    statement = `FILTER NOT EXISTS {\n${statement}\n${propTypeAnnotation}\n${propValueAnnotation}\n}`;\n                } else {\n                    // TODO: check if statement should be returned returned in results (Boolean flag from checkbox)\n                    returnStatements.push(statement);\n                    statement = `\n${statement}\n${propTypeAnnotation}\n${propValueAnnotation}\n`;\n                }\n\n                // generate filter if comparison operator is not Exists\n                let filter: string = '';\n                // only create a FILTER if the comparison operator is not EXISTS and it is not a linking property\n                if (!propWithVal.property.isLinkProperty && propWithVal.valueLiteral.comparisonOperator.getClassName() !== 'Exists') {\n\n                    if (propWithVal.valueLiteral.comparisonOperator.getClassName() === 'Like') {\n                        // use regex function for LIKE\n                        filter = `FILTER regex(${propValue}, ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.simple)}, \"i\")`;\n                    } else if (propWithVal.valueLiteral.comparisonOperator.getClassName() === 'Match') {\n                        // use contains function for MATCH\n                        filter = `FILTER <${KnoraConstants.matchFunction}>(${propValue}, ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.simple)})`;\n                    } else {\n                        filter = `FILTER(${propValue} ${propWithVal.valueLiteral.comparisonOperator.type} ${propWithVal.valueLiteral.value.toSparql(KnoraSchema.simple)})`;\n                    }\n                }\n\n                // check if current value is a sort criterion\n                if (propWithVal.isSortCriterion) orderByCriteria.push(propValue);\n\n                return `${statement}\n${filter}\n`;\n\n            });\n\n        let orderByStatement = '';\n\n        if (orderByCriteria.length > 0) {\n            orderByStatement = `\nORDER BY ${orderByCriteria.join(' ')}\n`;\n        }\n\n        // template of the KnarQL query with dynamic components\n        const gravsearchTemplate = `\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\nCONSTRUCT {\n\n?mainRes knora-api:isMainResource true .\n\n${returnStatements.join('\\n')}\n\n} WHERE {\n\n?mainRes a knora-api:Resource .\n\n${mainResourceClass}\n\n${props.join('')}\n\n}\n${orderByStatement}`;\n\n        // offset component of the KnarQL query\n        const offsetTemplate = `\nOFFSET ${offset}\n`;\n\n        // function that generates the same KnarQL query with the given offset\n        const generateGravsearchQueryWithCustomOffset = (localOffset: number): string => {\n            const offsetCustomTemplate = `\nOFFSET ${localOffset}\n`;\n\n            return gravsearchTemplate + offsetCustomTemplate;\n        };\n\n        if (offset === 0) {\n            // store the function so another KnarQL query can be created with an increased offset\n            this._searchParamsService.changeSearchParamsMsg(new ExtendedSearchParams(generateGravsearchQueryWithCustomOffset));\n        }\n\n        // console.log(knarqlTemplate + offsetTemplate);\n\n        return gravsearchTemplate + offsetTemplate;\n\n    }\n\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { KuiCoreConfig, RdfDataObject, ResetTriplestoreContentResponse } from '../../declarations';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StoreService {\n\n  constructor(private http: HttpClient, @Inject('config') public config: KuiCoreConfig) { }\n\n  /**\n     * resets the content of the triplestore\n     *\n     * @param rdfDataObjects\n     * @returns {Observable<string>}\n     */\n  resetTriplestoreContent(rdfDataObjects: RdfDataObject[]): Observable<string> {\n\n    return this.http.post<ResetTriplestoreContentResponse>(this.config.api + '/admin/store/ResetTriplestoreContent', rdfDataObjects)\n      .pipe(\n        map(\n          (data) => {\n            const result: ResetTriplestoreContentResponse = data;\n            // console.log('StoreService - resetTriplestoreContent: ', result);\n            return result.message;\n          },\n          (error: HttpErrorResponse) => {\n            if (error.error instanceof Error) {\n              console.log('StoreService - resetTriplestoreContent - Client-side error occurred.', error);\n            } else {\n              console.log('StoreService - resetTriplestoreContent - Server-side error occurred.', error);\n            }\n            throw error;\n          }\n        ));\n\n  }\n}\n","import { Inject, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { ApiService } from '../api.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BasicOntologyService extends ApiService {\n\n  /**\n     * returns our list of a basic ontology\n     *\n     * @returns {Observable<any>}\n     */\n  // getBasicOntology(): Observable<any> {\n  //     let url = environment.url;\n  //     return this.httpGet(url + '/data/base-data/basic-ontology.json', {withCredentials: false});\n  // }\n  getBasicOntology(): Observable<any> {\n    const url = this.config.app;\n    return this.httpGet(url + '/data/base-data/basic-ontology.json');\n    // return this.httpGet(url + '/data/base-data/basic-ontology.json', {withCredentials: false});\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ApiService } from '../api.service';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResourceTypesService extends ApiService {\n\n  /**\n     * Get all resource types defined by the vocabulary\n     * @param iri (Vocabulary iri)\n     * @returns {Observable<any>}\n     */\n  getResourceTypesByVoc(iri: string): Observable<any> {\n    return this.httpGet('/v1/resourcetypes?vocabulary=' + encodeURIComponent(iri));\n  }\n\n  /**\n   * Get a specific resource type\n   * @param iri   (resource type iri)\n   * @returns {Observable<any>}\n   */\n  getResourceType(iri: string): Observable<any> {\n    return this.httpGet('/v1/resourcetypes/' + encodeURIComponent(iri));\n  }\n\n\n  // putResourceType(iri)\n\n}\n","import { KnoraConstants, KnoraSchema } from './knora-constants';\nimport { GravsearchGenerationService, Property } from '../../services';\n\n\n/**\n * An abstract interface representing a comparison operator.\n * This interface is implemented for the supported comparison operators.\n */\nexport interface ComparisonOperator {\n\n    // type of comparison operator\n    type: string;\n\n    // the label of the comparison operator to be presented to the user.\n    label: string;\n\n    // returns the class name when called on an instance\n    getClassName(): string;\n}\n\nexport class Equals implements ComparisonOperator {\n\n    type = KnoraConstants.EqualsComparisonOperator;\n    label = KnoraConstants.EqualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Equals';\n    }\n}\n\n\nexport class NotEquals implements ComparisonOperator {\n\n    type = KnoraConstants.NotEqualsComparisonOperator;\n    label = KnoraConstants.NotEqualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'NotEquals';\n    }\n}\n\nexport class GreaterThanEquals implements ComparisonOperator {\n\n    type = KnoraConstants.GreaterThanEqualsComparisonOperator;\n    label = KnoraConstants.GreaterThanEqualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'GreaterThanEquals';\n    }\n}\n\nexport class GreaterThan implements ComparisonOperator {\n\n    type = KnoraConstants.GreaterThanComparisonOperator;\n    label = KnoraConstants.GreaterThanComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'GreaterThan';\n    }\n}\n\nexport class LessThan implements ComparisonOperator {\n\n    type = KnoraConstants.LessThanComparisonOperator;\n    label = KnoraConstants.LessThanComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'LessThan';\n    }\n}\n\nexport class LessThanEquals implements ComparisonOperator {\n\n    type = KnoraConstants.LessThanEqualsComparisonOperator;\n    label = KnoraConstants.LessThanQualsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'LessThanEquals';\n    }\n}\n\n\nexport class Exists implements ComparisonOperator {\n\n    type = KnoraConstants.ExistsComparisonOperator;\n    label = KnoraConstants.ExistsComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Exists';\n    }\n}\n\nexport class Like implements ComparisonOperator {\n\n    type = KnoraConstants.LikeComparisonOperator;\n    label = KnoraConstants.LikeComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Like';\n    }\n\n}\n\nexport class Match implements ComparisonOperator {\n\n    type = KnoraConstants.MatchComparisonOperator;\n    label = KnoraConstants.MatchComparisonLabel;\n\n    constructor() {\n    }\n\n    getClassName() {\n        return 'Match';\n    }\n\n}\n\n/**\n * Combination of a comparison operator and a value literal or an IRI.\n * In case the comparison operator is 'Exists', no value is given.\n */\nexport class ComparisonOperatorAndValue {\n\n    constructor(readonly comparisonOperator: ComparisonOperator, readonly value?: Value) {\n    }\n}\n\n/**\n * An abstract interface representing a value: an IRI or a literal.\n */\nexport interface Value {\n\n    /**\n     * Turns the value into a SPARQL string representation.\n     *\n     * @param schema indicates the Knora schema to be used.\n     * @returns {string} SPARQL representation of the value.\n     */\n    toSparql(schema: KnoraSchema): string;\n\n}\n\n/**\n * Represents a property's value as a literal with the indication of its type.\n */\nexport class ValueLiteral implements Value {\n\n    /**\n     * Constructs a [ValueLiteral].\n     *\n     * @param {string} value the literal representation of the value.\n     * @param {string} type the type of the value (making use of xsd).\n     */\n    constructor(\n        public readonly value: string,\n        public readonly type: string) {\n    }\n\n\n    /**\n     * Creates a type annotated value literal to be used in a SPARQL query.\n     *\n     * @param schema indicates the Knora schema to be used.\n     * @returns {string}\n     */\n    public toSparql(schema: KnoraSchema): string {\n\n        let literalType: string;\n\n        // check if a Knora schema conversion is necessary, e.g., knora-api:dateValue (complex) to knora-api:date (simple).\n        // xsd types will remain unchanged\n        if (schema === KnoraSchema.simple && GravsearchGenerationService.typeConversionComplexToSimple[this.type] !== undefined) {\n            // convert to simple schema\n            literalType = GravsearchGenerationService.typeConversionComplexToSimple[this.type];\n        } else {\n            // do not convert\n            literalType = this.type;\n        }\n\n        return `\"${this.value}\"^^<${literalType}>`;\n    }\n\n}\n\n/**\n * Represents an IRI.\n */\nexport class IRI implements Value {\n\n    /**\n     * Constructs an [IRI].\n     *\n     * @param {string} iri the IRI of a resource instance.\n     */\n    constructor(readonly iri: string) {\n    }\n\n    /**\n     * Creates a SPARQL representation of the IRI.\n     *\n     * @param schema indicates the Knora schema to be used.\n     * @returns {string}\n     */\n    public toSparql(schema: KnoraSchema): string {\n        // this is an instance Iri and does not have to be converted.\n        return `<${this.iri}>`;\n    }\n\n}\n\n/**\n * An abstract interface that represents a value.\n * This interface has to be implemented for all value types (value component classes).\n */\nexport interface PropertyValue {\n\n    /**\n     * Type of the value.\n     */\n    type: string;\n\n    /**\n     * Returns the value.\n     *\n     * @returns {Value}.\n     */\n    getValue(): Value;\n\n}\n\n/**\n * Represents a property, the specified comparison operator, and value.\n */\nexport class PropertyWithValue {\n\n    /**\n     * Constructs a [PropertyWithValue].\n     *\n     * @param {Property} property the specified property.\n     * @param {ComparisonOperatorAndValue} valueLiteral the specified comparison operator and value.\n     * @param isSortCriterion indicates if the property is used as a sort criterion.\n     */\n    constructor(\n        readonly property: Property,\n        readonly valueLiteral: ComparisonOperatorAndValue,\n        readonly isSortCriterion: Boolean) {\n    }\n\n}\n\n/**\n * a list, which is used in the mat-autocomplete form field\n * contains objects with id and name. the id is usual the iri\n */\nexport interface AutocompleteItem {\n    iri: string;\n    name: string;\n    label?: string;\n}\n\n"]}